!function(e,t){function n(){e._CMLS&&e._CMLS.debug&&"object"==typeof console&&console.log&&console.log("[SMART APP BANNER "+i+"]",[].slice.call(arguments))}var i="0.5",c={read:function(e){return(document.cookie.match("(^|; )"+e+"=([^;]*)")||0)[2]},set:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n),t=encodeURI(t)+(n?"; expires="+i.toUTCString():""),document.cookie=e+"="+t+"; path=/"}};e._CMLS=e._CMLS||{},e._CMLS.smartBanner=function(i){function o(e,t){var n=Object.create(e);return Object.keys(t).map(function(e){e in n&&(n[e]=t[e])}),n}function r(){var e="undefined"!=typeof userAgent?userAgent:navigator.userAgent,t=e.split("[FBAN");"undefined"!=typeof t[1]&&(e=t[0]),n("UA",e);for(var i=[{vendor:b,regexp:/iP[honead]+/i},{vendor:v,regexp:/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i}],c=0;c<i.length;c++)if(e.match(i[c].regexp))return i[c].vendor;return!1}function s(i){n("Retrieving app ID for "+i);var c,o,r;switch(i){case b:c=e.document.querySelector('meta[name="apple-itunes-app"]');break;case v:c=e.document.querySelector('meta[name="google-play-app"]')}return c&&(o=c.getAttribute("content"),o&&o.length)?(r=/app-id=([^\s,]+)/i.exec(o),r&&r.length||(r=t),r[1]):t}function a(e,i){var c={};return c[b]="https://itunes.apple.com/en/app/id",c[v]="https://play.google.com/store/apps/details?id=",n("Fetching store URL",e,i,c[e]),c[e]?c[e]+i:t}function l(){if(m.icon.url)return m.icon.url;var t=e.document.querySelector('link[rel="apple-touch-icon"],link[rel="android-touch-icon"]');return t?t.getAttribute("href"):null}function d(){return m.title?m.title:e.document.title}i=i||{};var u={containerId:"cmls-sb",icon:{url:null,color:"transparent"},title:null,author:null,strings:{store:{apple:"On the App Store",google:"In Google Play"},price:{apple:"FREE",google:"FREE"},button:"View"},daysToHide:30},m,p,h,g;m=o(u,i),n("Loaded with settings",m);var b="apple",v="google";if(g='<i id="cmls-sb-close">&times;</i><div id="cmls-sb-icon"></div><div id="cmls-sb-info"><div id="cmls-sb-title"></div><div id="cmls-sb-author"></div><div id="cmls-sb-instore"></div></div><a href="#" id="cmls-sb-link">'+m.strings.button+"</a>",h={cache:{htmlPaddingTop:e.document.documentElement.style.paddingTop},template:'<div id="'+m.containerId+'"><i id="cmls-sb-close">&#10005;</i><div id="cmls-sb-icon"></div><div id="cmls-sb-info"><div id="cmls-sb-title"></div><div id="cmls-sb-author"></div><div id="cmls-sb-instore"></div></div><a href="#" id="cmls-sb-link">'+m.strings.button+"</a></div>",close:function(){"undefined"!=typeof ga&&ga("send","event","Smart App Banner","Closed Banner"),this.cache.container.className=this.cache.container.className.replace("cmls-sb-open","")+" cmls-sb-closed",e.document.documentElement.className=e.document.documentElement.className.replace("cmls-sb-injected",""),c.set("smartbanner-closed","true",m.daysToHide)},launchStore:function(t,n){return"undefined"!=typeof ga?void ga("send","event","Smart App Banner","Launched Store",t,{hitCallback:function(){e.document.location=n.target.href}}):void(e.document.location=n.target.href)},init:function y(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.innerHTML=this.template,t.appendChild(n),t.querySelector("#"+m.containerId).className="cmls-sb-"+e,t.querySelector("#cmls-sb-icon").style.backgroundColor=m.icon.color,t.querySelector("#cmls-sb-icon").style.backgroundImage='url("'+l()+'")',t.querySelector("#cmls-sb-title").innerHTML=d(),m.author?t.querySelector("#cmls-sb-author").innerHTML=m.author:t.querySelector("#cmls-sb-author").parentNode.removeChild(t.querySelector("#cmls-sb-author")),t.querySelector("#cmls-sb-instore").innerHTML=m.strings.price[e]+" &ndash; "+m.strings.store[e],t.querySelector("#cmls-sb-link").href=a(e,s(e)),t.querySelector("#cmls-sb-link").setAttribute("data-app-store",e);var i=t.querySelector("#cmls-sb-close"),c=t.querySelector("#cmls-sb-link"),o=this;return i.addEventListener("click",function(){o.close()},!1),i.addEventListener("touchend",function(){o.close()},!1),c.addEventListener("click",function(t){o.launchStore(e,t)},!1),c.addEventListener("touchend",function(t){o.launchStore(e,t)},!1),t.firstChild.firstChild},inject:function(t){e.document.body.appendChild(t),this.cache.container=e.document.getElementById(t.id),this.cache.containerHeight=this.cache.container.offsetHeight,n("Discovered banner height",this.cache.containerHeight);var i=e.document.documentElement;i.className=i.className+" cmls-sb-injected",this.cache.htmlPaddingTop=i.style.paddingTop,this.cache.container.className=this.cache.container.className+" cmls-sb-open"}},p=r(),n("Detected device",p?p:"unsupported"),!p||navigator.standalone||c.read("smartbanner-closed")||c.read("sb-closed")||c.read("smartbanner-installed"))return void n("Not supported or closed cookie found, ejecting.");n("Generating banner");var f=h.init(p);n("Injecting!"),h.inject(f)}}(window);
//# sourceMappingURL=./smartbanner-min.js.map