!function(t,e){t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS.LOADED=!0,t._CMLS["const"]=t._CMLS["const"]||{},t._CMLS.isHomepage=function(){return"/"===t.location.pathname&&/[\?&]?p=/i.test(t.location.search)===!1},t._CMLS.now=Date.now||function(){return(new Date).getTime()})}(window),function(t,e){t._CMLS.log=function n(){var e=t._CMLS.log;if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;e.colorCache=e.colorCache||{};var n,o,i=arguments[0],r=[].slice.call(arguments[1]);e.colorCache[i]?(n=e.colorCache[i].background,o=e.colorCache[i].complement):(n=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),o=parseInt(n,16)>=12303291?"000000":"FFFFFF",e.colorCache[i]={background:n,complement:o});var a=new Date;a=a.toISOString()?a.toISOString():a.toUTCString();var s=["%c["+i+"]","background: #"+n+"; color: #"+o];r=s.concat(r),console.groupCollapsed.apply(console,r),console.log("TIMESTAMP:",a),console.trace(),console.groupEnd()}}(window),function(t,e){t._CMLS.triggerEvent=function(e,n,o){var i;t.document.createEvent?(i=t.document.createEvent("CustomEvent"),i.initCustomEvent(n,!0,!0,o)):i=new CustomEvent(n,{detail:o}),e.dispatchEvent(i)}}(window),function(t,e){t._CMLS.throttle=function(e,n,o){var i,r,a,s=null,c=0;o||(o={});var l=function(){c=o.leading===!1?0:t._CMLS.now(),s=null,a=e.apply(i,r),s||(i=r=null)};return function(){var d=t._CMLS.now();c||o.leading!==!1||(c=d);var u=n-(d-c);return i=this,r=arguments,0>=u||u>n?(s&&(clearTimeout(s),s=null),c=d,a=e.apply(i,r),s||(i=r=null)):s||o.trailing===!1||(s=setTimeout(l,u)),a}}}(window),function(t,e){t._CMLS.debounce=function(e,n,o){var i,r,a,s,c,l=function(){var d=t._CMLS.now()-s;n>d&&d>=0?i=setTimeout(l,n-d):(i=null,o||(c=e.apply(a,r),i||(a=r=null)))},d=function(){a=this,r=arguments,s=t._CMLS.now();var d=o&&!i;return i||(i=setTimeout(l,n)),d&&(c=e.apply(a,r),a=r=null),c};return d.clear=function(){clearTimeout(i),i=a=r=null},d}}(window),function(t,e){function n(){s.log(i+" v"+a,arguments)}function o(){var e;t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){var o=t.googletag.pubads();for(var i in o)if(o[i].hasOwnProperty("cms-sgroup")){e=o[i]["cms-sgroup"];break}if(e){n("s-groups acquired!"),s.sGroups=e;var r=["cms-sgroup"].concat(s.sGroups);t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[],n("Firing events.");for(var a in r)r.hasOwnProperty(a)&&(t.sharedContainerDataLayer.push({event:r[a]}),t.corpDataLayer.push({event:r[a]}),s.triggerEvent(t,"cms-sgroup",r[a]))}})}var i="GLOBALIZE SGROUPS",r="globalizeSGroups",a="0.6",s=t._CMLS||{};s[r]||(n("Initializing."),s[r]=new o)}(window),function(t,e){var n=t._CMLS||{};n["const"].PLAYER_TUNEGENIE=8471,n["const"].PLAYER_TRITON=8468,n["const"].PLAYER_POSITION_TOP=80847980,n["const"].PLAYER_POSITION_BOTTOM=80667984,n.whichPlayer=function(){if(n.whichPlayer.cache)return n.whichPlayer.cache;var e={type:null,position:null};if(t.tgmp){n.log("COMMON",["Found TuneGenie player."]),e.type=n["const"].PLAYER_TUNEGENIE;var o=t.tgmp.options;o.position&&"bottom"===o.position.toLowerCase()?(n.log("COMMON",["TuneGenie player is on the bottom."]),e.position=n["const"].PLAYER_POSITION_BOTTOM):o.position&&"top"===o.position.toLowerCase()&&(n.log("COMMON",["TuneGenie player is on the top."]),e.position=n["const"].PLAYER_POSITION_TOP)}else t.TDPW&&(n.log("COMMON",["Found Triton player, assuming it's on top."]),e.type=n["const"].PLAYER_TRITON,e.position=n["const"].PLAYER_POSITION_TOP);return n.whichPlayer.cache=e,n.whichPlayer.cache}}(window),function(t,e){function n(){t._CMLS.log(a+" v"+c,arguments)}function o(){this.trackChange=function(e){n("Track has changed.",e),l.triggerEvent(t,"cmls-player.trackchange",e)},this.playing=function(){n("Player is streaming."),l.triggerEvent(t,"cmls-player.playing")},this.stopped=function(){n("Player is stopped."),l.triggerEvent(t,"cmls-player.stopped")}}function i(){var e=new o;t.tgmp.addEventListener(t.top.TGMP_EVENTS.nowplaying,function(t){e.trackChange(t)}),t.tgmp.addEventListener(t.top.TGMP_EVENTS.streamplaying,function(t){t===!0?e.playing():e.stopped()})}function r(){var e={},i,r=2500,a={PLAYING:1,STOPPED:0},s=new o,c=this;return this.checkCurrentTrack=function(){var e=localStorage&&JSON?JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state")):!1;return e&&e.data?(e.data.stream&&"LIVE_PLAYING"===e.data.stream.code.toUpperCase()?c.setState(a.PLAYING):c.setState(a.STOPPED),e.data.song&&e.data.song.id&&c.hasTrackChanged(e.data.song.id)&&c.trackHasChanged(e.data.song),!0):!1},this.setState=function(t){if(t!==e.state){switch(t){case a.PLAYING:s.playing();break;default:s.stopped()}e.state=t}},this.hasTrackChanged=function(t){return t&&t!==e.trackId?!0:!1},this.trackHasChanged=function(t){e.trackId=t.id,s.trackChange(t)},this.startTimer=function(){clearTimeout(i),i=null,i=setTimeout(function(){c.checkCurrentTrack(),c.startTimer()},r)},n("Initializing."),t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),n("Initialized."),this):(n("Player configuration not available, exiting."),!1)}var a="PLAYER WATCH",s="playerWatch",c="0.6",l=t._CMLS;if(l[s])return!1;var d=l.whichPlayer();d.type===l["const"].PLAYER_TRITON&&(l[s]=new r,n("Triton player tracker enabled.")),d.type===l["const"].PLAYER_TUNEGENIE&&(l[s]=new i,n("TuneGenie player tracker enabled."))}(window),function(t,e){function n(){t._CMLS.log(r+" v"+s,arguments)}function o(){var e=null,o=this;this.timeout=l.autoRefreshAdsTimer||c,this.checkConditions=function(){return l.autoReloader&&l.autoReloader.active?(n("Autoreloader is active, conditions fail."),!1):!0},this.stop=function(){return n("Stopping timer."),clearTimeout(e),e=null,o},this.start=function(){return o.stop(),o.checkConditions()?(n("Starting timer for "+o.timeout+" minute countdown."),o.timer=setTimeout(function(){o.fire()},6e4*o.timeout),!0):!1},this.fire=function(){return o.checkConditions()?void t.googletag.cmd.push(function(){n("Refreshing ads."),t.googletag.pubads().refresh(),o.start()}):!1},n("Initializing."),t.addEventListener("cmls-player.stopped",function(){o.stop()},!1),t.addEventListener("cmls-player.playing",function(){o.start()},!1),t.History&&t.History.Adapter&&t.History.Adapter.bind(t,"pageChange",function(){o.start()})}function i(){if(!l.sGroups)return void n("Init test called without sgroups available.");for(var t in l.sGroups)/Format\s+(.*Talk.*|Sports)/.test(l.sGroups[t])&&(n("Format is good."),l[a]=new o,d=!0)}var r="AUTO REFRESH ADS",a="autoRefreshAds",s="0.4",c=4,l=t._CMLS;if(!l[a]){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[];var d=!1;i(),t.addEventListener("cms-sgroup",function(){d||i()},!1)}}(window),function(t,e){function n(){t._CMLS.log(i+" v"+a,arguments)}function o(){var e=this;this.setDFPCriteria=function(e,o){t.googletag.cmd.push(function(){n("Setting targeting criteria.",e,o),t.googletag.pubads().setTargeting(e,o)})},t.addEventListener("cmls-player.playing",function(){n("Player is streaming."),e.setDFPCriteria("td-player-state","PLAYING")},!1),t.addEventListener("cmls-player.stopped",function(){n("Player has stopped."),e.setDFPCriteria("td-player-state","STOPPED")},!1),t.addEventListener("cmls-player.trackchange",function(t){n("Track has changed.",t),t.artist&&e.setDFPCriteria("td-player-artist",t.artist),t.album&&e.setDFPCriteria("td-player-album",t.album),t.title&&e.setDFPCriteria("td-player-track",t.title),t.id&&e.setDFPCriteria("td-player-id",t.id)}),n("Initialized.")}var i="PLAYER DFP INJECTOR",r="playerDFPInjector",a="0.1",s=t._CMLS||{};if(s[r])return!1;var c=s.whichPlayer();return c.type!==s["const"].PLAYER_TRITON?(n("Triton player not enabled."),!1):void(s[r]=new o)}(window),function($,t,e){function n(){c.log(r+" v"+s,arguments)}function o(){var e=this;this.updateIframe=function(t){var n=t.jquery?t:$(t);n.contents().find('a[target="_self"], a[target="_top"], a[target="_parent"]').each(function(){e.updateLink(this)})},this.updateLink=function(o,i){var r=o.jquery?o:$(o),s=t.document.createElement("a");return s.href=r.prop("href"),0===s.href.indexOf("/")||s.hostname!==t.location.hostname&&!i?void(s=null):void(r.data("cmls-bound")||(n("Binding to link with href:",s.href),r.off("."+a).on("click."+a,e.clickThrough).data("cmls-bound",1),s=null))},this.clickThrough=function(e){if(n("Intercepting click."),!e.currentTarget||e.currentTarget.href)return void n("Could not get href from target.");var o=e.currentTarget.href;if(l.type===c["const"].PLAYER_TRITON&&t.History)n("Navigating through Triton player.",o),t.History.pushState(null,null,o);else{if(l.type!==c["const"].PLAYER_TUNEGENIE||!t.tgmp)return;n("Navigating through TuneGenie player.",o),t.tgmp.updateLocation(o)}e.preventDefault()},n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){$('iframe[id^="google_ads_iframe"], #cmlsWallpaperInjectorContainer iframe').each(function(){e.updateIframe(this)}),$(t).load(function(){$('iframe[id^="google_ads_iframe"], #cmlsWallpaperInjectorContainer iframe').each(function(){e.updateIframe(this)})}),t.googletag.pubads().addEventListener("slotRenderEnded",function(n){if(n&&n.slot){var o=n.slot.getSlotElementId(),i=t.document.getElementById(o);e.updateIframe(i)}}),n("Initialized.")})}function i(){return n("Checking for player, try:",d),l=c.whichPlayer(),l.type?(n("Player found."),void(c[a]=new o)):d>20?void n("Limit reached, ejecting."):(setTimeout(i,1e3),void d++)}var r="NAV THROUGH PLAYER",a="navThroughPlayer",s="0.2",c=t._CMLS,l=c.whichPlayer();if(!c[a]){var d=0;i()}}(jQuery,window),function(t,e){function n(){s.log(i+" v"+a,arguments)}function o(){function o(){var e=1020,n=document.documentElement||{clientWidth:0,clientHeight:0},o=Math.max(n.clientWidth,t.innerWidth||0),i=Math.max(n.clientHeight,t.innerHeight||0);return o>e&&(o=e),{w:o,h:i}}function i(e){var n=o();l({pid:e,slot:".wrapper-content",filter:function(){return t.document.body.className.indexOf("home")>-1||s.forceTeadsInBoard===!0},format:"inboard",before:!0,css:"margin: auto !important; padding-top: 5px; padding-bottom: 5px; max-width: 1020px",size:{w:n.w}})}function r(e){l({pid:e,slot:".wrapper-content .column-1 .entry-content p",filter:function(){return t.document.body.className.indexOf("single-feed_posts")>-1},format:"inread",before:!1,css:"padding-bottom: 10px !important;"})}function a(){n("Refreshing cache, reinserting PID requests."),u.forEach(function(e){for(var n=0;n<t.self._ttf.length;n++)t.self._ttf[n].pid===e.pid&&t.self._ttf[n].splice(n,1);e.launched=!1,l(e)})}function c(){t.self._ttf=e,t.parent._ttf=e;for(var n=[t.self.document.getElementById("cmlsTeadsScript"),t.parent.document.getElementById("cmlsTeadsScript")],o=0;o<n.length;o++)n[o]&&n[o].parentNode.removeChild(n[o]);!function(t){var e,n=t.getElementsByTagName("script")[0];e=t.createElement("script"),e.async=!0,e.id="cmlsTeadsScript",e.src="http://cdn.teads.tv/js/all-v1.js",n.parentNode.insertBefore(e,n)}(t.self.document)}function l(e){return e&&e.pid&&e.slot&&e.format?(e.components=e.components||{skip:{delay:0}},e.lang=e.lang||"en",e.filter=e.filter||function(){return!0},e.minSlot=e.minSlot||0,e.before=e.before||!1,e.BTF=e.BTF||!1,e.css=e.css||"margin: auto !important;",n("Injecting!",e),t.self._ttf=t.self._ttf||[],t.self._ttf.push(e),c(),void(u[e.pid]=e)):void n("Invalid request.",e)}var d=this,u={},p=function(){};this.process=function(t){return t?(t.push&&t.pop||(t=[t]),void t.forEach(function(t){if(!t.format||!t.pid)return void n("Invalid request.",t);switch(n("Received request","format: "+t.format,"PID: "+t.pid),t.format.toLowerCase()){case"inread":r(t.pid);break;case"inboard":i(t.pid)}})):void n("Request was empty.",t)},t.self._teadsinjector&&t.self._teadsinjector.length&&d.process(t.self._teadsinjector),p.prototype=[],p.prototype.push=function(){var t=[].prototype.slice.call(arguments);d.process(t)},t.self._teadsinjector=new p;var g=s.whichPlayer();g&&g.type&&g.type===s["const"].PLAYER_TRITON&&t.History&&t.History.Adapter&&(n("Binding to pageChange event."),t.History.Adapter.bind(t,"pageChange",function(){t.document.addEventListener("DOMContentLoaded",function(){a()})})),n("Initialized.")}var i="TEADS INJECTOR",r="teadsInjector",a="0.8",s=t._CMLS||{};s[r]||t.self.teads||(s[r]=new o)}(window),function($,t,e){function n(){c.log(r+" v"+s,arguments)}function o(e){function o(){return m.dfpSlot=$(e.dfpSlotNode),m.injectionNode=$(e.injectionNode),m.stickNode=$(e.stickNode),m.contentNode=$(e.contentNode),m.footerNode=$(e.footerNode),m.obstructiveNode=$(e.obstructiveNode),m.window=$(t.self),m.document=$(t.self.document),s(),m}function i(t){if(m.container&&m.container.length)return m.container;var e=$("#"+a+"Container");return e.length?(m.container=e,m.container):t===!0?!1:(n("Generating a new wallpaper container."),o(),m.container=$("<div />",{id:a+"Container","class":a+"-container"}).prependTo(m.injectionNode),r(),m.container)}function r(){m.contentNode.addClass(a+"-raiser"),m.footerNode.addClass(a+"-raiser")}function s(){return m.stickAt=m.stickNode.length?m.stickNode.offset().top:0,n("Refreshing sticky position.",m.stickAt),m.stickAt}function l(){var t=i();return t.hasClass(a+"-fixed")}function d(t){var e=i(),o=l();o&&t===!1&&(n("Unfixing wallpaper position."),e.css("top","0").removeClass(a+"-fixed")),o||t!==!0||(n("Fixing wallpaper position"),s(),e.css("top",m.stickAt).addClass(a+"-fixed"))}function u(){function t(){var t=m.window.scrollTop(),e=m.injectionNode.length?m.injectionNode.offset().top:0;return e<t+m.stickAt?!0:!1}n("Initializing scroll tracking."),d(t()?!0:!1),m.window.on("scroll."+a,_(function(){return t()?void d(!0):void d(!1)},50)),m.window.on("resize."+a,v(function(){s()},500)),n("Scroll tracking enabled.")}function p(){n("Displaying wallpaper.");var t=i();t.addClass(a+"-open"),m.obstructiveNode.hide(300),u()}function g(){var t=$.Deferred(),e=i();return m.obstructiveNode.show(300),m.window.off("."+a),e.removeData().removeProp("data").css("backgroundColor","rgba(0,0,0,0)").removeClass([a+"-open",a+"-fixed"]),setTimeout(function(){t.resolve()},500),t.promise()}function f(){if($(e.contentNode).height()<200)return n("Content node is not yet ready, retrying..."),void setTimeout(function(){f()},500);o();var t=m.dfpSlot.find("iframe"),r=t.contents().find("#google_image_div,body").first(),s=r.find("a:first"),l=r.find("img.img_ad:first,img:first").first(),d=l.prop("alt");if(n("Processing wallpaper request.",r,s,l,d),!r.length||!s.length||!l.length)return n("No wallpaper requested or request is empty, resetting."),void g();var u=i();if(s.prop("href")===u.data("slotlink")&&l.prop("src")===u.data("slotimage"))return void n("Requested wallpaper is already set.");var h="rgba(255,255,255,0)",_=d.match(/((\#[A-Za-z0-9]+)|(rgba?\(.*\)))/)||!1;_&&_.length>1&&(h=_[1]),n("Using background color.",h),g().then(function(){n("Building new wallpaper.");var t,e,o,r=i();s.length&&(t=$("<a/>",{href:s.prop("href"),target:s.prop("target")}),c.navThroughPlayer&&c.navThroughPlayer.updateLink(t),r.data("slotlink",s.prop("href"))),e=$("<iframe />",{name:a+"Iframe",scrolling:"no",marginWidth:"0",marginHeight:"0",frameborder:"0",src:"about:blank"}),o='<style>html, body { background: transparent; margin: 0; padding: 0; width: 100%; height: 100%; }body { background: url("'+l.prop("src")+'") no-repeat top center; }a { display: block; width: 100%; height: 100%; text-decoration: none; }</style>',e.load(function(){n("Injecting wallpaper into frame."),e.contents().find("body").append(o,t)}),n("Injecting iframe into container."),r.css("backgroundColor",h).append(e),l.length?$("<img/>").bind("load",function(){p(),$(this).remove()}).prop("src",l.prop("src")):p()})}function h(t){var e=t.slot.getTargeting("pos");return e.indexOf("wallpaper-ad")>-1?(n("Caught render event for wallpaper-ad",t.slot.getSlotElementId()),t.isEmpty?(n("Slot was empty, resetting wallpaper container."),g()):(n("Slot contained an ad, processing wallpaper."),f()),!1):void 0}n("Initializing.");var m={},_=c.throttle,v=c.debounce,y='<style id="'+a+'Styles">.'+a+"-container {display: block;position: absolute;z-index: 0;top: 0;left: 0;height: 0;width: 100%;overflow: hidden;text-align: center;transition: opacity 0.5s, height 0.6s, background-color 0.4s;opacity: 0;}."+a+"-container iframe {border: 0;height: 100%;width: 100%;}."+a+"-container ~ .grid-container {transition: box-shadow 0.6s}."+a+"-open {height: 100%;opacity: 1;}."+a+"-open ~ .grid-container {box-shadow: 0 0 20px rgba(0,0,0,0.3);}."+a+"-fixed {position: fixed;}."+a+"-raiser {position: relative !important;z-index: 5 !important;}"+e.dfpSlotNode+" {display: none;}</style>";$(y).appendTo("head"),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRendereEnded",function(t){n("Caught render event."),v(h(t),1e3)})}),"complete"===t.self.document.readyState||"loaded"===t.self.document.readyState?f():$(f()),n("Initialized")}var i={dfpSlotNode:"#div-gpt-ad-1418849849333-16",injectionNode:".wrapper-content",stickNode:".wrapper-header",contentNode:".wrapper-content .grid-container:first",footerNode:".wrapper-footer",obstructiveNode:".takeover-left, .takeover-right, .skyscraper-left, .skyscraper-right"},r="WALLPAPER INJECTOR",a="wallpaperInjector",s="0.6",c=t._CMLS;c[a]||(i.nameSpace=a,c[a]=new o(i))}(window.self.jQuery,window),function(t,e){function n(){s.log(i+" v"+a,arguments)}function o(e){function o(){return t.self.document.querySelector(i.condition)}var i={condition:e&&e.condition?e.condition:"body.home",timeout:e&&e.timeout?6e4*e.timeout:4e5},r=!1,a,c=s.whichPlayer(),l=this;this.reset=function(){n("Resetting timer."),clearTimeout(a),a=null,l.restart()},this.stop=function(){n("Stopping timer."),r=!1,clearTimeout(a),a=null},this.start=function(){return o()?(n("Starting countdown at "+i.timeout/6e4+" minutes."),r=!0,void l.restart()):(n("Condition check failed, will not start timer."),r=!1,void l.stop())},this.restart=function(){r&&o()?(clearTimeout(a),a=setTimeout(function(){l.fire(),l.reset()},i.timeout)):r=!1},this.destroy=function(){n("Destroying timer."),l.stop(),l=null},this.fire=function(){if(r&&o()){if(n("Reloading the page."),c.type===s["const"].PLAYER_TRITON&&t.History&&t.History.Adapter)return void t.History.Adapter.trigger(t,"statechange");if(c.type===s["const"].PLAYER_TUNEGENIE)return void t.tgmp.updateLocation(t.self.location.href);t.location.reload()}else n("Fired after conditions changed, self-destructing."),this.destroy()},n("Initialized.",i),this.start()}var i="AUTO-RELOAD PAGE",r="autoReloader",a="0.8",s=t._CMLS||{};if(!s[r]&&!t.self.teads){t._CMLS.autoReload&&t._CMLS.autoReload.length&&t._CMLS.autoReload.forEach(function(t){return new o(t)});var c=function(){};c.prototype=[],c.prototype.push=function(t){return new o(t)},t._CMLS.autoReload=new c}}(window),window._CMLS.log("COMMON",["LIBRARIES LOADED!\n                            .__\n    ____  __ __ ______ __ __|  |__ __  ___________\n___/    \\|  |  \\      \\  |  \\  |  |  \\/  ___/\n  \\   ---|  |  /  Y Y  \\ |  /  |_ |  /___  \\\n   \\___  )____/.__|_|  /___/.____/__/.___  /\n       \\/            \\/                  \\/\n"]);
//# sourceMappingURL=./compiled-allsites-min.js.map