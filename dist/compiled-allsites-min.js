!function(t,e){t.self!==t.top?t._CMLS={}:t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS.const=t._CMLS.const||{},t._CMLS.const.PLAYER_TUNEGENIE=8471,t._CMLS.const.PLAYER_TRITON=8468,t._CMLS.const.PLAYER_POSITION_TOP=80847980,t._CMLS.const.PLAYER_POSITION_BOTTOM=80667984,t._CMLS.logger=function e(){if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;t._CMLS.loggerNamesToColors=t._CMLS.loggerNamesToColors||{};var n,o,i=arguments[0],r=[].slice.call(arguments[1]);t._CMLS.loggerNamesToColors[i]?(n=t._CMLS.loggerNamesToColors[i].background,o=t._CMLS.loggerNamesToColors[i].complement):(n=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),o=parseInt(n,16)>=12303291?"000000":"FFFFFF",t._CMLS.loggerNamesToColors[i]={background:n,complement:o});var a=new Date;a=a.toISOString()?a.toISOString():a.toUTCString(),r=["%c["+i+"]","background: #"+n+"; color: #"+o].concat(r),t.top.console.groupCollapsed.apply(t.top.console,r),t.top.console.log("TIMESTAMP:",a),t.top.console.trace(),t.top.console.groupEnd()},t._CMLS.now=Date.now||function(){return(new Date).getTime()},t._CMLS.throttle=function(e,n,o){var i,r,a,s=null,c=0;o||(o={});var l=function(){c=!1===o.leading?0:t._CMLS.now(),s=null,a=e.apply(i,r),s||(i=r=null)};return function(){var d=t._CMLS.now();c||!1!==o.leading||(c=d);var p=n-(d-c);return i=this,r=arguments,p<=0||p>n?(s&&(clearTimeout(s),s=null),c=d,a=e.apply(i,r),s||(i=r=null)):s||!1===o.trailing||(s=setTimeout(l,p)),a}},t._CMLS.debounce=function(e,n,o){var i,r,a,s,c,l=function(){var d=t._CMLS.now()-s;d<n&&d>=0?i=setTimeout(l,n-d):(i=null,o||(c=e.apply(a,r),i||(a=r=null)))},d=function(){a=this,r=arguments,s=t._CMLS.now();var d=o&&!i;return i||(i=setTimeout(l,n)),d&&(c=e.apply(a,r),a=r=null),c};return d.clear=function(){clearTimeout(i),i=a=r=null},d},t._CMLS.whichPlayer=function(){if(t._CMLS.whichPlayerCache)return t._CMLS.whichPlayerCache;var e={type:null,position:null};return t.tgmp?(t._CMLS.logger("COMMON",["Found TuneGenie player."]),e.type=t._CMLS.const.PLAYER_TUNEGENIE,t.tgmp.options.position&&"bottom"===t.tgmp.options.position.toLowerCase()?(t._CMLS.logger("COMMON",["TuneGenie player is on the bottom."]),e.position=t._CMLS.const.PLAYER_POSITION_BOTTOM):t.tgmp.options.position&&"top"===t.tgmp.options.position.toLowerCase()&&(t._CMLS.logger("COMMON",["TuneGenie player is on the top."]),e.position=t._CMLS.const.PLAYER_POSITION_TOP)):t.TDPW&&(t._CMLS.logger("COMMON",["Found Triton player, assuming it's on top."]),e.type=t._CMLS.const.PLAYER_TRITON,e.position=t._CMLS.const.PLAYER_POSITION_TOP),t._CMLS.whichPlayerCache=e,t._CMLS.whichPlayerCache},t._CMLS.isHomepage=function(e){return e||(e=t),"/"===e.location.pathname&&!1===/[\?&]?p=/i.test(e.location.search)},t._CMLS.triggerEvent=function(e,n,o){var i;t.document.createEvent?(i=t.document.createEvent("CustomEvent"),i.initCustomEvent(n,!0,!0,o)):i=new CustomEvent(n,{detail:o}),e.dispatchEvent(i)},t._CMLS.logger("COMMON",["LIBRARY LOADED!\n                           .__                \n  ____  __ __  _____  __ __|  |  __ __  ______\n_/ ___\\|  |  \\/     \\|  |  \\  | |  |  \\/  ___/\n\\  \\___|  |  /  Y Y  \\  |  /  |_|  |  /___ \\ \n \\___  >____/|__|_|  /____/|____/____//____  >\n     \\/            \\/                      \\/ \n"]),t._CMLS.LOADED=!0)}(window),function(t,$,e){function n(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger(i+" v"+a,arguments)}function o(){this.identity="dfp";var e=this;return this.detectTag=function(){if(t.googletag)return n("Googletag detected."),!0},this.rawInterface=function(){return t.googletag},this.queue=function(t){e.rawInterface().cmd.push(t)},this.pubads=function(){return e.rawInterface().pubads()},this.addListener=function(t,n){e.rawInterface().cmd.push(function(){e.pubads().addEventListener(t,n)})},this.removeListener=function(t,n){return e.pubads().removeEventListener(t,n)},this.refreshAds=function(){return e.pubads().refresh()},this.setTargeting=function(t,n){return e.pubads().setTargeting(t,n)},this.defineSlot=function(t,n,o,i){var r=e.defineSlot.apply(null,t);if(n&&(r=r.setCollapseEmptyDiv(!0)),Array.isArray(o))o.forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(r=r.setTargeting(e,t[e]))});else if("object"==typeof o)for(var a in o)o.hasOwnProperty(a)&&(r=r.setTargeting(a,o[a]));return i&&(r=r.addService(e.pubads())),r},this.display=function(t){e.rawInterface().cmd.push(function(){e.rawInterface().display(t)})},this}var i="DFP INTERFACE",r="adTagDetection",a="0.1.1";t._CMLS=t._CMLS||{},t._CMLS[r]=t._CMLS[r]||{},t._CMLS[r].registeredDetectors=t._CMLS[r].registeredDetectors||[],t._CMLS[r].registeredDetectors.push(new o)}(window.self,jQuery),function(t,$,e){function n(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger(r+" v"+s,arguments)}function o(){if(t._CMLS[a].registeredDetectors&&(n("Running registered detectors.",t._CMLS[a].registeredDetectors),t._CMLS[a].registeredDetectors.forEach(function(e){if(!e.identity)return n("Invalid interface in detector: "+e.identity),!1;n("Checking registered detector: "+e.identity),e.detectTag&&e.detectTag()&&(n("Interface found in detector: "+e.identity),t._CMLS.adTag=e)})),!t._CMLS.adTag||!t._CMLS.adTag.rawInterface())return n("No interface found, rerunning detection."),void i()}function i(){l=setTimeout(o,50),d++}var r="ADTAG DETECTION",a="adTagDetection",s="0.1.1";t._CMLS=t._CMLS||{},t._CMLS[a]=t._CMLS[a]||{},t._CMLS[a].registeredDetectors=t._CMLS[a].registeredDetectors||[];var c=function(){var t="STUB INTERFACE",e="InterfaceSTUB",n="adTagDetection",o="x";return this.identity="STUB",this.detectTag=function(){},this.queue=function(t){},this.addListener=function(t,e){},this.removeListener=function(t,e){},this.pubads=function(){},this.refreshAds=function(){},this.setTargeting=function(t,e){},this.defineSlot=function(t,e,n,o){},this.display=function(t){},this.rawInterface=function(){},this};t._CMLS.adTag=new c;var l,d;o()}(window.self,jQuery),function(t,e,n){function o(){e.top._CMLS&&e.top._CMLS.logger&&e.top._CMLS.logger(i+" v"+r,arguments)}var i="Pushdown Ad",r="0.5",a="6717",s="dfp-pushdown2",c=8,l=e.document;if(!l.querySelector("body.home"))return o("Not on homepage, exiting."),!1;if(l.getElementById(s))return o("Tag already exists, exiting."),!1;if(!e.hasOwnProperty("googletag"))return o('DFP library must be included and "googletag" window variable must be available before including this library.'),!1;var d=e.googletag,p=e._CMLS&&e._CMLS.debounce?e._CMLS.debounce:function(t){t()},t=t.noConflict(),$=function(n,o){return new t.fn.init(n,o||e.document)};$.fn=$.prototype=t.fn,t.extend($,t),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(t)}(function(t){function n(){o&&(e.requestAnimationFrame(n),t.fx.tick())}if(Number(t.fn.jquery.split(".")[0])>=3)return void(e.console&&e.console.warn&&e.console.warn("The jquery.requestanimationframe plugin is not needed in jQuery 3.0 or newer as they handle it natively."));var o;e.requestAnimationFrame&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!o&&(o=!0,n())},t.fx.stop=function(){o=!1})}),d.cmd.push(function(){function t(t){return t.length?t.contents().find("#vpContainer").length?"vast":t.contents().find(".img_ad").length?"image":!!t.contents().find("video").length&&"video":(o("Could not find DFP iframe within ad container."),!1)}function n(t){o("Handling Image creative type.");var e=t.contents().find(".img_ad");if(!e.length)return o("Attempted to handle an image creative, but no image was found."),!1;o("Making image responsive."),e.css({width:"100%",height:"auto"}),o("Checking for timeout override");var n=e.prop("alt").match(/timeout=(\d+)/i),i=n&&n.length>1?1e3*n[1]:1e3*c;return o("Triggering ad display with timeout",i),g.trigger("cmls.display",function(){m.trigger("cmls.start",[i,function(){o("Triggering ad removal."),g.trigger("cmls.hide")}])}),!0}function i(t){o("Handling custom html video creative type.");var e=t.contents().find("video"),n=e.find("source");if(!e.length)return o("Attempted to handle a custom video creative, but no video tag was found."),!1;if(!e[0].canPlayType)return o("Current browser does not support HTML video."),!1;var i=!1;return n.each(function(){var t=$(this).prop("type");return!t||!e[0].canPlayType(t).replace(/no/,"")||(i=$(this),!1)}),!1===i?(o("No video source was found to be compatible with this browser."),!1):(o("Video has a compatible source."),e.prop("controls",!1).prop("muted",!0).prop("playsinline",!0).prop("autoplay",!1).on("mouseover",function(){e.prop("muted",!1)}).on("mouseout",function(){e.prop("muted",!0)}).on("canplaythrough",function(){g.trigger("cmls.display",function(){e[0].play()})}).on("playing",function(){m.trigger("cmls.start",1e3*this.duration)}).on("ended",function(){g.trigger("cmls.hide")}),o("Video initialized."),!0)}function r(t){o("Handling VAST-delivered creative.");var n={init:function(){o("Initializing VAST player.");var i=t.contents()[0],r=i.defaultView,a=i.getElementById("vpContainer");if(!a)return o("Attempted to handle VAST creative but no vpContainer was found."),!1;var s=a.getAttribute("data-vpurl");if(!s||s.length<1)return o("No vpurl attribute provided!"),!1;s=s.replace("[timestamp]",(new Date).getTime()).replace("[referrer_url]",e.location.href),r.player=new r.VASTPlayer(a),r.player.once("AdStopped",function(){n.stopped()}),r.player.load(a.getAttribute("data-vpurl")).then(function t(){n.ready()}).catch(function(t){n.error(t)})},ready:function(){var e=t.contents()[0],n=e.defaultView;n.player.adVolume=0,g.on("mouseover",function(){n.player.adVolume=1}),g.on("mouseout",function(){n.player.adVolume=0}),g.trigger("cmls.display",function(){n.player.startAd().then(function(){o("VAST player playing."),m.trigger("cmls.start",1e3*n.player.adDuration)})})},stopped:function(){o("VAST player stopped."),g.trigger("cmls.hide")},error:function(t){o("Error from VAST player",t),g.trigger("cmls.hide")}};e._CMLS.vpPushdown=n;var i=t.contents()[0].createElement("script");i.onload=n.init,i.src="https://cdn.jsdelivr.net/npm/vast-player@latest/dist/vast-player.min.js",t.contents()[0].body.appendChild(i)}function a(e){if(e.slot.getSlotElementId()===s){if(o("Caught relevant DFP render event.",e.slot.getSlotElementId()),e.isEmpty)return o("Slot was empty!"),g.trigger("cmls.hide"),!1;o("Handling ad.");var n=g.find("iframe:first");if(!n.length)return o("Attempted to handle ad, but no DFP iframe was found."),!1;var i=t(n);if(!i)return o("No supported ad creative type found."),!1;o("Ad type detected.",i),N[i](n)}}var u,g,f,m,h,v,_,y;if(y=$(".wrapper-content:first"),!y.length)return o('Could not find ".wrapper-content" element.'),!1;try{var S=d.pubads(),C=Object.getOwnPropertyNames(S);for(var L in C){var w=S[C[L]];if(w.constructor&&w.constructor===Array)for(var M in w[0])if(w[0][M]&&w[0][M].constructor===String&&w[0][M].indexOf("/6717/")>-1){u=w[0][M];break}if(u)break}if(null===u)throw{message:"Could not retrieve ad unit path."}}catch(t){return o("Failed to retrieve DFP properties.",t),!1}u+="/pushdown",o('Ad path found, defining new slot with "/pushdown" level.',u);var T=l.createElement("div");T.id=s+"-container",T.style.display="none",g=$(T);var b=l.createElement("div");b.id=s,f=$(b).appendTo(g);var E=l.createElement("style");E.innerText=" \t\t\t\t#"+s+"-container { \t\t\t\t\tfont-size: 24px !important; \t\t\t\t\tfont-size: 5vw !important; \t\t\t\t\tfont-weight: lightest !important; \t\t\t\t\tline-height: 0 !important; \t\t\t\t\tmargin: 0 auto !important; \t\t\t\t\tmax-width: 1020px !important; \t\t\t\t\toverflow: hidden !important; \t\t\t\t\tposition: relative !important; \t\t\t\t\tz-index: 1 !important; \t\t\t\t} \t\t\t\t#"+s+" { \t\t\t\t\tposition: relative; \t\t\t\t\tmargin-bottom: 10px; \t\t\t\t} \t\t\t\t#"+s+' div[id*="google_ads"] { \t\t\t\t\tposition: relative; \t\t\t\t\tpadding-bottom: 56.25%; \t\t\t\t\tmax-width: 100%; \t\t\t\t\theight: 0; \t\t\t\t\toverflow: hidden; \t\t\t\t} \t\t\t\t#'+s+" iframe { \t\t\t\t\twidth: 100%; \t\t\t\t\theight: 100%; \t\t\t\t\tposition: absolute; \t\t\t\t\ttop: 0; \t\t\t\t\tleft: 0; \t\t\t\t} \t\t\t\t#"+s+"-close { \t\t\t\t\tcolor: white; \t\t\t\t\tfont-family: sans !important; \t\t\t\t\ttext-shadow: .05em .05em .25em black; \t\t\t\t\tmix-blend-mode: exclusion; \t\t\t\t\tcursor: pointer; \t\t\t\t\tposition: absolute; \t\t\t\t\ttop: .75em; \t\t\t\t\tright: .3em; \t\t\t\t\tz-index: 100000; \t\t\t\t} \t\t\t\t#"+s+"-timer { \t\t\t\t\tbackground: #a33; \t\t\t\t\twidth: 0; \t\t\t\t\theight: 3px; \t\t\t\t\tposition: absolute; \t\t\t\t\tbottom: 7px; \t\t\t\t\tleft: 0; \t\t\t\t\tz-index: 100000; \t\t\t\t} \t\t\t\t@media (min-width: 550px) { \t\t\t\t\t#"+s+"-container { font-size: 24px !important; } \t\t\t\t} \t\t\t\t",v=$(E).appendTo(g),_=$('<script> \t\t\t\tgoogletag.cmd.push(function() { \t\t\t\t\tgoogletag.display("'+s+'"); \t\t\t\t}); \t\t\t</script>').appendTo(f);var P=l.createElement("div");P.id=s+"-close",P.title="Close",P.innerText="âœ•",h=$(P).click(function(){g.trigger("cmls.hide")}).appendTo(g);var I=l.createElement("div");I.id=s+"-timer",m=$(I).appendTo(g),g.on("cmls.display",function(t,e){o("Displaying ad"),g.stop().clearQueue().slideDown("fast"),e&&e()}),g.on("cmls.hide",function(t,e){o("Hiding ad."),m.trigger("cmls.reset"),g.stop().clearQueue().slideUp(),e&&e()}),m.on("cmls.start",function(t,e,n){o("Timer display started with duration",e),m.trigger("cmls.reset",function(){o("Animating timerDiv"),m.animate({width:"100%"},e,"linear",n)})}),m.on("cmls.reset",function(t,e){o("Resetting timerDiv to 0"),m.stop().clearQueue().css("width",0),e&&(o("Callback from cmls.reset firing."),e())});var N={image:n,video:i,vast:r};d.pubads().addEventListener("slotRenderEnded",function(t){p(a(t),500)}),o("Injecting ad tag."),d.defineSlot(u,[1020,574],s).setCollapseEmptyDiv(!0).setTargeting("pos","pushdown").addService(d.pubads()),y.prepend(g)})}(jQuery,window.self),function(t,e){function n(){t._CMLS.logger(o+" v"+r,arguments)}var o="PLAYER WATCH",i="playerWatch",r="0.5";!t._CMLS[i]&&(t.TDPW?(t._CMLS[i]={initialized:!1,cache:{},timer:null,interval:2500,const:{STOPPED:0,PLAYING:1},setDFPCriteria:function e(o,i){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){n("Setting targeting",o,i),t.googletag.pubads().setTargeting(o,i)})},checkCurrentTrack:function e(){var n=!(!localStorage||!JSON)&&JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state"));n&&n.data&&(n.data.stream&&"LIVE_PLAYING"===n.data.stream.code.toUpperCase()?this.setState(this.const.PLAYING):this.setState(this.const.STOPPED),n.data.song&&n.data.song.id&&this.hasTrackChanged(n.data.song.id)&&this.trackHasChanged(n.data.song))},setState:function e(o){return o===this.const.PLAYING&&o!==this.cache.state?(n("Player is streaming."),this.cache.state=o,this.setDFPCriteria("td-player-state","PLAYING"),void t._CMLS.triggerEvent(t,"td-player.playing")):o===this.const.STOPPED&&o!==this.cache.state?(n("Player is stopped."),this.cache.state=o,this.setDFPCriteria("td-player-state","STOPPED"),void t._CMLS.triggerEvent(t,"td-player.stopped")):void 0},hasTrackChanged:function t(e){return!(!e||e===this.cache.trackId)},trackHasChanged:function e(o){n("Song has changed!",o),this.cache.trackId=o.id,o.artist&&this.setDFPCriteria("td-player-artist",o.artist),o.album&&this.setDFPCriteria("td-player-album",o.album),o.title&&this.setDFPCriteria("td-player-track",o.title),this.setDFPCriteria("td-player-id",o.id),t._CMLS.triggerEvent(t,"td-player.trackchange",o)},startTimer:function t(){var e=this;clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(function(){e.checkCurrentTrack(),e.startTimer()},this.interval)},init:function e(){return t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),this.initialized=!0,n("Initialized!",this.cache.trackId),this):(n("Player configuration not available, exiting."),!1)}},t._CMLS[i].init()):n("Triton player not enabled, exiting."))}(window),function(t,e){function n(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger(i+" v"+a,arguments)}function o(){function e(i){c&&t.removeEventListener("cms-sgroup",e),i.detail.indexOf("Format")>-1&&(n('cms-sgroup "Format" event fired!'),o())}if(!c)return n("Testing initial state."),t._CMLS.cGroups?(t._CMLS.cGroups.forEach(function(e){if(!c)return/Format\s+.*(Talk|Sports)/i.test(e)?(n("Station is Talk or Sports format, initializing timer."),t._CMLS[r]=new s,void(c=!0)):void 0}),c?void 0:(n("Station is not Talk or Sports, no timer set."),!1)):(n("cGroups not available, will wait for cms-sgroup event."),void t.addEventListener("cms-sgroup",e,!1))}var i="AUTO REFRESH ADS",r="autoRefreshAds",a="0.5.1";if(t.DISABLE_AUTO_REFRESH_ADS)return n("Auto Refresh Ads is disabled"),!1;t._CMLS.autoRefreshAdsTimer=t._CMLS.autoRefreshAdsTimer||4;var s=function(e){function o(){if(l.type===t._CMLS.const.PLAYER_TUNEGENIE){var e=t.top.document.querySelector("iframe#page_frame");if(e&&e.contentWindow)return n("Window context is page_frame"),e.contentWindow}return n("Window context is window"),t}function i(){return!t.top._CMLS.autoReload||!t.top._CMLS.autoReload.active||(n("AutoReloadPage is active, autoRefreshAds will be disabled."),!1)}function r(){if(!i())return n("Conditions have gone bad, killing timer."),void c.stop();var t=new Date;if(n("Checking timer",[t.toLocaleString(),p.toLocaleString()]),t.getTime()>=p.getTime())return void s();d=setTimeout(r,1e4)}function a(t){return!0===t?(n("TuneGenie Player is streaming."),c.start(),!0):(n("TuneGenie Player has stopped."),c.stop(),!1)}function s(){if(!i())return n("Conditions have gone bad before firing, killing timer."),c.stop(),!1;var t=o();n("Firing!",t._CMLS.adTag),t._CMLS.adTag.queue(function(){n("Refreshing page ads."),t._CMLS.adTag.refresh(),c.start()})}var c=this,l=t._CMLS.whichPlayer(),d=null,p=e||null,u=!1;this.checkState=function(){return u},this.stop=function(){n("Stopping timer."),clearTimeout(d),d=null,p=null,u=!1},this.start=function(t){if(c.stop(),!i())return n("Conditions are bad, timer will not start."),c;t&&t instanceof Date?(n("Start called with a fire time.",t),p=t):c.resetFireTime(),n("Starting timer, will fire at "+p.toLocaleString()),r(),u=!0},this.destroy=function(){c.stop()},this.getFireTime=function(){return p},this.resetFireTime=function(){p=new Date((new Date).getTime()+6e4*t._CMLS.autoRefreshAdsTimer)},l.type===t._CMLS.const.PLAYER_TUNEGENIE&&(t.top.tgmp&&t.top.TGMP_EVENTS?(t.top.tgmp.addEventListener(t.top.TGMP_EVENTS.streamplaying,a),n("Now listening for TuneGenie Player events.")):n("TuneGenie player not available!")),p&&p instanceof Date&&(n("Instantiated with a time to fire, using it!"),c.start(p))},c=!1;n("Initializing."),o()}(window.self),function($,t,e){function n(){t._CMLS.logger(i+" v"+a,arguments)}function o(){if(n("Checking for player...",c),t._CMLS[r].isPlayerActive())return void t._CMLS[r].init();c>20||(setTimeout(o,1e3),c++)}var i="NAV THROUGH PLAYER",r="navThroughPlayer",a="0.1",s=t._CMLS.whichPlayer();if(!t._CMLS[r]){t._CMLS[r]={isPlayerActive:function e(){return s=t._CMLS.whichPlayer(),!!s.type},updateIframeLinks:function e(o){if(t._CMLS[r].isPlayerActive){var i=o.jquery?o:$(o);if(o.getAttribute("src")&&(o.getAttribute("src").indexOf(t.location.hostname)<0||o.getAttribute("src").indexOf("/safeframe/")>0))return void n("Ad iframe is in a safeframe, cannot update.",o);try{i.contents().find('a[target="_self"],a[target="_top"],a[target="_parent"]').each(function(){n("Updating links in slot.",i.prop("id")),t._CMLS[r].updateLink(this)})}catch(t){n("Could not update links in given iframe",o,t)}}},updateLink:function e(n,o){if(t._CMLS[r].isPlayerActive&&n){var i=n.jquery?n:$(n),a=t.document.createElement("a");if(a.href=i.prop("href"),0===a.href.indexOf("/")||a.hostname!==t.location.hostname&&!o)return void(a=null);i.off("."+r).on("click."+r,t._CMLS[r].clickThrough),a=null}},clickThrough:function e(o){o&&t._CMLS[r].isPlayerActive()&&(o.preventDefault(),n("Intercepting click."),t._CMLS[r].navigate(o.currentTarget.href))},navigate:function e(o){s.type===t._CMLS.const.PLAYER_TRITON&&t.History&&(n("Navigating through Triton player.",o),t.History.pushState(null,null,o)),s.type===t._CMLS.const.PLAYER_TUNEGENIE&&t.top.tgmp&&(n("Navigating through TuneGenie player.",o),t.top.tgmp.updateLocation(o))},init:function e(){if(!t._CMLS[r].isPlayerActive())return void n("No player is active, exiting.");n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(e){if(e&&e.slot){var n=e.slot.getSlotElementId(),o=t.document.getElementById(n);t._CMLS[r].updateIframeLinks(o)}})}),$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each(function(){t._CMLS[r].updateIframeLinks(this)}),$(t).load(function(){$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each(function(){t._CMLS[r].updateIframeLinks(this)})}),n("Initialized.")}};var c=0;o()}}(jQuery,window),function($,t,e){function n(){t._CMLS.logger(r+" v"+s,arguments)}function o(o){function i(){var t,n=document.createElement("fakeelement"),o={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkittransitionend",msTransition:"mstransitionend"};for(t in o)if(n.style[t]!==e)return o[t]}function r(t){var e=0,n=t.length,o,i;if(0===n)return e;for(o=0;o<n;o++)i=t.charCodeAt(o),e=(e<<5)-e+i,e&=e;return e}function a(){return _.dfpSlot=$(o.dfpSlotNode),_.injectionNode=$(o.injectionNode),_.stickNode=$(o.stickNode),_.contentNode=$(o.contentNode),_.footerNode=$(o.footerNode),_.obstructiveNode=$(o.obstructiveNode),_.window=$(t),_.document=$(t.document),s(),_}function s(){return n("Refreshing stick position."),_.stickAt=_.stickNode.length?_.stickNode.offset().top:0,_.stickAt}function c(t){if(_.container&&_.container.length)return _.container;var e=$("#"+S+"Container");if(e.length)return _.container=e,_.container;if(!0===t)return!1;n("Generating new wallpaper container."),a();var o=$("<div />",{id:S+"Container",class:S+"-container"});return _.injectionNode.prepend(o),_.container=o,l(),_.container}function l(){var t=c(),e={content:_.contentNode.css(["position","zIndex"]),footer:_.footerNode.css(["position","zIndex"])};"static"===e.content.position&&(n("Setting content area position to relative."),_.contentNode.css("position","relative")),("auto"===e.content.zIndex||e.content.zIndex<=t.css("zIndex"))&&(n("Raising content area above wallpaper container."),_.contentNode.css("zIndex",t.css("zIndex")+1)),"static"===e.footer.position&&(n("Setting footer area position to relative."),_.footerNode.css("position","relative"),_.footerNode.css("zIndex",t.css("zIndex")+2)),_.contentNode.data("originalStyles",e.content),_.footerNode.data("originalStyles",e.footer),n("Content area has been raised.")}function d(){n("Displaying wallpaper."),c().off(w).addClass(S+"-open"),_.obstructiveNode.hide(),f()}function p(){function t(){r=!0,_.obstructiveNode.show(),n("Clearing all event listeners."),_.window.off("."+S),o&&o.length&&(n("Removing wallpaper container."),o.off("."+S).remove()),_.container=null,e.resolve()}var e=$.Deferred(),o=c(!0),i=!(!o||!o.length)&&o.hasClass(S+"-open"),r=!1;return n("RESET!"),o&&o.length?(o.off(w).removeData().removeProp("data").css("backgroundColor","rgba(0,0,0,0)").removeClass(S+"-open").removeClass(S+"-fixed"),n("Container is closing."),w&&i&&o.on(w,function(e){"opacity"===e.originalEvent.propertyName&&(n("Transition complete."),t())}),setTimeout(function(){r||t()},800)):t(),n("Returning our promise."),e.promise()}function u(){return c().hasClass(S+"-fixed")}function g(t){var e=c();u()&&!1===t&&(n("Unfixing wallpaper position."),e.removeClass(S+"-fixed").css("top","0")),u()||!0!==t||(n("Fixing wallpaper position."),s(),e.addClass(S+"-fixed").css("top",_.stickAt))}function f(){function t(){var t=_.window.scrollTop();return(_.injectionNode.length?_.injectionNode.offset().top:0)<t+_.stickAt}n("Initializing scroll tracking."),s(),g(t()?!0:!1),_.window.on("scroll."+S,C(function(){if(t())return void g(!0);g(!1)},50)),_.window.on("resize."+S,L(function(){s()},500)),n("Scroll tracking enabled.")}function m(){try{if($(o.contentNode).height()<200)return y===e&&(y=20),0===y?(n("Timed out waiting for content node."),void(y=e)):(y--,n("Content node is not ready, retrying.",y),void setTimeout(function(){m()},500));a(),n("Processing wallpaper slot.");var i=_.dfpSlot.find("iframe"),s=i.contents().find("#google_image_div,body").first(),l=s.find("a:first"),u=s.find("img.img_ad:first,img:first").first(),g=u.prop("alt");if(n("Checking image."),!u.length)return n("No image found in ad slot! Resetting."),void p();var f=c(),h=r((l.length?l.prop("href")+l.prop("target"):"")+u.prop("src"));if(n("Generated hash.",h),h===f.data("hash"))return void n("Requested wallpaper is already set.");n("Getting background color.",g);var v="rgba(255,255,255,0)",C=g.match(/(\#[A-Za-z0-9]+)/)||!1;C&&C.length>1&&(v=C[1]),n("Using background color.",v),p().then(function(){n("Building the new wallpaper.");var e="";l.length&&(e=$("<a />",{href:l.prop("href"),target:l.prop("target")}),t._CMLS.navThroughPlayer&&t._CMLS.navThroughPlayer.updateLink(e[0]));var o=$("<iframe />",{name:S+"Iframe",scrolling:"no",marginWidth:"0",marginHeight:"0",frameborder:"0"});n("Injecting iframe into container."),f=c(),f.data("hash",h).css("backgroundColor",v).append(o);var i='<style>html,body{background:transparent;margin:0;padding:0;width:100%;height:100%;}body{background:url("'+u.prop("src")+'") no-repeat top center;}'+(u.prop("alt").indexOf("contain")>-1?"body{background-size:100%}":"")+"a{display:block;width:100%;height:100%;text-decoration:none;}</style>";o.load(function(){n("Injecting wallpaper into iframe."),o.contents().find("body").append(i,e)}).prop("src","about:blank"),u.length?(n("Initializing preloader."),$("<img />").bind("load",function(){d(),$(this).remove()}).prop("src",u.prop("src"))):d()})}catch(t){console.log("WTF PEOPLE",t)}}function h(t){if(t.slot.getTargeting("pos").indexOf("wallpaper-ad")>-1)return n("Caught render event for wallpaper-ad",t.slot.getSlotElementId()),t.isEmpty?(n("Slot was empty, resetting wallpaper container."),p()):(n("Slot contained an ad, processing wallpaper."),m()),!1}function v(){$(t).off("."+S)}var _={},y,S=o.nameSpace||"wallpaperInjector",C=t._CMLS.throttle,L=t._CMLS.debounce,w=i();this.reset=p,this.process=m,this.unbindAllListeners=v,n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(t){L(h(t),1e3)})});var M='<style id="'+S+'Styles">.'+S+"-container {display: block !important;position: absolute;z-index: 0;top: 0;left: 0;height: 0 !important;width: 100% !important;overflow: hidden;text-align: center;transition: opacity 0.5s, height 0.6s, background-color 0.4s;opacity: 0;}."+S+"-container iframe {border: 0;height: 100%;width: 100%;}."+S+"-container ~ .grid-container {transition: box-shadow 0.6s}."+S+"-open {height: 100% !important;opacity: 1;}."+S+"-open ~ .grid-container {box-shadow: 0 0 20px rgba(0,0,0,0.3);}."+S+"-fixed {position: fixed;}"+o.dfpSlotNode+" {display: none !important;}</style>";t.document.getElementById(S+"Styles")||$("head").append(M),"complete"===t.document.readyState||"loaded"===t.document.readyState?m():$(function(){m()})}var i={dfpSlotNode:"#div-gpt-ad-1418849849333-16",injectionNode:".wrapper-content",stickNode:".wrapper-header",contentNode:".wrapper-content .grid-container:first",footerNode:".wrapper-footer",obstructiveNode:".takeover-left, .takeover-right, .skyscraper-left, .skyscraper-right"},r="WALLPAPER INJECTOR",a="wallpaperInjector",s="0.5";t._CMLS[a],i.nameSpace=a,t._CMLS[a]=new o(i)}(jQuery,window),function($,t,e){function n(){s.logger(i+" v"+a,arguments)}function o(){var e=t.top.googletag||{};e.cmd=e.cmd||[],e.cmd.push(function(){$(function(){if($("#CMLSPlayerSponsorship").length)return void n("Container already exists, exiting.");n("Discovering local site ad path.");var t=null;try{var o=e.pubads(),i=Object.getOwnPropertyNames(o);for(var r in i){var a=o[i[r]];if(a.constructor&&a.constructor===Array)for(var c in a[0])if(a[0][c]&&a[0][c].constructor===String&&a[0][c].indexOf("/6717/")>-1){t=a[0][c];break}if(t)break}if(null===t)throw{message:"Could not retrieve ad unit path."}}catch(t){return void n("Failed to retrieve DFP properties.",t)}n("Ad path found, defining new slot.",t);var l=e.defineSlot(t,[[120,60]],"CMLSPlayerSponsorship");l&&l.addService(e.pubads()).setCollapseEmptyDiv(!0).setTargeting("pos","playersponsorlogo"),$("body").append('<style id="CMLSPlayerSponsorshipStyle">#CMLSPlayerSponsorship {position: fixed;z-index: 2147483647;width: 120px;height: 60px;}#CMLSPlayerSponsorship.cmls-player-tg {left: 50%;transform: translate(+300px, 0);}#CMLSPlayerSponsorship.cmls-player-triton {left: 50%;transform: translate(30px, 0);}#CMLSPlayerSponsorship.cmls-player-pos-bottom {bottom: 4px;}#CMLSPlayerSponsorship.cmls-player-pos-top {top: 4px;}#CMLSPlayerSponsorship.cmls-player-triton.cmls-player-pos-top {top: 5px;}@media (max-width: 75rem) {#CMLSPlayerSponsorship.cmls-player-tg {left: 50%;}}@media (max-width: 1042px) {#CMLSPlayerSponsorship.cmls-player-tg {display: none}}@media (max-width: 800px) {#CMLSPlayerSponsorship.cmls-player-triton {display: none}}</style>');var d=$('<div id="CMLSPlayerSponsorship"><script>googletag.cmd.push(function() { googletag.display("CMLSPlayerSponsorship")});</script></div>'),p=s.whichPlayer();p.position===s.const.PLAYER_POSITION_TOP&&d.addClass("cmls-player-pos-top"),p.position===s.const.PLAYER_POSITION_BOTTOM&&d.addClass("cmls-player-pos-bottom"),p.type===s.const.PLAYER_TRITON&&d.addClass("cmls-player-triton"),p.type===s.const.PLAYER_TUNEGENIE&&d.addClass("cmls-player-tg"),$("body").append(d),n("Slot initialized.")})})}var i="PLAYER SPONSOR INJECTOR",r="playerSponsorInjector",a="0.1",s=t._CMLS;if(t.self!==t.top)return void $(function(){t.parent._CMLSPlayerSponsorshipInit=t.parent._CMLSPlayerSponsorshipInit||[],t.parent._CMLSPlayerSponsorshipInit.push(1)});var c=function(){};c.prototype=[],c.prototype.push=function(){o()},t.self._CMLSPlayerSponsorshipInit=new c,$(o()),s[r]=a}(window.top.jQuery,window),function($,t,e){function n(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(o+" v"+i,arguments)}var o="ZERGNET INJECTOR",i="0.2";if(t.top.NO_ZERGNET||t.parent.NO_ZERGNET||t.NO_ZERGNET)return n("Opted out with window.NO_ZERGNET, ejecting."),!1;var r=t.document;if(r.body.className.indexOf(" single ")<0||r.body.className.indexOf("layout-using-template-1")>-1)return n("Not a single post layout"),!1;var a=r.querySelector(".wrapper-content > .grid-container > .row-1 > .column-1 > .block-type-content > .block-content > .loop > article.post.format-standard,.wrapper-content > .grid-container > .row-1 > .column-1 > .block-type-content > .block-content > .loop > article.feed_post,.wrapper-content > .grid-container > .row-1 > .column-1 > .block-type-content > .block-content > .loop > article.feed_posts");if(!a)return n("Could not discover main page article."),!1;if(a.getBoundingClientRect().width>800)return n("Found main page article, but it's suspiciously wide so we think it is not a normal post."),!1;var s=r.querySelector(".wrapper-content > .grid-container > .row-1 > .column-1");if(!s)return n("Could not determine column."),!1;n("Injecting Zergnet");var c=r.createElement("div");c.id="zergnet-widget-61785",s.appendChild(c);var l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src=("https:"===document.location.protocol.toLowerCase()?"https:":"http:")+"//www.zergnet.com/zerg.js?id=61785";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(l,d)}(jQuery,window.self),function($,t,e){function n(){
t._CMLS.logger(i+" v"+a,arguments)}function o(t){try{n("Event fired: "+t),sharedContainerDataLayer.push({event:t}),corpDataLayer.push({event:t})}catch(t){}}var i="GTM STREAM TRACKING",r="GTMStreamTracker",a="0.3";t.top.tgmp&&!t._CMLS[r]&&(t._CMLS[r]=!0,t.top.tgmp.addEventListener(t.top.TGMP_EVENTS.streamplaying,function(t){!0===t?(n("Stream started."),o("siteplayer-stream-playing")):!1===t&&(n("Stream stopped."),o("siteplayer-stream-stopped"))}),t.addEventListener("td-player.playing",function(){o("siteplayer-stream-playing")}),t.addEventListener("td-player.stopped",function(){o("siteplayer-stream-stopped")}),n("Initialized."))}(jQuery,window),function($,t,e){function n(){window._CMLS.logger(i+" v"+r,arguments)}function o(t,e){try{n("Event fired: "+t,e),sharedContainerDataLayer.push({event:t,promoReelClickURL:e}),corpDataLayer.push({event:t,promoReelClickURL:e})}catch(t){}}var i="GTM PROMO REEL TRACKING",r="0.1";window._CMLS.GTMPromoReelTracker=!0,$(function(){$(".home .sliderItem").click(function(){var t=$(this),e=t.attr("data-href");(!e||e.length<1)&&(e=t.attr("onclick").replace(/window\.open=\(\'([^\']+).*/,"$1").replace(/window\.location=\'([^\']+).*/,"$1")),o("promoreel-click",e)})})}(jQuery,window.self),function(t,e){function n(){t._CMLS&&t._CMLS.logger&&t._CMLS.logger(i+" v"+r,arguments)}function o(){function e(){return c.type===t._CMLS.const.PLAYER_TUNEGENIE&&t.page_frame?t.page_frame.document.querySelector(r.condition):t.document.querySelector(r.condition)}function o(t){return new Date(Date.now()+t)}var i={condition:"body.home",timeout:8},r=i,a,s,c=t._CMLS.whichPlayer(),l=this;this.start=function(c){if(n("Starting timer.",c),l.stop(),r={condition:c.condition||i.condition,timeout:c.timeout||i.timeout},!e())return void n("Condition check failed at start.");s=o(6e4*r.timeout),n("Starting countdown, reloading at "+s),t._CMLS.autoReload&&(t._CMLS.autoReload.active=!0),a=setInterval(l.tick,1e4)},this.stop=function(){a&&(n("Stopping timer."),clearInterval(a),a=null,t._CMLS.autoReload&&(t._CMLS.autoReload.active=!1))},this.tick=function(){Date.now()>s.getTime()&&l.fire()},this.fire=function(){return l.stop(),e()?(n("Reloading page."),c.type===t._CMLS.const.PLAYER_TRITON&&t.History&&t.History.Adapter?void t.History.Adapter.trigger(t,"statechange"):c.type===t._CMLS.const.PLAYER_TUNEGENIE?void t.tgmp.updateLocation(t.location.href):void t.location.reload()):void n("Condition check failed before firing, timer stopped.")},this.push=function(t){n("Received request.",t),l.start(t)}}var i="AUTO-RELOAD PAGE",r="0.9",a;t._CMLS&&(t._CMLS.autoReload&&t._CMLS.autoReload.constructor===Array&&t._CMLS.autoReload.length&&(n("Loaded with request.",t._CMLS.autoReload),a=t._CMLS.autoReload[t._CMLS.autoReload.length-1]),t._CMLS.autoReload&&t._CMLS.autoReload.constructor!==Array||(t._CMLS.autoReload=new o)),n("Initialized."),a&&t._CMLS.autoReload.push(a)}(window.top),function($,t,e){function n(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(o+" v"+r,arguments)}var o="ADDTHIS INJECTOR",i="addThisInjector",r="0.6.17",a="ra-55dc79597bae383e";if(t.self.addthis&&t.self.addthis_config&&t.self.addthis_config.pubid&&t.self.addthis_config.pubid!==a)return void n("AddThis already loaded by local page.");if(t.self!==t.top?(n("Not top window."),t.top.addthisDestroyer&&t.top.addthisDestroyer(),$(t).unload(function(){n("Removing AddThis layers."),$(".addthis-smartlayers").remove()})):(n("Loaded in top window."),t.top.addthisDestroyer=function(){if(n("Removing addthis from top window."),$('script[src*="addthis"]').remove(),t.top.addthisLayerReference){n("Instructing addthis to destroy itself.");try{t.top.addthisLayerReference.destroy()}catch(t){}delete t.top.addthisLayerReference,$(".addthis-smartlayers").remove()}else n("No addthis object in top window.")}),t.self.NO_ADDTHIS_HERE)return void n("NO_ADDTHIS_HERE found, will not build.");if(t.top._CMLS&&t.top._CMLS.hasOwnProperty("isHomepage")&&t.top._CMLS.isHomepage(t.self))return void n("Will not build on homepage, exiting.");t.self.addthis_config=t.self.addthis_config||{},t.self.addthis_config.pubid=a,n("Building addthis script.");var s=t.self.document.createElement("script");s.onload=function(){},s.src="//s7.addthis.com/js/300/addthis_widget.js#async=1",s.id=i+"-script",s.async=!0,t.self.document.head.appendChild(s),n("Injected.")}(jQuery,window),function($,t,e){function n(){a.logger(o+" v"+r,arguments)}var o="BREAKING NEWS BAR",i="BreakingNews",r="0.7",a=t._CMLS||{};Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),a[i]=function(e,o){n("Called",typeof e,e,o);var i={classPrefix:"cmlsBreakingNews",additionalClass:"",position:"above",link:"",target:"_top",beforeText:"Breaking News:",text:"",background:"#900",color:"#fff"},r,s=".wrapper-header";if($(s).length){if("object"!=typeof e||Array.isArray(e))if("object"==typeof e&&Array.isArray(e)&&e.length)r=i,r.text=e[0],e.length>1&&(o=e[1]),n("Basic mode!");else{if("object"==typeof e)return void n("Invalid usage!",e,o);r=i,r.text=e,n("Basic mode!")}else r=$.extend({},i,e),n("Advanced mode!");!r.link&&o&&(r.link=o),n("Settings:",r);var c="."+r.classPrefix+"-container { display: block; box-sizing: border-box; position: relative; float: none; overflow: hidden; z-index: 10; padding: 1em; color: #fff; background: #900; box-shadow: 0 0 10px rgba(0,0,0,0.4); font-size: 14px; line-height: 1.2; text-decoration: none; outline: 0 }."+r.classPrefix+"-container > a { display: block; color: inherit !important; cursor: pointer; padding: 1em; margin: -1em; }."+r.classPrefix+"-container > a:hover ."+r.classPrefix+"-before { text-decoration: underline; }."+r.classPrefix+"-inner { box-sizing: border-box; max-width: 1020px; margin: 0 auto; }."+r.classPrefix+"-before { float: left; font-weight: bold; margin-right: .5em; }."+r.classPrefix+"-text { overflow: hidden; }."+r.classPrefix+"-inner a { text-decoration: underline !important; color: inherit; }@media (max-width: 500px) {."+r.classPrefix+"-before { float: none; margin-bottom: .25em; }}",l='<div class="'+r.classPrefix+'-container"><div class="'+r.classPrefix+'-inner">{{BEFORE}}<div class="'+r.classPrefix+'-text">{{TEXT}}</div></div></div>';if(r.beforeText&&r.beforeText.length){var d='<div class="'+r.classPrefix+'-before">'+r.beforeText+"</div>";l=l.replace("{{BEFORE}}",d)}if(l=$(l.replace("{{TEXT}}",r.text)),r.link&&r.link.length){var p=$("<a></a>").prop({href:r.link,target:r.target});l.wrapInner(p)}l.css({background:r.background,color:r.color}),l.addClass(r.additionalClass).prop("id","CMLSBreakingNews-"+Math.floor(1e7*Math.random())),$("#cmlsBreakingNewsStyles").length||$("head").append('<style id="cmlsBreakingNewsStyles">/* CMLS Breaking News Bar styles */\n'+c+"</style>"),"below"===r.position?($(s).after(l),$("#cmlsBreakingNewsStyles").append(".takeover-left,.takeover-right,.skyscraper-left,.skyscraper-right { margin-bottom: -"+l.outerHeight()+"px; }")):$(s).before(l),a.navThroughPlayer&&(n("Applying navThroughPlayer to bar links."),l.find('a:not([href]),a[target="_self"],a[target="_top"],a[target="_parent"]').each(function(){n("Applying navThroughPlayer to a link.",this.href),a.navThroughPlayer.updateLink($(this))})),"above"===r.position&&(t.DO_NOT_AUTO_SCROLL=!0)}};var s=function(){};s.prototype=[],s.prototype.push=function(){n("Received after-load request.",arguments),a[i].apply(null,arguments)},t["_CMLS"+i]&&t["_CMLS"+i].length&&t["_CMLS"+i].forEach(a[i]),t["_CMLS"+i]=new s}(jQuery,window),function($,t,e){function n(){t._CMLS.logger(o+" v"+i,arguments)}var o="SOCIAL LISTEN LIVE LINK",i="0.1";t._CMLS=t._CMLS||{},n("Starting..."),$(function(){if(!t.top.tgmp)return void n("TuneGenie player not enabled.");n("Storing TGMP default configuration."),t.top.tgmp_default_brand=t.top.tgmp_default_brand||""+t.top.tgmp.options.brand,t.top.tgmp_default_theme=t.top_tgmp_default_theme||t.top.tgmp.options.theme,n("Locating Listen Live button.");var e=$('.social-icons img[title="Listen Live!!"],.social-icons-container img[title="Listen Live!!"],.nav-listenlive img');if(!e.length)return void n("Could not locate Listen Live button in social icons.");e.parent().is("a")&&(e=e.parent()),e.click(function(e){if(e.preventDefault(),n("Playing stream..."),t.top.tgmp_default_brand&&t.top.tgmp.options.brand!==t.top.tgmp_default_brand)return void t.top.tgmp.update({brand:t.top.tgmp_default_brand,theme:t.top.tgmp_default_theme,autostart:!0});t.top.tgmp.playStream()}),n("Social Listen Live button activated.")}),t._CMLS.socialListenLiveLink=i,n("Initialized.")}(jQuery,window),function($,t,e){function n(){if(t.top._CMLS&&t.top._CMLS.logger)return t.top._CMLS.logger(r+" v"+s,arguments)}function o(){var e=t.document.body.className.match(/postid\-(\d+)/);return!!(e&&e.length>1&&parseInt(e[1],10))&&e[1]}function i(){function e(t,e){return t?(e||(e="inform-pp-top"),a.replace("{POS_ID}",e).replace("{DPID}",t)):(n("getTemplate called without DPID"),!1)}function i(t){if(n("Inject called",t),!t)return n("Inject called without DPID."),!1;var i=o();if(!1===i)return n("Could not retrieve post ID while injecting",t),!1;n("Post ID retrieved",i);var r=$("article#post-"+i+" .entry-content > p:not(:has(img)):not(.read-more-full-link),article#post-"+i+" .entry-content > *:not(.themify_builder_content) p:not(:has(img)):not(.read-more-full-link)");if(r.length)return n("Found "+r.length+" p tags."),r.length>4?(n("Injectng top embed after 5th p tag"),r.eq(4).after(e(t,"inform-pp-top"))):r.length>1?(n("Injecting top embed after 1st p tag."),r.first().after(e(t,"inform-pp-top"))):n("Not enough p tags to inject top embed."),r.length>8?(n("Injecting bottom embed after last p tag."),r.last().before(e(t,"inform-pp-bottom"))):n("Not enough p tags to inject bottom embed."),!0;n("No valid p tags found in post.")}function r(t){try{if(!t||!t.id)throw{message:"Invalid request, no ID",data:t};n("Received request to inject Inform embed with ID "+t.id),i(t.id)}catch(t){n("Failed",t)}}var a='<div class="ndn_embed" id="{POS_ID}" data-config-distributor-id="{DPID}" data-config-width="100%" data-config-aspect-ratio="16:9"></div><script type="text/javascript">var _informq = _informq || []; _informq.push(["embed"]);</script>';if(this.process=r,t._informinjector&&t._informinjector.length){n("Found existing requests, processing.",t._informinjector);for(var s=0;s<t._informinjector.length;s++)r(t._informinjector[s])}n("Initializing InformInjector array handler.");var c=function(){};c.prototype=[],c.prototype.push=function(){for(var t=0;t<arguments.length;t++)arguments[t].id&&$(r(arguments[t]))},t._informinjector=new c,n("Listening for future requests.")}var r="INFORM INJECTOR",a="informInjector",s="0.2";if(t.document.body.className.indexOf("single-feed_posts")<0&&t.document.body.className.indexOf("single-post")<0)return n("Not a post, ejecting."),!1;$("script#informbase").remove(),$('<script type="text/javascript" id="informbase" src="//launch.newsinc.com/js/embed.js"></script>').appendTo("head"),t._CMLS=t._CMLS||{},t._CMLS[a]=new i,n("Initialized.")}(jQuery,window.self),function($,t,e){function n(){t._CMLS&&t._CMLS.logger&&t._CMLS.logger(o+" v"+i,arguments)}t._CMLS=t._CMLS||{};var o="SWITCHSTREAM LINKS",i="0.4";t._CMLS.switchTGMPStream=function(e,o,i){var r=t.tgmp||t.top.tgmp||null,a={brand:e,autostart:!1};o&&(a.autostart=!0),i&&/\d+/.test(i)&&(a.theme=["#"+i]),r&&(n("Switching stream",a),r.update(a))},n("Initializing switchstream links on page."),$(function(){$('.tgmp-switchstream,img[alt*="tgmp-switchstream"],a[alt*="tgmp-switchstream"]').off("click.cmls-tg-switchstream").on("click.cmls-tg-switchstream",function(e){function o(t){return n("Requested vars",t),{streamid:t.match(/tgmp\-streamid\-(\w+)/i),theme:t.indexOf("tgmp-theme")>-1?t.match(/tgmp\-theme\-(\d+)/i)[1]:null,autostart:t.indexOf("tgmp-autostart")>-1}}n("Intercepted click",this);var i=this.className,r=this.getAttribute("alt"),a={streamid:null,theme:null,autostart:!1};if(i&&i.indexOf("tgmp-switchstream")>-1&&(n("Using element classes",i),a=o(i)),r&&r.indexOf("tgmp-switchstream")>-1&&(n("Using element alt attribute",r),a=o(r)),n("Got switchstream link",this,a),a.streamid&&a.streamid.length<2)return n("No stream ID provided, exiting.",a.streamid,a.streamid.length),!1;a.streamid=a.streamid[1],e.preventDefault(),t._CMLS.switchTGMPStream(a.streamid,a.autostart,a.theme)})})}(jQuery,window.self),function(t){function e(){t._CMLS.logger(n+" v"+i,arguments)}var n="GLOBALIZE SGROUPS",o="globalizeSGroups",i="0.5";t._CMLS[o]||(t._CMLS[o]={cycles:0,timer:null,globalize:function n(){function i(n){e("Firing event",n),t.sharedContainerDataLayer.push({event:n}),t.corpDataLayer.push({event:n}),t._CMLS.triggerEvent(t,"cms-sgroup",n)}var r;try{if(!t.googletag||!t.googletag.pubads())throw{message:"Googletag not yet ready."};var a=t.googletag.pubads();for(var s in a)if(a[s].hasOwnProperty("cms-sgroup")){r=a[s]["cms-sgroup"];break}}catch(n){return t._CMLS[o].cycles>10?void e("TERMINATING. Could not retrieve cms-sgroup in a reasonable time, aborting."):(e("Googletag not ready, waiting to retry..."),t._CMLS[o].timer&&(clearTimeout(t._CMLS[o].timer),t._CMLS[o].timer=null),t._CMLS[o].timer=setTimeout(t._CMLS[o].globalize,500),void t._CMLS[o].cycles++)}e("Globalizing cms-sgroup"),t._CMLS.cGroups=t._CMLS.cGroups||[],t._CMLS.cGroups=r;var c=["cms-sgroup"].concat(t._CMLS.cGroups);t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[],e("Firing events");for(var l=!1,d=0,p=c.length;d<p;d++)i(c[d]),c[d].indexOf("Westwood One")>-1&&(l=!0);i(!0===l?"Westwood One Property":"Cumulus Owned and Operated")}},t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){e("Googletag command queue initiated."),t._CMLS[o].globalize()}))}(window,void 0);
//# sourceMappingURL=./compiled-allsites-min.js.map