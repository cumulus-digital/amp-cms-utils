!function(e,t){e.self!==e.top?e._CMLS={}:e._CMLS=e._CMLS||{},e._CMLS.LOADED||(e._CMLS.const=e._CMLS.const||{},e._CMLS.const.PLAYER_TUNEGENIE=8471,e._CMLS.const.PLAYER_TRITON=8468,e._CMLS.const.PLAYER_POSITION_TOP=80847980,e._CMLS.const.PLAYER_POSITION_BOTTOM=80667984,e._CMLS.logger=function cmlsLogger(t,o){if(!e._CMLS||!e._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;e._CMLS.loggerNamesToColors=e._CMLS.loggerNamesToColors||{};var i,n,a=t,r=[].slice.call(o);e._CMLS.loggerNamesToColors[a]?(i=e._CMLS.loggerNamesToColors[a].background,n=e._CMLS.loggerNamesToColors[a].complement):(i=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),n=parseInt(i,16)>=12303291?"000000":"FFFFFF",e._CMLS.loggerNamesToColors[a]={background:i,complement:n});var s=new Date;s=s.toISOString()?s.toISOString():s.toUTCString();var l=["%c["+a+"]","background: #"+i+"; color: #"+n];r=l.concat(r),e.top.console.groupCollapsed.apply(e.top.console,r),e.top.console.log("TIMESTAMP:",s),e.top.console.trace(),e.top.console.groupEnd()},e._CMLS.now=Date.now||function(){return(new Date).getTime()},e._CMLS.throttle=function(t,o,i){var n,a,r,s=null,l=0;i||(i={});var later=function(){l=!1===i.leading?0:e._CMLS.now(),s=null,r=t.apply(n,a),s||(n=a=null)};return function(){var d=e._CMLS.now();l||!1!==i.leading||(l=d);var c=o-(d-l);return n=this,a=arguments,c<=0||c>o?(s&&(clearTimeout(s),s=null),l=d,r=t.apply(n,a),s||(n=a=null)):s||!1===i.trailing||(s=setTimeout(later,c)),r}},e._CMLS.debounce=function(t,o,i){var n,a,r,s,l,later=function(){var d=e._CMLS.now()-s;d<o&&d>=0?n=setTimeout(later,o-d):(n=null,i||(l=t.apply(r,a),n||(r=a=null)))},debounced=function(){r=this,a=arguments,s=e._CMLS.now();var d=i&&!n;return n||(n=setTimeout(later,o)),d&&(l=t.apply(r,a),r=a=null),l};return debounced.clear=function(){clearTimeout(n),n=r=a=null},debounced},e._CMLS.whichPlayer=function(){if(e._CMLS.whichPlayerCache&&e._CMLS.whichPlayerCache.type)return e._CMLS.whichPlayerCache;var t={type:null,position:null};return e.top.tgmp?(e._CMLS.logger("COMMON",["Found TuneGenie player."]),t.type=e._CMLS.const.PLAYER_TUNEGENIE,e.top.tgmp.options&&e.top.tgmp.options.position&&"top"===e.top.tgmp.options.position.toLowerCase()?(e._CMLS.logger("COMMON",["TuneGenie player is on the top."]),t.position=e._CMLS.const.PLAYER_POSITION_TOP):(e._CMLS.logger("COMMON",["TuneGenie player is on the bottom."]),t.position=e._CMLS.const.PLAYER_POSITION_BOTTOM)):e.top.TDPW&&(e._CMLS.logger("COMMON",["Found Triton player, assuming it's on top."]),t.type=e._CMLS.const.PLAYER_TRITON,t.position=e._CMLS.const.PLAYER_POSITION_TOP),e._CMLS.whichPlayerCache=t,e._CMLS.whichPlayerCache},e._CMLS.isHomepage=function(t){return t||(t=e),"/"===t.location.pathname&&!1===/[\?&]?p=/i.test(t.location.search)},e._CMLS.triggerEvent=function(t,o,i){var n;e.document.createEvent?(n=e.document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,i):n=new CustomEvent(o,{detail:i}),t.dispatchEvent(n)},e._CMLS.logger("COMMON",["LIBRARY LOADED!\n                           .__                \n  ____  __ __  _____  __ __|  |  __ __  ______\n_/ ___\\|  |  \\/     \\|  |  \\  | |  |  \\/  ___/\n\\  \\___|  |  /  Y Y  \\  |  /  |_|  |  /___ \\ \n \\___  >____/|__|_|  /____/|____/____//____  >\n     \\/            \\/                      \\/ \n"]),e._CMLS.LOADED=!0)}(window),function(e,t,o){function log(){e.top._CMLS&&e.top._CMLS.hasOwnProperty("logger")&&e.top._CMLS.logger(i+" v"+a,arguments)}function loopDetection(){r=setTimeout(e._CMLS[n].detectTag,50),s++}var i="ADTAG DETECTION",n="adTagDetection",a="0.1.1";e._CMLS=e._CMLS||{},e._CMLS[n]=e._CMLS[n]||{},e._CMLS[n].registeredDetectors=e._CMLS[n].registeredDetectors||[];var StubInterface=function(){var e="STUB INTERFACE",t="InterfaceSTUB",o="adTagDetection",i="x",n=this;return this.identity="STUB",this.detectTag=function(){},this.rawInterface=function(){},this.queue=function(e){n.rawInterface().cmd.push(e)},this.pubads=function(){return n.rawInterface().pubads()},this.refresh=function(e){return log("Refresh called",e),n.pubads().refresh(e)},this.addListener=function(e,t){},this.removeListener=function(e,t){},this.setTargeting=function(e,t){},this.defineSlot=function(e,t,o,i){},this.display=function(e){n.queue((function(){n.rawInterface().display(e)}))},this},r,s;e._CMLS[n].stubInterface=StubInterface,e._CMLS.adTag=new e._CMLS[n].stubInterface,e._CMLS[n].detectTag=function detectTag(){if(e._CMLS[n].registeredDetectors&&(log("Running registered detectors.",e._CMLS[n].registeredDetectors),e._CMLS[n].registeredDetectors.forEach((function(t){if(!t.identity)return log("Invalid interface in detector: "+t.identity),!1;log("Checking registered detector: "+t.identity),t.detectTag&&t.detectTag()&&(log("Interface found in detector: "+t.identity),e._CMLS.adTag=t)}))),!e._CMLS.adTag||!e._CMLS.adTag.rawInterface())return log("No interface found, rerunning detection."),void loopDetection()}}(window.self,jQuery),function(e,t,o){function log(){e.top._CMLS&&e.top._CMLS.hasOwnProperty("logger")&&e.top._CMLS.logger("DFP INTERFACE v0.1.2",arguments)}var i="DFP INTERFACE",n="adTagDetection",a="0.1.2";e._CMLS=e._CMLS||{},e._CMLS.adTagDetection=e._CMLS.adTagDetection||{},e._CMLS.adTagDetection.registeredDetectors=e._CMLS.adTagDetection.registeredDetectors||[];var r=new e._CMLS.adTagDetection.stubInterface;r.identity="dfp",r.detectTag=function(){if(e.googletag)return log("Googletag detected."),!0},r.rawInterface=function(){return e.googletag},r.addListener=function(e,t){r.queue((function(){r.pubads().addEventListener(e,t)}))},r.removeListener=function(e,t){return r.pubads().removeEventListener(e,t)},r.setTargeting=function(e,t){return r.pubads().setTargeting(e,t)},r.defineSlot=function(e,t,o,i){var n=r.rawInterface().defineSlot.apply(null,e);if(!n)return!1;if(t&&(n=n.setCollapseEmptyDiv(!0)),Array.isArray(o))o.forEach((function(e){for(var t in e)e.hasOwnProperty(t)&&(n=n.setTargeting(t,e[t]))}));else if("object"==typeof o)for(var a in o)o.hasOwnProperty(a)&&(n=n.setTargeting(a,o[a]));return i&&(n=n.addService(r.pubads())),n},e._CMLS.adTagDetection.registeredDetectors.push(r)}(window.self,jQuery),window._CMLS.adTagDetection.detectTag(),function(e,t){function log(){e._CMLS.logger("PLAYER WATCH v0.5",arguments)}var o="PLAYER WATCH",i="playerWatch",n="0.5";!e._CMLS[i]&&(e.TDPW?(e._CMLS[i]={initialized:!1,cache:{},timer:null,interval:2500,const:{STOPPED:0,PLAYING:1},setDFPCriteria:function setDFPCriteria(t,o){e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],e.googletag.cmd.push((function(){log("Setting targeting",t,o),e.googletag.pubads().setTargeting(t,o)}))},checkCurrentTrack:function getCurrentTrack(){var t=!(!localStorage||!JSON)&&JSON.parse(localStorage.getItem("tdas.controller."+e.amp_player_config.station+"."+e.amp_player_config.stream_id+".events.current-state"));t&&t.data&&(t.data.stream&&"LIVE_PLAYING"===t.data.stream.code.toUpperCase()?this.setState(this.const.PLAYING):this.setState(this.const.STOPPED),t.data.song&&t.data.song.id&&this.hasTrackChanged(t.data.song.id)&&this.trackHasChanged(t.data.song))},setState:function setState(t){return t===this.const.PLAYING&&t!==this.cache.state?(log("Player is streaming."),this.cache.state=t,this.setDFPCriteria("td-player-state","PLAYING"),void e._CMLS.triggerEvent(e,"td-player.playing")):t===this.const.STOPPED&&t!==this.cache.state?(log("Player is stopped."),this.cache.state=t,this.setDFPCriteria("td-player-state","STOPPED"),void e._CMLS.triggerEvent(e,"td-player.stopped")):void 0},hasTrackChanged:function hasTrackChanged(e){return!(!e||e===this.cache.trackId)},trackHasChanged:function trackHasChanged(t){log("Song has changed!",t),this.cache.trackId=t.id,t.artist&&this.setDFPCriteria("td-player-artist",t.artist),t.album&&this.setDFPCriteria("td-player-album",t.album),t.title&&this.setDFPCriteria("td-player-track",t.title),this.setDFPCriteria("td-player-id",t.id),e._CMLS.triggerEvent(e,"td-player.trackchange",t)},startTimer:function startTimer(){var e=this;clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((function(){e.checkCurrentTrack(),e.startTimer()}),this.interval)},init:function init(){return e.amp_player_config&&e.amp_player_config.station&&e.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),this.initialized=!0,log("Initialized!",this.cache.trackId),this):(log("Player configuration not available, exiting."),!1)}},e._CMLS[i].init()):log("Triton player not enabled, exiting."))}(window),function(e,t){function log(){e.top._CMLS&&e.top._CMLS.hasOwnProperty("logger")&&e.top._CMLS.logger(o+" v"+n,arguments)}var o="AUTO REFRESH ADS",i="autoRefreshAds",n="0.6.1";if(e.location.search.indexOf("cmlsDisableAdRefresh")>-1)log("Disabling due to cmlsDisableAdRefresh query.");else{if(e.DISABLE_AUTO_REFRESH_ADS)return log("Auto Refresh Ads is disabled locally with window.DISABLE_AUTO_REFRESH_ADS"),!1;e._CMLS.autoRefreshAdsTimer=e._CMLS.autoRefreshAdsTimer||1;var AutoRefresher=function(t){function getWindow(){if(r.type===e._CMLS.const.PLAYER_TUNEGENIE){var t=e.top.document.querySelector('iframe#page_frame,iframe[name="pwm_pageFrame"]');if(t&&t.contentWindow)return log("Window context is TuneGenie frame"),t.contentWindow}return log("Window context is window"),e}function checkConditions(){return e.top._CMLS&&e.top._CMLS.autoReload&&e.top._CMLS.autoReload.active?(log("AutoReloadPage is active, autoRefreshAds will be disabled."),-1):"visible"!==i?(log("Tab is hidden, autoRefreshAds will skip this cycle."),0):1}function checkTimer(){var e=checkConditions();if(1===e){var t=new Date;if(log("Checking timer",[t.toLocaleString(),l.toLocaleString()]),t.getTime()>=l.getTime())return void fire()}-1!==e?s=setTimeout((function(){checkTimer()}),1e4):o.stop()}function isElVisible(t){if(!t)return!1;var o=!1;t.style&&t.style.display&&"none"===t.style.display&&(o=!0,t.setAttribute("style","display: block; width: 1px; height: 1px;"));var i=t.getBoundingClientRect();if(o&&(t.style.display="none"),i.width&&i.height&&i.width>0&&i.height>0){if(i.width=i.right-i.left,i.height=i.bottom-i.top,0===i.width||0===i.height)return!1;var n={top:i.top+.25*i.height,right:i.right-.25*i.width,bottom:i.bottom-.25*i.height,left:i.left+.25*i.width};return(n.bottom>=0||n.top<=(e.innerHeight||document.documentElement.clientHeight))&&(n.right>=0||n.left<=(e.innerWidth||document.documentElement.clientWidth))}return!1}function recordTabVisibility(t){t||(t=e.document[n]?"hidden":"visible"),i=t}function fire(){if(1===checkConditions()){var e=getWindow();return log("Firing!",e._CMLS.adTag),void e._CMLS.adTag.queue((function(){log("Refreshing viewable page ads."),o.resetFireTime();try{var t=e._CMLS.adTag.pubads().getSlots(),i=[];t.forEach((function(t){var o=e.document.getElementById(t.getSlotElementId());o&&isElVisible(o)&&i.push(t)}));var n=[];i.forEach((function(e){n.push("El: "+e.getSlotElementId(),"SlotId: "+e.getSlotId(),"Path: "+e.getAdUnitPath(),e.getSizes(),e)})),log("Viewable ads:",n),e._CMLS.adTag.refresh(i)}catch(e){log("Failed to refresh ads!",e)}o.start()}))}log("Conditions were not met before firing, skipping this cycle."),o.start()}var o=this,i="visible",n,a,r=e._CMLS.whichPlayer(),s=null,l=t||null,d=!1;void 0!==e.document.hidden?(n="hidden",a="visibilitychange"):void 0!==e.document.mozHidden?(n="mozHidden",a="mozvisibilitychange"):void 0!==e.document.msHidden?(n="msHidden",a="msvisibilitychange"):void 0!==e.document.webkitHidden?(n="webkitHidden",a="webkitvisibilitychange"):void 0!==e.document.oHidden&&(n="oHidden",a="ovisibilitychange"),e.document.addEventListener(a,(function(){recordTabVisibility()}),!1),this.checkState=function(){return d},this.stop=function(){log("Stopping timer."),clearTimeout(s),s=null,l=null,d=!1},this.start=function(e){return o.stop(),1===checkConditions()&&(e&&e instanceof Date?(log("Start called with an init fire time.",e),l=e):o.resetFireTime(),log("Starting timer, will fire at "+l.toLocaleString()),checkTimer(),d=!0),o},this.destroy=function(){o.stop()},this.getFireTime=function(){return l},this.resetFireTime=function(){l=new Date((new Date).getTime()+6e4*e._CMLS.autoRefreshAdsTimer)},l&&l instanceof Date&&(log("Instantiated with a time to fire, using it!"),o.start(l))};try{e.parent._CMLS[i].destroy()}catch(e){}try{e._CMLS[i].destroy()}catch(e){}e._CMLS[i]=new AutoRefresher,e._CMLS[i].start()}}(window.self),function(e,t,o){function log(){t._CMLS.logger(i+" v"+a,arguments)}function checkForPlayer(){log("Checking for player...",s),t._CMLS[n].isPlayerActive()?t._CMLS[n].init():s>20||(setTimeout(checkForPlayer,1e3),s++)}var i="NAV THROUGH PLAYER",n="navThroughPlayer",a="0.2",r=t._CMLS.whichPlayer();if(!t._CMLS[n]){t._CMLS[n]={isPlayerActive:function isPlayerActive(){return!!(r=t._CMLS.whichPlayer()).type},updateIframeLinks:function updateIframeLinks(o){if(t._CMLS[n].isPlayerActive)if(o)if("iframe"===o.tagName.toLowerCase()){var i=o.jquery?o:e(o);if(o.getAttribute("src")&&(o.getAttribute("src").indexOf(t.location.hostname)<0||o.getAttribute("src").indexOf("/safeframe/")>0))log("Ad iframe is in a safeframe, cannot update.",o);else try{i.contents().find('a[target="_self"],a[target="_top"],a[target="_parent"]').each((function(){log("Updating links in slot.",i.prop("id"),i[0],this),t._CMLS[n].updateLink(this)}))}catch(e){log("Could not update links in given iframe",o,e)}}else log("Received an updateIframeLinks request for a non-iframe",o);else log("Did not receive an iframe node, cannot update",o)},updateLink:function updateLink(o,i){if(t._CMLS[n].isPlayerActive)if(o){var a=o.jquery?o:e(o),r=t.document.createElement("a");if(r.href=a.prop("href"),-1!==r.href.indexOf("doubleclick.net")&&-1!==r.href.indexOf("adurl=/")){var s;if(log("Found a DFP clickthrough with a relative adurl!",r.href),"URLSearchParams"in t){var l=new t.URL(r.href),d;s=new t.URLSearchParams(l.search).get("adurl")}else for(var c=r.search.split("&"),g=0,p=c.length;g<p;g++){var u=c[g];if(u.indexOf("adurl=")>-1){var f=u.split("=");if(f.length>1){s=f[1];break}}}s?(r.href=r.href.replace("adurl=/","adurl="+t.location.protocol+"//"+t.location.hostname+"/"),a.prop("href",r.href),log("Modified relative DFP clickthrough",s,r.href)):log("Could not parse query string in DFP clickthrough",s)}else{if(0!==r.href.indexOf("/")&&r.hostname!==t.location.hostname&&!i)return log("Off-site URL found, will not modify",r),void(r=null);0===r.href.indexOf("/")&&(log("Relative link found",r),r.setAttribute("target","_top"))}log("Setting ad link to navigate through player.",r),a.off("."+n).on("click."+n,t._CMLS[n].clickThrough),r=null}else log("updateLink: did not receive a valid link.");else log("updateLink: Player is not active.")},clickThrough:function clickThrough(e){e&&t._CMLS[n].isPlayerActive()&&(e.preventDefault(),log("Intercepting click."),t._CMLS[n].navigate(e.currentTarget.href))},navigate:function navigate(e){try{t.sharedContainerDataLayer&&t.sharedContainerDataLayer.push({event:"relative-ad-click",relativeAdURL:e}),t.corpDataLayer&&t.corpDataLayer.push({event:"relative-ad-click",relativeAdURL:e})}catch(e){console.log(e)}r.type===t._CMLS.const.PLAYER_TRITON&&t.History&&(log("Navigating through Triton player.",e),t.History.pushState(null,null,e)),r.type===t._CMLS.const.PLAYER_TUNEGENIE&&t.tgmp&&(log("Navigating through TuneGenie player.",e),t.tgmp.updateLocation(e))},init:function init(){t._CMLS[n].isPlayerActive()?(log("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push((function(){t.googletag.pubads().addEventListener("slotRenderEnded",(function(e){if(e&&e.slot){var o=e.slot.getSlotElementId(),i=t.document.getElementById(o);"iframe"!==i.tagName.toLowerCase()&&(i=i.querySelector('iframe[id*="google_ads_iframe"]')),log("Caught render event",o,i,e),t._CMLS[n].updateIframeLinks(i)}else log("Caught render event but it was invalid.",e)}))})),e('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each((function(){log("Addressing existing google ad frame",this),t._CMLS[n].updateIframeLinks(this)})),e(t).load((function(){e('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each((function(){log("Addressing existing google ad frame",this),t._CMLS[n].updateIframeLinks(this)}))})),log("Initialized.")):log("No player is active, exiting.")}};var s=0;checkForPlayer()}}(jQuery,window),function(e,t,o){function log(){t._CMLS.logger(n+" v"+r,arguments)}function WallpaperInjector(i){function determineTransitionEvent(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkittransitionend",msTransition:"mstransitionend"};for(e in i)if(t.style[e]!==o)return i[e]}function checksum(e){var t=0,o=e.length,i,n;if(0===o)return t;for(i=0;i<o;i++)t=(t<<5)-t+(n=e.charCodeAt(i)),t&=t;return t}function refreshCache(){return n.dfpSlot=e(i.dfpSlotNode),n.injectionNode=e(i.injectionNode),n.stickNode=e(i.stickNode),n.contentNode=e(i.contentNode),n.footerNode=e(i.footerNode),n.obstructiveNode=e(i.obstructiveNode),n.window=e(t),n.document=e(t.document),refreshStickAtPosition(),n}function refreshStickAtPosition(){return log("Refreshing stick position."),n.stickAt=n.stickNode.length?n.stickNode.offset().top:0,n.stickAt}function getContainer(t){if(n.container&&n.container.length)return n.container;var o=e("#"+r+"Container");if(o.length)return n.container=o,n.container;if(!0===t)return!1;log("Generating new wallpaper container."),refreshCache();var i=e("<div />",{id:r+"Container",class:r+"-container"});return n.injectionNode.prepend(i),n.container=i,raiseContentArea(),n.container}function raiseContentArea(){var e=getContainer(),t={injection:n.injectionNode.css(["position","zIndex"]),content:n.contentNode.css(["position","zIndex"]),footer:n.footerNode.css(["position","zIndex"])};log("Checking positioning.",t),!t.injection||"relative"!==t.injection.position&&"static"!==t.injection.position||(log("Setting injection position to relative."),n.injectionNode.css("position","relative")),t.content&&("relative"!==t.content.position&&"static"!==t.content.position||(log("Setting injection position to relative."),n.contentNode.css("position","relative")),("auto"===t.content.zIndex||t.content.zIndex<=e.css("zIndex"))&&(log("Raising content area above wallpaper container."),n.contentNode.css("zIndex",e.css("zIndex")+1))),t.footer&&"static"===t.footer.position&&(log("Setting footer area position to relative."),n.footerNode.css("position","relative"),n.footerNode.css("zIndex",e.css("zIndex")+2)),n.contentNode.data("originalStyles",t.content),n.footerNode.data("originalStyles",t.footer),log("Content area has been raised.")}function show(){var e;log("Displaying wallpaper."),getContainer().off(d).addClass(r+"-open"),t.GPT_SITE_SLOTS&&n.obstructiveNode.find('[id^="div-gpt-ad"]').each((function(){t.GPT_SITE_SLOTS.hasOwnProperty(this.id)&&t.googletag.destroySlots([t.GPT_SITE_SLOTS[this.id]])})),n.obstructiveNode.remove(),startTrackingScroll()}function _reset(){function finishRemoval(){a=!0,n.obstructiveNode.show(),log("Clearing all event listeners."),n.window.off("."+r),o&&o.length&&(log("Removing wallpaper container."),o.off("."+r).remove()),n.container=null,t.resolve()}var t=e.Deferred(),o=getContainer(!0),i=!(!o||!o.length)&&o.hasClass(r+"-open"),a=!1;return log("RESET!"),o&&o.length?(o.off(d).removeData().removeProp("data").css("backgroundColor","rgba(0,0,0,0)").removeClass(r+"-open").removeClass(r+"-fixed"),log("Container is closing."),d&&i&&o.on(d,(function(e){"opacity"===e.originalEvent.propertyName&&(log("Transition complete."),finishRemoval())})),setTimeout((function(){a||finishRemoval()}),800)):finishRemoval(),log("Returning our promise."),t.promise()}function isFixed(){var e;return getContainer().hasClass(r+"-fixed")}function toggleFixed(e){var t=getContainer();isFixed()&&!1===e&&(log("Unfixing wallpaper position."),t.removeClass(r+"-fixed").css("top","0")),isFixed()||!0!==e||(log("Fixing wallpaper position."),refreshStickAtPosition(),t.addClass(r+"-fixed").css("top",n.stickAt))}function startTrackingScroll(){function hasPassedStickPosition(){var e=n.window.scrollTop(),t;return(n.injectionNode.length?n.injectionNode.offset().top:0)<e+n.stickAt}log("Initializing scroll tracking."),refreshStickAtPosition(),hasPassedStickPosition()?toggleFixed(!0):toggleFixed(!1),n.window.on("scroll."+r,s((function(){hasPassedStickPosition()?toggleFixed(!0):toggleFixed(!1)}),50)),n.window.on("resize."+r,l((function(){refreshStickAtPosition()}),500)),log("Scroll tracking enabled.")}function _process(){try{if(e(i.contentNode).height()<200)return a===o&&(a=20),0===a?(log("Timed out waiting for content node."),void(a=o)):(log("Content node is not ready, retrying.",--a),void setTimeout((function(){_process()}),500));refreshCache(),log("Processing wallpaper slot.");var s,l=n.dfpSlot.find("iframe").contents().find("#google_image_div,body").first(),d=l.find("a:first"),c=l.find("img.img_ad:first,img:first").first(),g=c.prop("alt");if(log("Checking image."),!c.length)return log("No image found in ad slot! Resetting."),void _reset();var p=getContainer(),u=checksum((d.length?d.prop("href")+d.prop("target"):"")+c.prop("src"));if(log("Generated hash.",u),u===p.data("hash"))return void log("Requested wallpaper is already set.");log("Getting background color.",g);var f="rgba(0,0,0,1)",h=g.match(/(\#[A-Za-z0-9]+)/)||!1;if(h&&h.length>1)f=h[1];else{var m=new XMLHttpRequest;m.onload=function(){var o=new FileReader;o.onloadend=function(){var i=o.result;if(i){log("Got data URI for image");var n=new t.Image;n.onload=function(){var o=t.document.createElement("canvas"),i=o.getContext("2d"),a=n.naturalWidth||n.offsetWidth||n.width,s=n.naturalHeight||n.offsetHeight||n.height,l={x:a/2,y:s/2};o.width=a,o.height=s,i.drawImage(n,0,0),log("Getting color data for center point",l);var d=i.getImageData(l.x,l.y,l.x+1,l.y+1);if(d&&d.data){log("Got new color data!",d);var c=[d.data[0],d.data[1],d.data[2],d.data[3]];log("Got updated background color!",f="rgba("+c.join(",")+")"),e("#"+r+"Container").css("backgroundColor",f)}},n.src=i}},o.readAsDataURL(m.response)},m.open("GET",c.prop("src")),m.responseType="blob",m.send()}log("Using background color.",f),_reset().then((function(){log("Building the new wallpaper.");var o="";d.length&&(o=e("<a />",{href:d.prop("href"),target:d.prop("target")}),t._CMLS.navThroughPlayer&&t._CMLS.navThroughPlayer.updateLink(o[0]));var i=e("<iframe />",{name:r+"Iframe",scrolling:"no",marginWidth:"0",marginHeight:"0",frameborder:"0"});log("Injecting iframe into container."),(p=getContainer()).data("hash",u).css("backgroundColor",f).append(i);var n='<style>html,body{background:transparent;margin:0;padding:0;width:100%;height:100%;}body{background:url("'+c.prop("src")+'") no-repeat top center;}'+(c.prop("alt").indexOf("contain")>-1?"body{background-size:100%}":"")+"a{display:block;width:100%;height:100%;text-decoration:none;}</style>";i.load((function(){log("Injecting wallpaper into iframe."),i.contents().find("body").append(n,o)})).prop("src","about:blank"),c.length?(log("Initializing preloader."),e("<img />").bind("load",(function(){show(),e(this).remove()})).prop("src",c.prop("src"))):show()}))}catch(e){log("Unknown error!",e)}}function checkRenderEvent(e){var t;if(e.slot.getTargeting("pos").indexOf("wallpaper-ad")>-1)return log("Caught render event for wallpaper-ad",e.slot.getSlotElementId()),e.isEmpty?(log("Slot was empty, resetting wallpaper container."),_reset()):(log("Slot contained an ad, processing wallpaper."),_process()),!1}function _unbindAllListeners(){e(t).off("."+r)}var n={},a,r=i.nameSpace||"wallpaperInjector",s=t._CMLS.throttle,l=t._CMLS.debounce,d=determineTransitionEvent();this.reset=_reset,this.process=_process,this.unbindAllListeners=_unbindAllListeners,log("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push((function(){t.googletag.pubads().addEventListener("slotRenderEnded",(function(e){l(checkRenderEvent(e),1e3)}))}));var c='<style id="'+r+'Styles">.'+r+"-container {display: block !important;position: absolute;z-index: 0;top: 0;left: 50%;height: 0 !important;width: 100vw !important;overflow: hidden;text-align: center;transition: opacity 0.5s, height 0.6s, background-color 0.4s;opacity: 0;transform: translateX(-50%);}."+r+"-container iframe {border: 0;height: 100%;width: 100%;}."+r+"-container ~ .grid-container {transition: box-shadow 0.6s}."+r+"-open {height: 100% !important;opacity: 1;}."+r+"-open ~ .grid-container {box-shadow: 0 0 20px rgba(0,0,0,0.3);}."+r+"-fixed {position: fixed;}"+i.dfpSlotNode+" {display: none !important;}</style>";t.document.getElementById(r+"Styles")||e("head").append(c),"complete"===t.document.readyState||"loaded"===t.document.readyState?_process():e((function(){_process()}))}var i={dfpSlotNode:"#div-gpt-ad-1418849849333-16",injectionNode:".wrapper-content",stickNode:".wrapper-header",contentNode:".wrapper-content .grid-container:first",footerNode:".wrapper-footer",obstructiveNode:".takeover-left, .takeover-right, .skyscraper-left, .skyscraper-right"},n="WALLPAPER INJECTOR",a="wallpaperInjector",r="0.5";t._CMLS[a],i.nameSpace=a,t._CMLS[a]=new WallpaperInjector(i)}(jQuery,window),function(e,t,o){function log(){r.logger(i+" v"+a,arguments)}function init(){var o=t._CMLS.adTag,i=r.whichPlayer(),n;if(!i.type)return log("Player not found, checking again in 2 seconds... ("+(5-s)+" checks remaining)"),void(s<5?(s++,setTimeout(init,2e3)):log("Player was not found, exiting for good."));log("Player found",i),t.matchMedia("(max-width: 1042px)").matches?log("Device width is below 1042px"):o.queue((function(){e((function(){if(t.self.document.getElementById("CMLSPlayerSponsorship")||t.self.parent.document.getElementById("CMLSPlayerSponsorship")||t.top.document.getElementById("CMLSPlayerSponsorship"))log("Container already exists, exiting.");else{log("Discovering local site ad path.");var n=null;try{var a,s=o.rawInterface().pubads().getSlots();for(var l in s){var d=s[l].getSlotId().getName();if(d&&d.indexOf("/6717/")>-1){n=d;break}}for(var c in s)"CMLSPlayerSponsorship"===s[c].getSlotElementId()&&(log("Destroying existing slot"),o.rawInterface().destroySlots([s[c]]));if(null===n)throw{message:"Could not retrieve ad unit path."}}catch(e){return void log("Failed to retrieve DFP properties.",e)}log("Ad path found, defining new slot.",n);var g=o.defineSlot([n,[[120,60]],"CMLSPlayerSponsorship"],!0,{pos:"playersponsorlogo"},!0);if("dfp"===o.identity){var p=o.rawInterface().sizeMapping().addSize([800,0],[[120,60]]).addSize([0,0],[]).build();g.defineSizeMapping(p)}var u=2e5;if(setTimeout((function(){if(i.type===t._CMLS.const.PLAYER_TUNEGENIE){var o=e("#"+t.top.tgmp.divId);o.css("z-index")&&(u=parseInt(o.css("z-index"),10)+1)}u>2147483647&&(u=2147483647),e("#CMLSPlayerSponsorship").css("z-index",u)}),2e3),e("#CMLSPlayerSponsorshipStyle").length||e("body").append('<style id="CMLSPlayerSponsorshipStyle">#CMLSPlayerSponsorship {position: fixed;z-index: '+u+";width: 120px;height: 60px;}#CMLSPlayerSponsorship.cmls-player-tg {left: 50%;transform: translate(+290px, 0);}#CMLSPlayerSponsorship.cmls-player-triton {left: 50%;transform: translate(30px, 0);}#CMLSPlayerSponsorship.cmls-player-pos-bottom {bottom: 4px;}#CMLSPlayerSponsorship.cmls-player-pos-top {top: 4px;}#CMLSPlayerSponsorship.cmls-player-triton.cmls-player-pos-top {top: 5px;}@media (max-width: 75rem) {#CMLSPlayerSponsorship.cmls-player-tg {left: 50%;}}</style>"),!e("#CMLSPlayerSponsorship").length){var f=e('<div id="CMLSPlayerSponsorship"><script>googletag.cmd.push(function() { googletag.display("CMLSPlayerSponsorship")});<\/script></div>'),h="bottom";i.position===r.const.PLAYER_POSITION_TOP&&(h="top"),i.type===r.const.PLAYER_TRITON&&f.addClass("cmls-player-triton"),i.type===r.const.PLAYER_TUNEGENIE&&f.addClass("cmls-player-tg"),"top"===h?f.addClass("cmls-player-pos-top"):f.addClass("cmls-player-pos-bottom"),e("body").append(f)}log("Slot initialized.")}}))}))}var i="PLAYER SPONSOR INJECTOR",n="playerSponsorInjector",a="0.1",r=t._CMLS;if(t.self===t.top){var s=0,SponsorArray=function(){};SponsorArray.prototype=[],SponsorArray.prototype.push=function(){init()},t.self._CMLSPlayerSponsorshipInit=new SponsorArray,e(init()),r[n]=a}else e((function(){log("Within TuneGenie frame, activating player sponsor init in parent window."),t.parent._CMLSPlayerSponsorshipInit=t.parent._CMLSPlayerSponsorshipInit||[],t.parent._CMLSPlayerSponsorshipInit.push(1)}))}(window.top.jQuery,window),function(e,t,o){function log(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(i+" v"+n,arguments)}function winDef(){for(var e=arguments.length;e--;)if(t[arguments[e]]||t.top[arguments[e]]||t.parent[arguments[e]])return!0;return!1}var i="PAIDCONTENT INJECTOR",n="0.5";if(winDef("NO_PAIDCONTENT"))return log("Opted out with window.NO_PAIDCONTENT, ejecting."),!1;var a=t.document;if(a.body.className.indexOf(" single ")<0||a.body.className.indexOf("layout-using-template-1")>-1)return log("Not a single post layout"),!1;var r=a.body.className.match(/postid\-(\d+)/i);if(!r||r.length<2)return log("Could not determine main post ID."),!1;var s=e(".wrapper-content article.post-"+(r=r[1]));if(!s.length)return log("Count not discover main page article."),!1;var l=s.width();if(l>800||l<300)return log("Main article width is suspicious, ejecting."),!1;var d=s.parents(".column");if(!d.length)return log("Could not determine main page article's parent column"),!1;var c={el:function(e,t){var o=a.createElement(e);if(null!==t&&"function"==typeof t||"object"==typeof t)for(var i in t)o.setAttribute(i,t[i]);return o},script:function(e,t){var o=Object.assign({},{type:"text/javascript",async:!0,src:e},t),i;return c.el("script",o)},iframe:function(e,t){var o=c.el("iframe",e);return o.onload=function(){o.contentWindow.document.open(),o.contentWindow.document.write(t),o.contentWindow.document.close(),o.onload=!1},o}};log("Injecting content");var g=c.el("div",{id:"PAIDCONTENT-"+Math.ceil(6e6*Math.random()),style:"position: relative !important; float: left !important; width: 100% !important"});if(d.append(g),!winDef("NO_HINDSIGHT")){var p=["WMAL-FM","KNBR-AF","WBAP-AM","WLAV-FM","KSFO-AM","KXXR-FM","WJBC-AM","WLS-AM1","KABC-AM","KRBE-FM","KTCK-AM","WJR-AM1","WKQX-FM","KGO-AM1","KMJ-AF1","KQRS-FM","KSCS-FM","WBWN-FM","KPLX-FM","WPRO-AM","WBNQ-FM","KSAN-FM","WNTQ-FM","WWTN-FM","WQQK-FM","WWWQ-FM","KLIF-FM","WFMS-FM","WOKI-FM","WGFX-FM"];if(t._ampconfig&&t._ampconfig.settings&&(t._ampconfig.settings.syn_site_name&&p.indexOf(t._ampconfig.settings.syn_site_name.toUpperCase())>-1||t._ampconfig.settings.format&&t._ampconfig.settings.format.toLowerCase().indexOf("news")>-1)){var u="//static.solutionshindsight.net/teju-webclient/teju-webclient.min.js",f=c.script(u);g.appendChild(f),log("Hindsight injected")}}if(!winDef("NO_NEWSMAX")){var h="//static.newsmaxfeednetwork.com/web-clients/bootloaders/jtPvahXLC0BvyCYESN3Fgu/bootloader.js";t.matchMedia("only screen and (max-width: 760px)").matches&&(h="//static.newsmaxfeednetwork.com/web-clients/bootloaders/Jx44GJqslQrQU3ZULtFwdD/bootloader.js");var m=c.script(h,{"data-version":"3","data-url":document.location.href,"data-zone":"[ZONE]","data-display-within-iframe":"true"});g.appendChild(m),log("Newsmax injected.")}}(jQuery,window.self),function(e,t,o){function log(){t._CMLS.logger(i+" v"+a,arguments)}function fireEvent(e){try{log("Event fired: "+e),sharedContainerDataLayer.push({event:e}),corpDataLayer.push({event:e})}catch(e){}}var i="GTM STREAM TRACKING",n="GTMStreamTracker",a="0.3";t._CMLS[n]=!0,t.top.tgmp&&t.top.tgmp.addEventListener?t._CMLS[n]?log("Already loaded, ejecting."):(t.top.tgmp.addEventListener(t.top.TGMP_EVENTS.streamplaying,(function(e){!0===e?(log("Stream started."),fireEvent("siteplayer-stream-playing")):!1===e&&(log("Stream stopped."),fireEvent("siteplayer-stream-stopped"))})),t.addEventListener("td-player.playing",(function(){fireEvent("siteplayer-stream-playing")})),
t.addEventListener("td-player.stopped",(function(){fireEvent("siteplayer-stream-stopped")})),log("Initialized.")):log("TGMP not available or not able to listen to events.")}(jQuery,window),function(e,t){function log(){window._CMLS.logger(o+" v"+n,arguments)}function fireEvent(e,t,o){try{log("Event fired: "+e,t,o),sharedContainerDataLayer.push({event:e,"page-visible":t,"page-visible-time-change":o}),corpDataLayer.push({event:e,"page-visible":t,"page-visible-time-change":o})}catch(e){}}function handleVisibilityChange(t){var o=Math.round((e._CMLS.now()-s)/1e3);t||(t=e.document[a]?"hidden":"visible"),window._CMLS.tabVisible=t,fireEvent("page-visibility",t,o),s=e._CMLS.now()}var o="GTM TAB VISIBILITY TRACKING",i="GTMTabVisibilityTracker",n="0.1",a,r;window._CMLS[i]={},void 0!==e.document.hidden?(a="hidden",r="visibilitychange"):void 0!==e.document.mozHidden?(a="mozHidden",r="mozvisibilitychange"):void 0!==e.document.msHidden?(a="msHidden",r="msvisibilitychange"):void 0!==e.document.webkitHidden?(a="webkitHidden",r="webkitvisibilitychange"):void 0!==e.document.oHidden&&(a="oHidden",r="ovisibilitychange");var s=e._CMLS.now();e.document.addEventListener(r,(function(){handleVisibilityChange()}),!1)}(window.self),function(e,t){function log(){e._CMLS&&e._CMLS.logger&&e._CMLS.logger(o+" v"+i,arguments)}function AutoReloader(){function checkCondition(){var t=e.top.document.querySelector('iframe#page_frame,iframe[name="pwm_pageFrame"]');return a.type===e._CMLS.const.PLAYER_TUNEGENIE&&t&&t.contentWindow?t.contentWindow.document.querySelector(o.condition):e.document.querySelector(o.condition)}function getDateWithOffset(e){return new Date(Date.now()+e)}var t={condition:"body.home",timeout:8},o=t,i,n,a=e._CMLS.whichPlayer(),r=this;this.start=function(a){log("Starting timer.",a),r.stop(),o={condition:a.condition||t.condition,timeout:a.timeout||t.timeout},checkCondition()?(log("Starting countdown, reloading at "+(n=getDateWithOffset(6e4*o.timeout))),e._CMLS.autoReload&&(e._CMLS.autoReload.active=!0),i=setInterval(r.tick,1e4)):log("Condition check failed at start.")},this.stop=function(){i&&(log("Stopping timer."),clearInterval(i),i=null,e._CMLS.autoReload&&(e._CMLS.autoReload.active=!1))},this.tick=function(){Date.now()>n.getTime()&&r.fire()},this.fire=function(){if(r.stop(),checkCondition()){var t=e.location.protocol,o=e.location.hostname,i=e.location.href.replace(t+"//"+o,"");if(i.length<1&&(i="/"),a.type===e._CMLS.const.PLAYER_TRITON&&e.History&&e.History.Adapter)return log("Reloading through Triton Player."),void e.History.Adapter.trigger(e,"statechange");if(a.type===e._CMLS.const.PLAYER_TUNEGENIE){var n=e.top.document.querySelector('iframe#page_frame,iframe[name="pwm_pageFrame"]');return n&&n.contentWindow?(log("Reloading through TuneGenie Player frame."),void n.contentWindow.tgmp.updateLocation(i)):(log("Reloading through TuneGenie Player."),void e.tgmp.updateLocation(i))}}else log("Condition check failed before firing, timer stopped.")},this.push=function(e){log("Received request.",e),r.start(e)}}var o="AUTO-RELOAD PAGE",i="0.12",n;e._CMLS&&(e._CMLS.autoReload&&e._CMLS.autoReload.constructor===Array&&e._CMLS.autoReload.length&&(log("Loaded with request.",e._CMLS.autoReload),n=e._CMLS.autoReload[e._CMLS.autoReload.length-1]),e._CMLS.autoReload&&e._CMLS.autoReload.constructor!==Array||(e._CMLS.autoReload=new AutoReloader)),log("Initialized."),n&&e._CMLS.autoReload.push(n)}(window.top),function(e,t,o){e((function(){t.NO_ADDTHIS_HERE&&e(".addthis-smartlayers").hide()})),t.self!==t.top?t.top.destroyAddThis&&t.top.destroyAddThis():t.top.destroyAddThis=function(){e(t.top.document.querySelectorAll(".addthis-smartlayers")).hide()}}(jQuery,window),function(e,t,o){function log(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(i+" v"+a,arguments)}var i="ADDTHIS INJECTOR",n="addThisInjector",a="0.6.17",r="ra-55dc79597bae383e";if(t.self.addthis&&t.self.addthis_config&&t.self.addthis_config.pubid&&t.self.addthis_config.pubid!==r)log("AddThis already loaded by local page.");else if(t.self!==t.top?(log("Not top window."),t.top.addthisDestroyer&&t.top.addthisDestroyer(),e(t).unload((function(){log("Removing AddThis layers."),e(".addthis-smartlayers").remove()}))):(log("Loaded in top window."),t.top.addthisDestroyer=function(){if(log("Removing addthis from top window."),e('script[src*="addthis"]').remove(),t.top.addthisLayerReference){log("Instructing addthis to destroy itself.");try{t.top.addthisLayerReference.destroy()}catch(e){}delete t.top.addthisLayerReference,e(".addthis-smartlayers").remove()}else log("No addthis object in top window.")}),t.self.NO_ADDTHIS_HERE)log("NO_ADDTHIS_HERE found, will not build.");else if(t.top._CMLS&&t.top._CMLS.hasOwnProperty("isHomepage")&&t.top._CMLS.isHomepage(t.self))log("Will not build on homepage, exiting.");else{t.self.addthis_config=t.self.addthis_config||{},t.self.addthis_config.pubid=r,log("Building addthis script.");var s=t.self.document.createElement("script");s.onload=function(){},s.src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-55dc79597bae383e",s.id=n+"-script",s.async=!0,t.self.document.head.appendChild(s),log("Injected.")}}(jQuery,window.self),function(e,t,o){function log(){r.logger(i+" v"+a,arguments)}var i="BREAKING NEWS BAR",n="BreakingNews",a="0.7",r=t._CMLS||{};Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),r[n]=function(o,i){log("Called",typeof o,o,i);var n={classPrefix:"cmlsBreakingNews",additionalClass:"",position:"above",link:"",target:"_top",beforeText:"Breaking News:",text:"",background:"#900",hoverBackground:"#600",color:"#fff"},a,s=".wrapper-header";if(e(s).length){if("object"!=typeof o||Array.isArray(o))if("object"==typeof o&&Array.isArray(o)&&o.length)(a=n).text=o[0],o.length>1&&(i=o[1]),log("Basic mode!");else{if("object"==typeof o)return void log("Invalid usage!",o,i);(a=n).text=o,log("Basic mode!")}else a=e.extend({},n,o),log("Advanced mode!");!a.link&&i&&(a.link=i),log("Settings:",a);var l="."+a.classPrefix+"-container { display: block; box-sizing: border-box; position: relative; float: none; overflow: hidden; z-index: 10; padding: 1em; color: #fff; background: #900; box-shadow: 0 0 10px rgba(0,0,0,0.4); font-size: 14px; line-height: 1.2; text-decoration: none; outline: 0 }."+a.classPrefix+"-container > a { display: block; color: inherit !important; cursor: pointer; padding: 1em; margin: -1em; }."+a.classPrefix+"-container > a:hover ."+a.classPrefix+"-before { text-decoration: underline; }."+a.classPrefix+"-inner { box-sizing: border-box; max-width: 1020px; margin: 0 auto; }."+a.classPrefix+"-inner_link:hover { background-color: "+a.hoverBackground+"; }."+a.classPrefix+"-before { float: left; font-weight: bold; margin-right: .5em; }."+a.classPrefix+"-text { overflow: hidden; }."+a.classPrefix+"-inner a { text-decoration: underline !important; color: inherit; }@media (max-width: 500px) {."+a.classPrefix+"-before { float: none; margin-bottom: .25em; }}",d='<div class="'+a.classPrefix+'-container"><div class="'+a.classPrefix+'-inner">{{BEFORE}}<div class="'+a.classPrefix+'-text">{{TEXT}}</div></div></div>';if(a.beforeText&&a.beforeText.length){var c='<div class="'+a.classPrefix+'-before">'+a.beforeText+"</div>";d=d.replace("{{BEFORE}}",c)}else d=d.replace("{{BEFORE}}","");if(d=e(d.replace("{{TEXT}}",a.text)),a.link&&a.link.length){var g=e("<a></a>").prop({href:a.link,target:a.target,className:a.classPrefix+"-inner_link"});d.wrapInner(g)}d.css({background:a.background,color:a.color}),d.addClass(a.additionalClass).prop("id","CMLSBreakingNews-"+Math.floor(1e7*Math.random())),e("#cmlsBreakingNewsStyles").length||e("head").append('<style id="cmlsBreakingNewsStyles">/* CMLS Breaking News Bar styles */\n'+l+"</style>"),"below"===a.position?(e(s).after(d),e("#cmlsBreakingNewsStyles").append(".takeover-left,.takeover-right,.skyscraper-left,.skyscraper-right { transform: translateY("+d.outerHeight()+"px); }")):e(s).before(d),r.navThroughPlayer&&(log("Applying navThroughPlayer to bar links."),d.find('a:not([href]),a[target="_self"],a[target="_top"],a[target="_parent"]').each((function(){log("Applying navThroughPlayer to a link.",this.href),r.navThroughPlayer.updateLink(e(this))}))),"above"===a.position&&(t.DO_NOT_AUTO_SCROLL=!0)}};var BNInjector=function(){};BNInjector.prototype=[],BNInjector.prototype.push=function(){log("Received after-load request.",arguments),r[n].apply(null,arguments)},t._CMLSBreakingNews&&t._CMLSBreakingNews.length&&t._CMLSBreakingNews.forEach(r[n]),t._CMLSBreakingNews=new BNInjector}(jQuery,window.self),function(e,t,o){function log(){t._CMLS.logger(i+" v"+a,arguments)}function initSocialListenLive(o){function playStream(e){e.preventDefault(),log("Playing stream..."),t.top.tgmp_default_brand&&t.top.tgmp.options.brand!==t.top.tgmp_default_brand?t.top.tgmp.update({brand:t.top.tgmp_default_brand,theme:t.top.tgmp_default_theme,autostart:!0}):t.tgmp.playStream()}if(!t.top.tgmp)return o<11?(log("TuneGenie player not found, checking again in 1s. ("+o+" tries)"),setTimeout((function(){initSocialListenLive(++o)}),1e3)):void log("TuneGenie player not enabled.");log("Storing TGMP default configuration."),t.top.tgmp_default_brand=t.top.tgmp_default_brand||""+t.top.tgmp.options.brand,t.top.tgmp_default_theme=t.top_tgmp_default_theme||t.top.tgmp.options.theme;var i='.block-type-social a:has(img[title="Listen Live!!"]),.block-type-social a:has(img[alt="Listen Live!!"]),.block-type-social a[title="Listen Live!!"],.block-type-social a[alt="Listen Live!!"],.nav-listenlive a,.nav-listenlive img,.cmlistenlive-start';e("body").off("click",i,playStream).on("click",i,playStream),log("Social Listen Live button activated.")}var i="SOCIAL LISTEN LIVE LINK",n="socialListenLiveLink",a="0.5";t._CMLS=t._CMLS||{},log("Starting..."),e(initSocialListenLive(1)),t._CMLS[n]=a,log("Initialized.")}(jQuery,window.self),function(e,t,o){function log(){t._CMLS&&t._CMLS.logger&&t._CMLS.logger(i+" v"+n,arguments)}function parseCommand(e,t,o){var i={brand:e,autostart:!1};return o&&/\d+/.test(o)&&(i.theme=["#"+o]),t&&(i.autostart=!0),i}t._CMLS=t._CMLS||{};var i="SWITCHSTREAM LINKS",n="0.16";t._CMLS.switchTGMPStream=function(e,o,i){var n=t.tgmp||t.top.tgmp||null,a=parseCommand(e,o,i);n&&(log("Switching stream",a),n.update(a))},log("Initializing switchstream links on page."),e((function(){var o;e('.tgmp-switchstream,img[alt*="tgmp-switchstream"],a[alt*="tgmp-switchstream"],a[href*="tgmp-switchstream"]').each((function(){function getVars(e){return log("Requested vars",e),{brand:e.indexOf("tgmp-streamid")>-1?e.match(/tgmp\-streamid\-(\w+)/i)[1]:null,theme:e.indexOf("tgmp-theme")>-1?["#"+e.match(/tgmp\-theme\-(\d+)/i)[1]]:null,autostart:e.indexOf("tgmp-autostart")>-1}}var t=e(this),o=t.prop("alt"),i=t.prop("href"),n={brand:null,theme:null,autostart:!1};if(t.hasClass("tgmp-switchstream")){var a=t.prop("class");log("Using element classes",a),n=getVars(a)}if(o&&o.indexOf("tgmp-switchstream")>-1&&(log("Using element alt attribute",o),n=getVars(o)),i&&i.indexOf("tgmp-switchstream")>-1&&(log("Using element href",i),n=getVars(i)),!n.brand||n.brand.length<2)return log("No brand provided, exiting."),!1;t.data("tgmp-switchstream",n)})).on("click.cmls-tg-switchstream",(function(o){o.preventDefault();var i,n=e(this).data("tgmp-switchstream"),a=t.tgmp||t.top.tgmp||null;n?a?(log("Switching stream",n),a.update(n)):log("TGMP not available!"):log("Link was not initialized, exiting")}))}))}(jQuery,window.self),function(e){function log(){e.top._CMLS&&e.top._CMLS.hasOwnProperty("logger")&&e.top._CMLS.logger(t+" v"+i,arguments)}function GlobalizeSGroups(){var t=0,o=0,i=this;this.fireEvents=function(t){e.sharedContainerDataLayer.push({event:t}),e.corpDataLayer.push({event:t}),e._CMLS.triggerEvent(e,"cms-sgroup",t)},this.globalize=function(){if(!e._CMLS.adTag.pubads()||!e._CMLS.adTag.pubads().getTargeting("cms-sgroup"))return t>10?(log("TERMINATING. Could not retrieve page targeting in a reasonable time."),!1):(log("DFP is not ready, waiting to retry...","Cycles: "+t),clearTimeout(o),o=null,o=setTimeout(i.globalize,500),void t++);e._CMLS.cGroups=e._CMLS.adTag.pubads().getTargeting("cms-sgroup")||[],e.sharedContainerDataLayer=e.sharedContainerDataLayer||[],e.corpDataLayer=e.corpDataLayer||[];var n=!1;e._CMLS.cGroups.forEach((function(e){log("Firing cms-sgroup event",e),i.fireEvents(e),e.indexOf("Westwood One")>-1&&(n=!0)})),!0===n?i.fireEvents("Westwood One Property"):i.fireEvents("Cumulus Owned and Operated")},i.globalize()}var t="GLOBALIZE SGROUPS",o="globalizeSGroups",i="0.6";e._CMLS[o]?log("Already registered."):e._CMLS.adTag.queue((function(){log("adTag command queue initiated."),e._CMLS[o]=new GlobalizeSGroups}))}(window.self);
//# sourceMappingURL=compiled-allsites-min.js.map