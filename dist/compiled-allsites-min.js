if(window.self.location.search.indexOf("cmlsDisable")>-1)throw new Error("cmls script utils execution cancelled by presence of cmlsDisable in location.search.");!function(t,e){t.self!==t.top?t._CMLS={}:t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS.const=t._CMLS.const||{},t._CMLS.const.PLAYER_TUNEGENIE=8471,t._CMLS.const.PLAYER_TRITON=8468,t._CMLS.const.PLAYER_POSITION_TOP=80847980,t._CMLS.const.PLAYER_POSITION_BOTTOM=80667984,t._CMLS.logger=function cmlsLogger(e,n){function makeSmallString(t){return t?(e=t instanceof Element?t.innerHTML:t.toString()).substring(0,100):t;var e}if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;t._CMLS.loggerNamesToColors=t._CMLS.loggerNamesToColors||{};var o,i,a=e,r=[].slice.call(n);t._CMLS.loggerNamesToColors[a]?(o=t._CMLS.loggerNamesToColors[a].background,i=t._CMLS.loggerNamesToColors[a].complement):(o=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),i=parseInt(o,16)>=12303291?"000000":"FFFFFF",t._CMLS.loggerNamesToColors[a]={background:o,complement:i});var l=new Date;l=l.toISOString()?l.toISOString():l.toUTCString();var s=["%c["+a+"]","background: #"+o+"; color: #"+i];r?(Array.isArray(r)?(s=s.concat(makeSmallString(r[0])),r.length>1&&(s=s.concat(makeSmallString(r[1])))):s=s.concat(makeSmallString(r)),t.top.console.groupCollapsed.apply(t.top.console,s),t.top.console.debug(r)):t.top.console.groupCollapsed.apply(t.top.console,s),t.top.console.debug("TIMESTAMP:",l),t.top.console.trace(),t.top.console.groupEnd()},t._CMLS.now=Date.now||function(){return(new Date).getTime()},t._CMLS.throttle=function(e,n,o){var i,a,r,l=null,s=0;o||(o={});var later=function(){s=!1===o.leading?0:t._CMLS.now(),l=null,r=e.apply(i,a),l||(i=a=null)};return function(){var d=t._CMLS.now();s||!1!==o.leading||(s=d);var c=n-(d-s);return i=this,a=arguments,c<=0||c>n?(l&&(clearTimeout(l),l=null),s=d,r=e.apply(i,a),l||(i=a=null)):l||!1===o.trailing||(l=setTimeout(later,c)),r}},t._CMLS.debounce=function(e,n,o){var i,a,r,l,s,later=function(){var d=t._CMLS.now()-l;d<n&&d>=0?i=setTimeout(later,n-d):(i=null,o||(s=e.apply(r,a),i||(r=a=null)))},debounced=function(){r=this,a=arguments,l=t._CMLS.now();var d=o&&!i;return i||(i=setTimeout(later,n)),d&&(s=e.apply(r,a),r=a=null),s};return debounced.clear=function(){clearTimeout(i),i=r=a=null},debounced},t._CMLS.whichPlayer=function(){if(t._CMLS.whichPlayerCache&&t._CMLS.whichPlayerCache.type)return t._CMLS.whichPlayerCache;var e={type:null,position:null};return t.top.tgmp?(t._CMLS.logger("COMMON",["Found TuneGenie player."]),e.type=t._CMLS.const.PLAYER_TUNEGENIE,t.top.tgmp.options&&t.top.tgmp.options.position&&"top"===t.top.tgmp.options.position.toLowerCase()?(t._CMLS.logger("COMMON",["TuneGenie player is on the top."]),e.position=t._CMLS.const.PLAYER_POSITION_TOP):(t._CMLS.logger("COMMON",["TuneGenie player is on the bottom."]),e.position=t._CMLS.const.PLAYER_POSITION_BOTTOM)):t.top.TDPW&&(t._CMLS.logger("COMMON",["Found Triton player, assuming it's on top."]),e.type=t._CMLS.const.PLAYER_TRITON,e.position=t._CMLS.const.PLAYER_POSITION_TOP),t._CMLS.whichPlayerCache=e,t._CMLS.whichPlayerCache},t._CMLS.isHomepage=function(e){return e||(e=t),"/"===e.location.pathname&&!1===/[\?&]?p=/i.test(e.location.search)},t._CMLS.triggerEvent=function(e,n,o){var i;t.document.createEvent?(i=t.document.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,o):i=new CustomEvent(n,{detail:o}),e.dispatchEvent(i)},t._CMLS.logger("COMMON",["LIBRARY LOADED!\n                           .__                \n  ____  __ __  _____  __ __|  |  __ __  ______\n_/ ___\\|  |  \\/     \\|  |  \\  | |  |  \\/  ___/\n\\  \\___|  |  /  Y Y  \\  |  /  |_|  |  /___ \\ \n \\___  >____/|__|_|  /____/|____/____//____  >\n     \\/            \\/                      \\/ \n"]),t._CMLS.LOADED=!0)}(window),function(t,$,e){function log(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger(n+" v"+i,arguments)}function loopDetection(){a=setTimeout(t._CMLS[o].detectTag,50),r++}var n="ADTAG DETECTION",o="adTagDetection",i="0.1.1";t._CMLS=t._CMLS||{},t._CMLS[o]=t._CMLS[o]||{},t._CMLS[o].registeredDetectors=t._CMLS[o].registeredDetectors||[];var StubInterface=function(){var t="STUB INTERFACE",e="InterfaceSTUB",n="adTagDetection",o="x",i=this;return this.identity="STUB",this.detectTag=function(){},this.rawInterface=function(){},this.queue=function(t){i.rawInterface().cmd.push(t)},this.pubads=function(){return i.rawInterface().pubads()},this.refresh=function(t){return log("Refresh called",t),i.pubads().refresh(t)},this.addListener=function(t,e){},this.removeListener=function(t,e){},this.setTargeting=function(t,e){},this.defineSlot=function(t,e,n,o){},this.display=function(t){i.queue((function(){i.rawInterface().display(t)}))},this},a,r;t._CMLS[o].stubInterface=StubInterface,t._CMLS.adTag=new t._CMLS[o].stubInterface,t._CMLS[o].detectTag=function detectTag(){if(t._CMLS[o].registeredDetectors&&(log("Running registered detectors.",t._CMLS[o].registeredDetectors),t._CMLS[o].registeredDetectors.forEach((function(e){if(!e.identity)return log("Invalid interface in detector: "+e.identity),!1;log("Checking registered detector: "+e.identity),e.detectTag&&e.detectTag()&&(log("Interface found in detector: "+e.identity),t._CMLS.adTag=e)}))),!t._CMLS.adTag||!t._CMLS.adTag.rawInterface())return log("No interface found, rerunning detection."),void loopDetection()}}(window.self,jQuery),function(t,$,e){function log(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger("DFP INTERFACE v0.1.2",arguments)}var n="DFP INTERFACE",o="adTagDetection",i="0.1.2";t._CMLS=t._CMLS||{},t._CMLS.adTagDetection=t._CMLS.adTagDetection||{},t._CMLS.adTagDetection.registeredDetectors=t._CMLS.adTagDetection.registeredDetectors||[];var a=new t._CMLS.adTagDetection.stubInterface;a.identity="dfp",a.detectTag=function(){if(t.googletag)return log("Googletag detected."),!0},a.rawInterface=function(){return t.googletag},a.addListener=function(t,e){a.queue((function(){a.pubads().addEventListener(t,e)}))},a.removeListener=function(t,e){return a.pubads().removeEventListener(t,e)},a.setTargeting=function(t,e){return a.pubads().setTargeting(t,e)},a.defineSlot=function(t,e,n,o){var i=a.rawInterface().defineSlot.apply(null,t);if(!i)return!1;if(e&&(i=i.setCollapseEmptyDiv(!0)),Array.isArray(n))n.forEach((function(t){for(var e in t)t.hasOwnProperty(e)&&(i=i.setTargeting(e,t[e]))}));else if("object"==typeof n)for(var r in n)n.hasOwnProperty(r)&&(i=i.setTargeting(r,n[r]));return o&&(i=i.addService(a.pubads())),i},a.isInitialLoadDisabled=function(){return a.pubads().isInitialLoadDisabled()},t._CMLS.adTagDetection.registeredDetectors.push(a)}(window.self,jQuery),window._CMLS.adTagDetection.detectTag(),function(t,e,n){function log(){e.top._CMLS&&e.top._CMLS.logger&&e.top._CMLS.logger("Pushdown Ad v0.6",arguments)}var o="Pushdown Ad",i="0.6",a="6717",r="dfp-pushdown2",l=15,s=e.document;if(!s.querySelector("body.home"))return log("Not on homepage, exiting."),!1;if(s.getElementById(r))return log("Tag already exists, exiting."),!1;if(!e.hasOwnProperty("googletag"))return log('DFP library must be included and "googletag" window variable must be available before including this library.'),!1;var d=e.googletag,c=e._CMLS&&e._CMLS.debounce?e._CMLS.debounce:function(t){t()};t=t.noConflict();var $=function(n,o){return new t.fn.init(n,o||e.document)};$.fn=$.prototype=t.fn,t.extend($,t);var g=$.fn.jquery.split("."),p=g&&g.length?parseInt(g[0]):null,u;p&&p<3&&(
/*! jQuery requestAnimationFrame - 0.2.2 - 2016-10-26
		* https://github.com/gnarf37/jquery-requestAnimationFrame
		 * Copyright (c) 2016 Corey Frang; Licensed MIT */
u=function(t){function b(){n&&(e.requestAnimationFrame(b),t.fx.tick())}var n;Number(t.fn.jquery.split(".")[0])>=3?e.console&&e.console.warn&&e.console.warn("The jquery.requestanimationframe plugin is not needed in jQuery 3.0 or newer as they handle it natively."):e.requestAnimationFrame&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,b())},t.fx.stop=function(){n=!1})},"function"==typeof define&&define.amd?define(["jquery"],u):u(t)),d.cmd.push((function(){function detectCreative(t){if(!t.length)return log("Could not find DFP iframe within ad container."),!1;try{t.contents()}catch(t){return log("Could not retrieve ad container contents, is this a safe frame?"),!1}return t.contents().find("#vpContainer").length?"vast":t.contents().find(".img_ad").length?"image":!!t.contents().find("video").length&&"video"}function handleImage(t){log("Handling Image creative type.");var e=t.contents().find(".img_ad");if(!e.length)return log("Attempted to handle an image creative, but no image was found."),!1;log("Making image responsive."),e.css({width:"100%",height:"auto"}),log("Checking for timeout override");var n=e.prop("alt"),i=15e3;return n&&(n=n.match(/timeout=(\d+)/i)).length>1&&(i=1e3*n[1]),log("Triggering ad display with timeout",i),o.trigger("cmls.display",(function(){a.trigger("cmls.start",[i,function(){log("Triggering ad removal."),o.trigger("cmls.hide")}])})),!0}function handleVideo(t){log("Handling custom html video creative type.");var e=t.contents().find("video"),n=e.find("source");if(!e.length)return log("Attempted to handle a custom video creative, but no video tag was found."),!1;if(!e[0].canPlayType)return log("Current browser does not support HTML video."),!1;var i=!1;return n.each((function(){var t=$(this).prop("type");return!t||!e[0].canPlayType(t).replace(/no/,"")||(i=$(this),!1)})),!1===i?(log("No video source was found to be compatible with this browser."),!1):(log("Video has a compatible source."),e.prop("controls",!1).prop("muted",!0).prop("playsinline",!0).prop("autoplay",!1).on("mouseover",(function(){e.prop("muted",!1)})).on("mouseout",(function(){e.prop("muted",!0)})).on("canplaythrough",(function(){o.trigger("cmls.display",(function(){e[0].play()}))})).on("playing",(function(){a.trigger("cmls.start",1e3*this.duration)})).on("ended",(function(){o.trigger("cmls.hide")})),log("Video initialized."),!0)}function handleVast(t){log("Handling VAST-delivered creative.");var n={init:function(){log("Initializing VAST player.");var o=t.contents()[0],i=o.defaultView,a=o.getElementById("vpContainer");if(!a)return log("Attempted to handle VAST creative but no vpContainer was found."),!1;var r=a.getAttribute("data-vpurl");if(!r||r.length<1)return log("No vpurl attribute provided!"),!1;r=r.replace("[timestamp]",(new Date).getTime()).replace("[referrer_url]",e.location.href),i.player=new i.VASTPlayer(a),i.player.once("AdStopped",(function(){n.stopped()})),i.player.load(a.getAttribute("data-vpurl")).then((function startAd(){n.ready()})).catch((function(t){n.error(t)}))},ready:function(){var e,n=t.contents()[0].defaultView;n.player.adVolume=0,o.on("mouseover",(function(){n.player.adVolume=1})),o.on("mouseout",(function(){n.player.adVolume=0})),o.trigger("cmls.display",(function(){n.player.startAd().then((function(){log("VAST player playing."),a.trigger("cmls.start",1e3*n.player.adDuration)}))}))},stopped:function(){log("VAST player stopped."),o.trigger("cmls.hide")},error:function(t){log("Error from VAST player",t),o.trigger("cmls.hide")}};e._CMLS.vpPushdown=n;var i=t.contents()[0].createElement("script");i.onload=n.init,i.src="https://cdn.jsdelivr.net/npm/vast-player@latest/dist/vast-player.min.js",t.contents()[0].body.appendChild(i)}function checkRenderEvent(t){if(t.slot.getSlotElementId()===r){if(log("Caught relevant DFP render event.",t.slot.getSlotElementId()),t.isEmpty)return log("Slot was empty!"),o.trigger("cmls.hide"),!1;log("Handling ad.");var e=o.find("iframe:first");if(!e.length)return log("Attempted to handle ad, but no DFP iframe was found."),!1;var n=detectCreative(e);if(!n)return log("No supported ad creative type found."),!1;log("Ad type detected.",n),C[n](e)}}var t,o,i,a,l,g,p,u;if(!(u=$(".wrapper-content:first")).length)return log('Could not find ".wrapper-content" element.'),!1;try{if(e.GPT_SITE_ID)t=e.GPT_SITE_ID;else{var f,h=d.pubads().getSlots();if(h.length&&(h.some((function(e){var n=e.getAdUnitPath();if(n.indexOf("/6717/")>-1)return t=n,!0})),null===t||t===n))throw{message:"Could not retrieve ad unit path."}}}catch(t){return log("Failed to retrieve DFP properties.",t),!1}log('Ad path found, defining new slot with "/pushdown" level.',t+="/pushdown");var m=s.createElement("div");m.id=r+"-container",m.style.display="none",o=$(m);var v=s.createElement("div");v.id=r,i=$(v).appendTo(o);var S=s.createElement("style");S.innerText=' \t\t\t\t#dfp-pushdown2-container { \t\t\t\t\tfont-size: 24px !important; \t\t\t\t\tfont-size: 5vw !important; \t\t\t\t\tfont-weight: lightest !important; \t\t\t\t\tline-height: 0 !important; \t\t\t\t\tmargin: 0 auto !important; \t\t\t\t\tmax-width: 1020px !important; \t\t\t\t\toverflow: hidden !important; \t\t\t\t\tposition: relative !important; \t\t\t\t\tz-index: 1 !important; \t\t\t\t} \t\t\t\t#dfp-pushdown2 { \t\t\t\t\tposition: relative; \t\t\t\t\tmargin-bottom: 10px; \t\t\t\t} \t\t\t\t#dfp-pushdown2 div[id*="google_ads"] { \t\t\t\t\tposition: relative; \t\t\t\t\tpadding-bottom: 56.25%; \t\t\t\t\tmax-width: 100%; \t\t\t\t\theight: 0; \t\t\t\t\toverflow: hidden; \t\t\t\t} \t\t\t\t#dfp-pushdown2 iframe { \t\t\t\t\twidth: 100%; \t\t\t\t\theight: 100%; \t\t\t\t\tposition: absolute; \t\t\t\t\ttop: 0; \t\t\t\t\tleft: 0; \t\t\t\t} \t\t\t\t#dfp-pushdown2-close { \t\t\t\t\tcolor: white; \t\t\t\t\tfont-family: sans !important; \t\t\t\t\ttext-shadow: .05em .05em .25em black; \t\t\t\t\tmix-blend-mode: exclusion; \t\t\t\t\tcursor: pointer; \t\t\t\t\tposition: absolute; \t\t\t\t\ttop: .75em; \t\t\t\t\tright: .3em; \t\t\t\t\tz-index: 100000; \t\t\t\t} \t\t\t\t#dfp-pushdown2-timer { \t\t\t\t\tbackground: #a33; \t\t\t\t\twidth: 0; \t\t\t\t\theight: 3px; \t\t\t\t\tposition: absolute; \t\t\t\t\tbottom: 7px; \t\t\t\t\tleft: 0; \t\t\t\t\tz-index: 100000; \t\t\t\t} \t\t\t\t@media (min-width: 550px) { \t\t\t\t\t#dfp-pushdown2-container { font-size: 24px !important; } \t\t\t\t} \t\t\t\t',g=$(S).appendTo(o),p=$('<script> \t\t\t\tgoogletag.cmd.push(function() { \t\t\t\t\tgoogletag.display("dfp-pushdown2"); \t\t\t\t}); \t\t\t<\/script>').appendTo(i);var _=s.createElement("div");_.id=r+"-close",_.title="Close",_.innerText="âœ•",l=$(_).on("click",(function(){o.trigger("cmls.hide")})).appendTo(o);var y=s.createElement("div");y.id=r+"-timer",a=$(y).appendTo(o),o.on("cmls.display",(function(t,e){log("Displaying ad"),o.stop().clearQueue().slideDown("fast"),e&&e()})),o.on("cmls.hide",(function(t,e){log("Hiding ad."),a.trigger("cmls.reset"),o.stop().clearQueue().slideUp(),e&&e()})),a.on("cmls.start",(function(t,e,n){log("Timer display started with duration",e),a.trigger("cmls.reset",(function(){log("Animating timerDiv"),a.animate({width:"100%"},e,"linear",n)}))})),a.on("cmls.reset",(function(t,e){log("Resetting timerDiv to 0"),a.stop().clearQueue().css("width",0),e&&(log("Callback from cmls.reset firing."),e())}));var C={image:handleImage,video:handleVideo,vast:handleVast};d.pubads().addEventListener("slotRenderEnded",(function(t){c(checkRenderEvent(t),500)})),log("Injecting ad tag."),d.defineSlot(t,[1020,574],r).setCollapseEmptyDiv(!0).setTargeting("pos","pushdown").addService(d.pubads()),u.prepend(o)}))}(jQuery,window.self),function(t,e){function log(){t._CMLS.logger("PLAYER WATCH v0.5",arguments)}var n="PLAYER WATCH",o="playerWatch",i="0.5";!t._CMLS[o]&&(t.TDPW?(t._CMLS[o]={initialized:!1,cache:{},timer:null,interval:2500,const:{STOPPED:0,PLAYING:1},setDFPCriteria:function setDFPCriteria(e,n){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push((function(){log("Setting targeting",e,n),t.googletag.pubads().setTargeting(e,n)}))},checkCurrentTrack:function getCurrentTrack(){var e=!(!localStorage||!JSON)&&JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state"));e&&e.data&&(e.data.stream&&"LIVE_PLAYING"===e.data.stream.code.toUpperCase()?this.setState(this.const.PLAYING):this.setState(this.const.STOPPED),e.data.song&&e.data.song.id&&this.hasTrackChanged(e.data.song.id)&&this.trackHasChanged(e.data.song))},setState:function setState(e){return e===this.const.PLAYING&&e!==this.cache.state?(log("Player is streaming."),this.cache.state=e,this.setDFPCriteria("td-player-state","PLAYING"),void t._CMLS.triggerEvent(t,"td-player.playing")):e===this.const.STOPPED&&e!==this.cache.state?(log("Player is stopped."),this.cache.state=e,this.setDFPCriteria("td-player-state","STOPPED"),void t._CMLS.triggerEvent(t,"td-player.stopped")):void 0},hasTrackChanged:function hasTrackChanged(t){return!(!t||t===this.cache.trackId)},trackHasChanged:function trackHasChanged(e){log("Song has changed!",e),this.cache.trackId=e.id,e.artist&&this.setDFPCriteria("td-player-artist",e.artist),e.album&&this.setDFPCriteria("td-player-album",e.album),e.title&&this.setDFPCriteria("td-player-track",e.title),this.setDFPCriteria("td-player-id",e.id),t._CMLS.triggerEvent(t,"td-player.trackchange",e)},startTimer:function startTimer(){var t=this;clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((function(){t.checkCurrentTrack(),t.startTimer()}),this.interval)},init:function init(){return t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),this.initialized=!0,log("Initialized!",this.cache.trackId),this):(log("Player configuration not available, exiting."),!1)}},t._CMLS[o].init()):log("Triton player not enabled, exiting."))}(window),function(t,e){function log(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger(n+" v"+i,arguments)}var n="AUTO REFRESH ADS",o="autoRefreshAds",i="0.6.2";if(t.location.search.indexOf("cmlsDisableAdRefresh")>-1)log("Disabling due to cmlsDisableAdRefresh query.");else{if(t.DISABLE_AUTO_REFRESH_ADS)return log("Auto Refresh Ads is disabled locally with window.DISABLE_AUTO_REFRESH_ADS"),!1;t._CMLS.autoRefreshAdsTimer=t._CMLS.autoRefreshAdsTimer||1,t._CMLS.autoRefreshAdsExclusion=t._CMLS.autoRefreshAdsExclusion||[];var AutoRefresher=function(e){function getWindow(){if(r.type===t._CMLS.const.PLAYER_TUNEGENIE){var e=t.top.document.querySelector('iframe#page_frame,iframe[name="pwm_pageFrame"]');if(e&&e.contentWindow)return log("Window context is TuneGenie frame"),e.contentWindow}return log("Window context is window"),t}function checkConditions(){return t.top._CMLS&&t.top._CMLS.autoReload&&t.top._CMLS.autoReload.active?(log("AutoReloadPage is active, autoRefreshAds will be disabled."),-1):t.DISABLE_AUTO_REFRESH_ADS?(log("window.DISABLE_AUTO_REFRESH_ADS has been set, autoRefreshAds will be disabled."),-1):"visible"!==o?(log("Tab is hidden, autoRefreshAds will skip this cycle."),0):1}function checkTimer(){var t=checkConditions();if(1===t){var e=new Date;if(log("Checking timer",[e.toLocaleString(),s.toLocaleString()]),e.getTime()>=s.getTime())return void fire()}-1!==t?l=setTimeout((function(){checkTimer()}),1e4):n.stop()}function isElVisible(e){if(!e)return!1;var n=!1;e.style&&e.style.display&&"none"===e.style.display&&(n=!0,e.setAttribute("style","display: block; width: 1px; height: 1px;"));var o=e.getBoundingClientRect();if(n&&(e.style.display="none"),o.width&&o.height&&o.width>0&&o.height>0){if(o.width=o.right-o.left,o.height=o.bottom-o.top,0===o.width||0===o.height)return!1;var i={top:o.top+.25*o.height,right:o.right-.25*o.width,bottom:o.bottom-.25*o.height,left:o.left+.25*o.width};return(i.bottom>=0||i.top<=(t.innerHeight||document.documentElement.clientHeight))&&(i.right>=0||i.left<=(t.innerWidth||document.documentElement.clientWidth))}return!1}function recordTabVisibility(e){e||(e=t.document[i]?"hidden":"visible"),o=e}function fire(){if(1===checkConditions()){var e=getWindow();return log("Firing!",e._CMLS.adTag),void e._CMLS.adTag.queue((function(){log("Refreshing viewable page ads."),n.resetFireTime();try{var o=e._CMLS.adTag.pubads().getSlots(),i=[];o.forEach((function(n){var o=n.getSlotElementId(),a=e.document.getElementById(o);t._CMLS.autoRefreshAdsExclusion.indexOf(o)>-1?log("ID excluded from refresh",o,t._CMLS.autoRefreshAdsExclusion):a&&isElVisible(a)&&i.push(n)}));var a=[];i.forEach((function(t){a.push("El: "+t.getSlotElementId(),"SlotId: "+t.getSlotId(),"Path: "+t.getAdUnitPath(),t.getSizes(),t)})),log("Viewable ads:",a),e._CMLS.adTag.refresh(i)}catch(t){log("Failed to refresh ads!",t)}n.start()}))}log("Conditions were not met before firing, skipping this cycle."),n.start()}var n=this,o="visible",i,a,r=t._CMLS.whichPlayer(),l=null,s=e||null,d=!1;void 0!==t.document.hidden?(i="hidden",a="visibilitychange"):void 0!==t.document.mozHidden?(i="mozHidden",a="mozvisibilitychange"):void 0!==t.document.msHidden?(i="msHidden",a="msvisibilitychange"):void 0!==t.document.webkitHidden?(i="webkitHidden",a="webkitvisibilitychange"):void 0!==t.document.oHidden&&(i="oHidden",a="ovisibilitychange"),t.document.addEventListener(a,(function(){recordTabVisibility()}),!1),this.checkState=function(){return d},this.stop=function(){log("Stopping timer."),clearTimeout(l),l=null,s=null,d=!1},this.start=function(t){return n.stop(),1===checkConditions()&&(t&&t instanceof Date?(log("Start called with an init fire time.",t),s=t):n.resetFireTime(),log("Starting timer, will fire at "+s.toLocaleString()),checkTimer(),d=!0),n},this.destroy=function(){n.stop()},this.getFireTime=function(){return s},this.resetFireTime=function(){s=new Date((new Date).getTime()+6e4*t._CMLS.autoRefreshAdsTimer)},s&&s instanceof Date&&(log("Instantiated with a time to fire, using it!"),n.start(s))};try{t.parent._CMLS[o].destroy()}catch(t){}try{t._CMLS[o].destroy()}catch(t){}t._CMLS[o]=new AutoRefresher,t._CMLS[o].start()}}(window.self),function($,t,e){function log(){t._CMLS.logger(n+" v"+i,arguments)}function checkForPlayer(){log("Checking for player...",r),t._CMLS[o].isPlayerActive()?t._CMLS[o].init():r>20||(setTimeout(checkForPlayer,1e3),r++)}var n="NAV THROUGH PLAYER",o="navThroughPlayer",i="0.2",a=t._CMLS.whichPlayer();if(!t._CMLS[o]){t._CMLS[o]={isPlayerActive:function isPlayerActive(){return!!(a=t._CMLS.whichPlayer()).type},updateIframeLinks:function updateIframeLinks(e){if(t._CMLS[o].isPlayerActive)if(e)if("iframe"===e.tagName.toLowerCase()){var n=e.jquery?e:$(e);if(e.getAttribute("src")&&(e.getAttribute("src").indexOf(t.location.hostname)<0||e.getAttribute("src").indexOf("/safeframe/")>0))log("Ad iframe is in a safeframe, cannot update.",e);else try{n.contents().find('a[target="_self"],a[target="_top"],a[target="_parent"]').each((function(){log("Updating links in slot.",n.prop("id"),n[0],this),t._CMLS[o].updateLink(this)}))}catch(t){log("Could not update links in given iframe",e,t)}}else log("Received an updateIframeLinks request for a non-iframe",e);else log("Did not receive an iframe node, cannot update",e)},updateLink:function updateLink(e,n){if(t._CMLS[o].isPlayerActive)if(e){var i=e.jquery?e:$(e),a=t.document.createElement("a");if(a.href=i.prop("href"),-1!==a.href.indexOf("doubleclick.net")&&-1!==a.href.indexOf("adurl=/")){var r;if(log("Found a DFP clickthrough with a relative adurl!",a.href),"URLSearchParams"in t){var l=new t.URL(a.href),s;r=new t.URLSearchParams(l.search).get("adurl")}else for(var d=a.search.split("&"),c=0,g=d.length;c<g;c++){var p=d[c];if(p.indexOf("adurl=")>-1){var u=p.split("=");if(u.length>1){r=u[1];break}}}r?(a.href=a.href.replace("adurl=/","adurl="+t.location.protocol+"//"+t.location.hostname+"/"),i.prop("href",a.href),log("Modified relative DFP clickthrough",r,a.href)):log("Could not parse query string in DFP clickthrough",r)}else{if(0!==a.href.indexOf("/")&&a.hostname!==t.location.hostname&&!n)return log("Off-site URL found, will not modify",a),void(a=null);0===a.href.indexOf("/")&&(log("Relative link found",a),a.setAttribute("target","_top"))}log("Setting ad link to navigate through player.",a),i.off("."+o).on("click."+o,t._CMLS[o].clickThrough),a=null}else log("updateLink: did not receive a valid link.");else log("updateLink: Player is not active.")},clickThrough:function clickThrough(e){e&&t._CMLS[o].isPlayerActive()&&(e.preventDefault(),log("Intercepting click."),t._CMLS[o].navigate(e.currentTarget.href))},navigate:function navigate(e){try{t.sharedContainerDataLayer&&t.sharedContainerDataLayer.push({event:"relative-ad-click",relativeAdURL:e}),t.corpDataLayer&&t.corpDataLayer.push({event:"relative-ad-click",relativeAdURL:e})}catch(t){console.log(t)}a.type===t._CMLS.const.PLAYER_TRITON&&t.History&&(log("Navigating through Triton player.",e),t.History.pushState(null,null,e)),a.type===t._CMLS.const.PLAYER_TUNEGENIE&&t.tgmp&&(log("Navigating through TuneGenie player.",e),t.tgmp.updateLocation(e))},init:function init(){t._CMLS[o].isPlayerActive()?(log("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push((function(){t.googletag.pubads().addEventListener("slotRenderEnded",(function(e){if(e&&e.slot){var n=e.slot.getSlotElementId(),i=t.document.getElementById(n);"iframe"!==i.tagName.toLowerCase()&&(i=i.querySelector('iframe[id*="google_ads_iframe"]')),log("Caught render event",n,i,e),t._CMLS[o].updateIframeLinks(i)}else log("Caught render event but it was invalid.",e)}))})),$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each((function(){log("Addressing existing google ad frame",this),t._CMLS[o].updateIframeLinks(this)})),$(t).on("load",(function(){$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each((function(){log("Addressing existing google ad frame",this),t._CMLS[o].updateIframeLinks(this)}))})),log("Initialized.")):log("No player is active, exiting.")}};var r=0;checkForPlayer()}}(jQuery,window),function($,t,e){function log(){t._CMLS.logger(o+" v"+a,arguments)}function WallpaperInjector(n){function determineTransitionEvent(){var t,n=document.createElement("fakeelement"),o={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkittransitionend",msTransition:"mstransitionend"};for(t in o)if(n.style[t]!==e)return o[t]}function checksum(t){var e=0,n=t.length,o,i;if(0===n)return e;for(o=0;o<n;o++)e=(e<<5)-e+(i=t.charCodeAt(o)),e&=e;return e}function refreshCache(){return o.dfpSlot=$(n.dfpSlotNode),o.injectionNode=$(n.injectionNode),o.stickNode=$(n.stickNode),o.contentNode=$(n.contentNode),o.footerNode=$(n.footerNode),o.obstructiveNode=$(n.obstructiveNode),o.window=$(t),o.document=$(t.document),refreshStickAtPosition(),o}function refreshStickAtPosition(){return log("Refreshing stick position."),o.stickAt=o.stickNode.length?o.stickNode.offset().top:0,o.stickAt}function getContainer(t){if(o.container&&o.container.length)return o.container;var e=$("#"+a+"Container");if(e.length)return o.container=e,o.container;if(!0===t)return!1;log("Generating new wallpaper container."),refreshCache();var n=$("<div />",{id:a+"Container",class:a+"-container"});return o.injectionNode.prepend(n),o.container=n,raiseContentArea(),o.container}function raiseContentArea(){var t=getContainer(),e={injection:o.injectionNode.css(["position","zIndex"]),content:o.contentNode.css(["position","zIndex"]),footer:o.footerNode.css(["position","zIndex"])};log("Checking positioning.",e),!e.injection||"relative"!==e.injection.position&&"static"!==e.injection.position||(log("Setting injection position to relative."),o.injectionNode.css("position","relative")),e.content&&("relative"!==e.content.position&&"static"!==e.content.position||(log("Setting injection position to relative."),o.contentNode.css("position","relative")),("auto"===e.content.zIndex||e.content.zIndex<=t.css("zIndex"))&&(log("Raising content area above wallpaper container."),o.contentNode.css("zIndex",t.css("zIndex")+1))),e.footer&&"static"===e.footer.position&&(log("Setting footer area position to relative."),o.footerNode.css("position","relative"),o.footerNode.css("zIndex",t.css("zIndex")+2)),o.contentNode.data("originalStyles",e.content),o.footerNode.data("originalStyles",e.footer),log("Content area has been raised.")}function show(){var e;log("Displaying wallpaper."),getContainer().off(s).addClass(a+"-open"),t.GPT_SITE_SLOTS&&o.obstructiveNode.find('[id^="div-gpt-ad"]').each((function(){t.GPT_SITE_SLOTS.hasOwnProperty(this.id)&&t.googletag.destroySlots([t.GPT_SITE_SLOTS[this.id]])})),o.obstructiveNode.remove(),startTrackingScroll()}function _reset(){function finishRemoval(){i=!0,o.obstructiveNode.show(),log("Clearing all event listeners."),o.window.off("."+a),e&&e.length&&(log("Removing wallpaper container."),e.off("."+a).remove()),o.container=null,t.resolve()}var t=$.Deferred(),e=getContainer(!0),n=!(!e||!e.length)&&e.hasClass(a+"-open"),i=!1;return log("RESET!"),e&&e.length?(log("Container exists",e),e.off(s).removeData().removeProp("data").css("backgroundColor","rgba(0,0,0,0)").removeClass(a+"-open").removeClass(a+"-fixed"),log("Container is closing."),s&&n&&e.on(s,(function(t){"opacity"===t.originalEvent.propertyName&&(log("Transition complete."),finishRemoval())})),setTimeout((function(){i||finishRemoval()}),800)):(log("Container does not yet exist."),finishRemoval()),log("Returning our promise."),t.promise()}function isFixed(){var t;return getContainer().hasClass(a+"-fixed")}function toggleFixed(t){var e=getContainer();isFixed()&&!1===t&&(log("Unfixing wallpaper position."),e.removeClass(a+"-fixed").css("top","0")),isFixed()||!0!==t||(log("Fixing wallpaper position."),refreshStickAtPosition(),e.addClass(a+"-fixed").css("top",o.stickAt))}function startTrackingScroll(){function hasPassedStickPosition(){var t=o.window.scrollTop(),e;return(o.injectionNode.length?o.injectionNode.offset().top:0)<t+o.stickAt}log("Initializing scroll tracking."),refreshStickAtPosition(),hasPassedStickPosition()?toggleFixed(!0):toggleFixed(!1),o.window.on("scroll."+a,r((function(){hasPassedStickPosition()?toggleFixed(!0):toggleFixed(!1)}),50)),o.window.on("resize."+a,l((function(){refreshStickAtPosition()}),500)),log("Scroll tracking enabled.")}function _process(){try{if($(n.contentNode).height()<200)return i===e&&(i=20),0===i?(log("Timed out waiting for content node."),void(i=e)):(log("Content node is not ready, retrying.",--i),void setTimeout((function(){_process()}),500));refreshCache(),log("Processing wallpaper slot.");var r,l=o.dfpSlot.find("iframe").contents().find("#google_image_div,body").first(),s=l.find("a:first"),d=l.find("img.img_ad:first,img:first").first(),c=d.prop("alt");if(log("Checking image."),!d.length)return log("No image found in ad slot! Resetting."),void _reset();var g=getContainer(),p=checksum((s.length?s.prop("href")+s.prop("target"):"")+d.prop("src"));if(log("Generated hash.",p),p===g.data("hash"))return void log("Requested wallpaper is already set.");log("Getting background color.",c);var u="rgba(0,0,0,1)",f=c.match(/(\#[A-Za-z0-9]+)/)||!1;f&&f.length>1&&(u=f[1]),_reset().then((function(){log("Building the new wallpaper.");var e="";s.length&&(e=$("<a />",{href:s.prop("href"),target:s.prop("target")}),t._CMLS.navThroughPlayer&&t._CMLS.navThroughPlayer.updateLink(e[0]));var n=$("<iframe />",{name:a+"Iframe",scrolling:"no",marginWidth:"0",marginHeight:"0",frameborder:"0"});log("Injecting iframe into container."),(g=getContainer()).data("hash",p).css("backgroundColor",u).append(n);var o='<style>html,body{background:transparent;margin:0;padding:0;width:100%;height:100%;}body{background:url("'+d.prop("src")+'") no-repeat top center;}'+(d.prop("alt").indexOf("contain")>-1?"body{background-size:100%}":"")+"a{display:block;width:100%;height:100%;text-decoration:none;}</style>";if(n.on("load",(function(){log("Injecting wallpaper into iframe."),n.contents().find("body").append(o,e)})).prop("src","about:blank"),show(),!f){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){var n=e.result;if(n){log("Got data URI for image");var o=new t.Image;o.onload=function(){var e=t.document.createElement("canvas"),n=e.getContext("2d"),i=o.naturalWidth||o.offsetWidth||o.width,r=o.naturalHeight||o.offsetHeight||o.height,l={x:i/2,y:r/2};e.width=i,e.height=r,n.drawImage(o,0,0),log("Getting color data for center point",l);var s=n.getImageData(l.x,l.y,l.x+1,l.y+1);if(s&&s.data){log("Got new color data!",s);var d=[s.data[0],s.data[1],s.data[2],s.data[3]];log("Got updated background color!",u="rgba("+d.join(",")+")"),$("#"+a+"Container").css("backgroundColor",u)}},o.src=n}},e.readAsDataURL(i.response)},i.open("GET",d.prop("src")),i.responseType="blob",i.send()}}))}catch(t){log("Unknown error!",t)}}function checkRenderEvent(t){var e;if(t.slot.getTargeting("pos").indexOf("wallpaper-ad")>-1)return log("Caught render event for wallpaper-ad",t.slot.getSlotElementId()),t.isEmpty?(log("Slot was empty, resetting wallpaper container."),_reset()):(log("Slot contained an ad, processing wallpaper."),_process()),!1}function _unbindAllListeners(){$(t).off("."+a)}var o={},i,a=n.nameSpace||"wallpaperInjector",r=t._CMLS.throttle,l=t._CMLS.debounce,s=determineTransitionEvent();this.reset=_reset,this.process=_process,this.unbindAllListeners=_unbindAllListeners,log("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push((function(){t.googletag.pubads().addEventListener("slotRenderEnded",(function(t){l(checkRenderEvent(t),1e3)}))}));var d='<style id="'+a+'Styles">.'+a+"-container {display: block !important;position: absolute;z-index: 0;top: 0;left: 50%;height: 0 !important;width: 100vw !important;overflow: hidden;text-align: center;transition: opacity 0.5s, height 0.6s, background-color 0.4s;opacity: 0;transform: translateX(-50%);}."+a+"-container iframe {border: 0;height: 100%;width: 100%;}."+a+"-container ~ .grid-container {transition: box-shadow 0.6s}."+a+"-open {height: 100% !important;opacity: 1;}."+a+"-open ~ .grid-container {box-shadow: 0 0 20px rgba(0,0,0,0.3);}."+a+"-fixed {position: fixed;}"+n.dfpSlotNode+" {display: none !important;}</style>";t.document.getElementById(a+"Styles")||$("head").append(d),"complete"===t.document.readyState||"loaded"===t.document.readyState?_process():$((function(){_process()}))}var n={dfpSlotNode:"#div-gpt-ad-1418849849333-16",injectionNode:".wrapper-content",stickNode:".wrapper-header",contentNode:".wrapper-content .grid-container:first",footerNode:".wrapper-footer",obstructiveNode:".takeover-left, .takeover-right, .skyscraper-left, .skyscraper-right"},o="WALLPAPER INJECTOR",i="wallpaperInjector",a="0.5";t._CMLS[i],n.nameSpace=i,t._CMLS[i]=new WallpaperInjector(n)}(jQuery,window),function($,t,e){function log(){s.logger(n+" v"+i,arguments)}function init(){var n=t._CMLS.adTag,o=s.whichPlayer(),i;if(!o.type)return log("Player not found, checking again in 2 seconds... ("+(5-d)+" checks remaining)"),void(d<5?(d++,setTimeout(init,2e3)):log("Player was not found, exiting for good."));log("Player found",o),t.matchMedia("(max-width: 1042px)").matches?log("Device width is below 1042px"):($("#"+r+"Style").length||$("body").append('<style id="'+r+'Style">#'+r+" {position: fixed;z-index: "+l+";width: 120px;height: 60px;}#"+r+".cmls-player-tg {left: 50%;transform: translate(+290px, 0);}#"+r+".cmls-player-triton {left: 50%;transform: translate(30px, 0);}#"+r+".cmls-player-pos-bottom {bottom: 4px;}#"+r+".cmls-player-pos-top {top: 4px;}#"+r+".cmls-player-triton.cmls-player-pos-top {top: 5px;}@media (max-width: 75rem) {#"+r+".cmls-player-tg {left: 50%;}}</style>"),n.queue((function(){$((function(){if(t.self.document.getElementById(r)||t.self.parent.document.getElementById(r)||t.top.document.getElementById(r)||$("#"+r).length)log("Container already exists, exiting.");else{log("Discovering local site ad path.");var i=null;try{if(t.GPT_SITE_ID)i=t.GPT_SITE_ID;else{var a,d=n.rawInterface().pubads().getSlots();if(d.length&&(d.some((function(t){var e=t.getAdUnitPath();if(e.indexOf("/6717/")>-1)return i=e,!0})),null===i||i===e))throw{message:"Could not retrieve ad unit path."}}}catch(t){return void log("Failed to retrieve DFP properties.",t)}log("Ad path found, defining new slot.",i),setTimeout((function(){if(o.type===t._CMLS.const.PLAYER_TUNEGENIE){var e=$("#"+t.top.tgmp.divId);e.css("z-index")&&(l=parseInt(e.css("z-index"),10)+1)}l>2147483647&&(l=2147483647),$("#"+r).css("z-index",l)}),2e3);var c=$("<div />",{id:r,class:"cmls-player-tg cmls-player-pos-bottom"}),g=t.document.createElement("script");g.innerHTML=`\n\t\t\t\t\tgoogletag.cmd.push(function playersponsorlogo() {\n\t\t\t\t\t\twindow.GPT_SITE_SLOTS = window.GPT_SITE_SLOTS || {};\n\t\t\t\t\t\tvar sizeMap = googletag.sizeMapping()\n\t\t\t\t\t\t\t.addSize([800, 0], [[120,60]])\n\t\t\t\t\t\t\t.addSize([0, 0], [])\n\t\t\t\t\t\t\t.build();\n\t\t\t\t\t\twindow.GPT_SITE_SLOTS["${r}"] = googletag.defineSlot("${i}"), [120,60], "${r}");\n\t\t\t\t\t\twindow.GPT_SITE_SLOTS["${r}"]\n\t\t\t\t\t\t\t.addService(googletag.pubads())\n\t\t\t\t\t\t\t.defineSizeMapping(sizeMap)\n\t\t\t\t\t\t\t.setCollapseEmptyDiv(true)\n\t\t\t\t\t\t\t.setTargeting("pos", "playersponsorlogo");\n\t\t\t\t\t\tgoogletag.display("${r}");\n\t\t\t\t\t\tgoogletag.pubads().refresh([window.GPT_SITE_SLOTS["${r}"]]);\n\t\t\t\t\t});\n\t\t\t\t`,c.append(g),o.position===s.const.PLAYER_POSITION_TOP&&c.removeClass("cmls-player-pos-bottom").addClass("cmls-player-pos-top"),o.type===s.const.PLAYER_TRITON&&c.removeClass("cmls-player-tg").addClass("cmls-player-triton"),log("Generated sponsorContainer",c.html()),$("body").append(c),log("Slot initialized.")}}))})))}var n="PLAYER SPONSOR INJECTOR",o="playerSponsorInjector",i="0.8",a="6717",r="CMLSPlayerSponsorship",l=2e5,s=t._CMLS;if(t.self===t.top){var d=0,SponsorArray=function(){};SponsorArray.prototype=[],SponsorArray.prototype.push=function(){init()},t.self._CMLSPlayerSponsorshipInit=new SponsorArray,$(init()),s[o]=i}else $((function(){log("Within TuneGenie frame, activating player sponsor init in parent window."),t.parent._CMLSPlayerSponsorshipInit=t.parent._CMLSPlayerSponsorshipInit||[],t.parent._CMLSPlayerSponsorshipInit.push(1)}))}(window.top.jQuery,window),function($,t,e){function log(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(n+" v"+o,arguments)}function winDef(){for(var e=arguments.length;e--;)if(t[arguments[e]]||t.top[arguments[e]]||t.parent[arguments[e]])return!0;return!1}var n="PAIDCONTENT INJECTOR",o="0.5";if(winDef("NO_PAIDCONTENT"))return log("Opted out with window.NO_PAIDCONTENT, ejecting."),!1;var i=t.document;if(i.body.className.indexOf(" single ")<0||i.body.className.indexOf("layout-using-template-1")>-1)return log("Not a single post layout"),!1;var a=i.body.className.match(/postid\-(\d+)/i);if(!a||a.length<2)return log("Could not determine main post ID."),!1;var r=$(".wrapper-content article.post-"+(a=a[1]));if(!r.length)return log("Count not discover main page article."),!1;var l=r.width();if(l>800||l<300)return log("Main article width is suspicious, ejecting."),!1;var s=r.parents(".column");if(!s.length)return log("Could not determine main page article's parent column"),!1;var d={el:function(t,e){var n=i.createElement(t);if(null!==e&&"function"==typeof e||"object"==typeof e)for(var o in e)n.setAttribute(o,e[o]);return n},script:function(t,e){var n=Object.assign({},{type:"text/javascript",async:!0,src:t},e),o;return d.el("script",n)},iframe:function(t,e){var n=d.el("iframe",t);return n.onload=function(){n.contentWindow.document.open(),n.contentWindow.document.write(e),n.contentWindow.document.close(),n.onload=!1},n}};log("Injecting content");var c=d.el("div",{id:"PAIDCONTENT-"+Math.ceil(6e6*Math.random()),style:"position: relative !important; float: left !important; width: 100% !important"});if(s.append(c),winDef("NO_NEWSMAX")||document.getElementById("hotwire-incontent"));else{
var g="//static.newsmaxfeednetwork.com/web-clients/bootloaders/jtPvahXLC0BvyCYESN3Fgu/bootloader.js";t.matchMedia("only screen and (max-width: 760px)").matches&&(g="//static.newsmaxfeednetwork.com/web-clients/bootloaders/Jx44GJqslQrQU3ZULtFwdD/bootloader.js");var p=d.script(g,{"data-version":"3","data-url":document.location.href,"data-zone":"[ZONE]","data-display-within-iframe":"true"});c.appendChild(p),log("Newsmax injected.")}if(!winDef("NO_HINDSIGHT")){var u=["WMAL-FM","KNBR-AF","WBAP-AM","WLAV-FM","KSFO-AM","KXXR-FM","WJBC-AM","WLS-AM1","KABC-AM","KRBE-FM","KTCK-AM","WJR-AM1","WKQX-FM","KGO-AM1","KMJ-AF1","KQRS-FM","KSCS-FM","WBWN-FM","KPLX-FM","WPRO-AM","WBNQ-FM","KSAN-FM","WNTQ-FM","WWTN-FM","WQQK-FM","WWWQ-FM","KLIF-FM","WFMS-FM","WOKI-FM","WGFX-FM"];if(t._ampconfig&&t._ampconfig.settings&&(t._ampconfig.settings.syn_site_name&&u.indexOf(t._ampconfig.settings.syn_site_name.toUpperCase())>-1||t._ampconfig.settings.format&&t._ampconfig.settings.format.toLowerCase().indexOf("news")>-1)){var f="//static.solutionshindsight.net/teju-webclient/teju-webclient.min.js",h=d.script(f);c.appendChild(h),log("Hindsight injected")}}}(jQuery,window.self),function($,t,e){function log(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(n+" v"+o,arguments)}var n="W7M Ad Tag Injector",o="0.4",i="6717",a="dfp-w7mtag",r=t.document;if(!t.hasOwnProperty("googletag"))return log('DFP library must be included and "googletag" window variable must be available before including this library.'),!1;t._CMLS.autoRefreshAdsExclusion=t._CMLS.autoRefreshAdsExclusion||[],t._CMLS.autoRefreshAdsExclusion.push(a),t._CMLS.W7M_REQUESTED=!1,$((function(){var e=t._CMLS.adTag;e.queue((function(){if(r.getElementById(a))log("Element already injected, exiting.");else{log("Discovering local site ad path.");var n=null;try{var o,i=e.rawInterface().pubads().getSlots();for(var l in i){var s=i[l].getSlotId().getName();if(s&&s.indexOf("/6717/")>-1){n=s;break}}for(var d in i)i[d].getSlotElementId()===a&&(log("Destroying existing slot"),e.rawInterface().destroySlots([i[d]]));if(null===n)throw{message:"Could not retrieve ad unit path."}}catch(t){return void log("Failed to retrieve DFP properties.",t)}log("Ad path found, defining new slot.",n);var c=e.defineSlot([n,[[1,1]],a],!0,{pos:"w7m"},!0),g;t.GPT_SITE_SLOTS=t.GPT_SITE_SLOTS||{},t.GPT_SITE_SLOTS[a]=c,e.addListener("slotRequested",(function(e){var n=e.slot;n.getSlotElementId()===a&&(t.self._CMLS=t.self._CMLS||{},t.self._CMLS.W7M_REQUESTED=!0,log("Our slot was requested.",n))})),log("Defined slot",c,t.GPT_SITE_SLOTS),$('\n\t\t\t\t<div id="dfp-w7mtag" style="height: 0;">\n\t\t\t\t\t<script>\n\t\t\t\t\t\tgoogletag.cmd.push(function() {\n\t\t\t\t\t\t\tgoogletag.display("dfp-w7mtag");\n\t\t\t\t\t\t});\n\t\t\t\t\t\tgoogletag.cmd.push(function() {\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tgoogletag.pubads().isInitialLoadDisabled()\n\t\t\t\t\t\t\t\t\t&& window.self._CMLS\n\t\t\t\t\t\t\t\t\t&& ! window.self._CMLS.W7M_REQUESTED\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tgoogletag.pubads().refresh([window.self.GPT_SITE_SLOTS["dfp-w7mtag"]]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t<\/script>\n\t\t\t\t</div>\n\t\t\t').prependTo("body"),log("Ad tag appended to body with ID",a)}}))}))}(jQuery,window.self),function($,t,e){function log(){t._CMLS.logger(n+" v"+i,arguments)}function fireEvent(t){try{log("Event fired: "+t),sharedContainerDataLayer.push({event:t}),corpDataLayer.push({event:t})}catch(t){}}var n="GTM STREAM TRACKING",o="GTMStreamTracker",i="0.3";t._CMLS[o]=!0,t.top.tgmp&&t.top.tgmp.addEventListener?t._CMLS[o]?log("Already loaded, ejecting."):(t.top.tgmp.addEventListener(t.top.TGMP_EVENTS.streamplaying,(function(t){!0===t?(log("Stream started."),fireEvent("siteplayer-stream-playing")):!1===t&&(log("Stream stopped."),fireEvent("siteplayer-stream-stopped"))})),t.addEventListener("td-player.playing",(function(){fireEvent("siteplayer-stream-playing")})),t.addEventListener("td-player.stopped",(function(){fireEvent("siteplayer-stream-stopped")})),log("Initialized.")):log("TGMP not available or not able to listen to events.")}(jQuery,window),function(t,e){function log(){window._CMLS.logger(n+" v"+i,arguments)}function fireEvent(t,e,n){try{log("Event fired: "+t,e,n),sharedContainerDataLayer.push({event:t,"page-visible":e,"page-visible-time-change":n}),corpDataLayer.push({event:t,"page-visible":e,"page-visible-time-change":n})}catch(t){}}function handleVisibilityChange(e){var n=Math.round((t._CMLS.now()-l)/1e3);e||(e=t.document[a]?"hidden":"visible"),window._CMLS.tabVisible=e,fireEvent("page-visibility",e,n),l=t._CMLS.now()}var n="GTM TAB VISIBILITY TRACKING",o="GTMTabVisibilityTracker",i="0.1",a,r;window._CMLS[o]={},void 0!==t.document.hidden?(a="hidden",r="visibilitychange"):void 0!==t.document.mozHidden?(a="mozHidden",r="mozvisibilitychange"):void 0!==t.document.msHidden?(a="msHidden",r="msvisibilitychange"):void 0!==t.document.webkitHidden?(a="webkitHidden",r="webkitvisibilitychange"):void 0!==t.document.oHidden&&(a="oHidden",r="ovisibilitychange");var l=t._CMLS.now();t.document.addEventListener(r,(function(){handleVisibilityChange()}),!1)}(window.self),function(t,e){function log(){t._CMLS&&t._CMLS.logger&&t._CMLS.logger(n+" v"+o,arguments)}function AutoReloader(){function checkCondition(){var e=t.top.document.querySelector('iframe#page_frame,iframe[name="pwm_pageFrame"]');return a.type===t._CMLS.const.PLAYER_TUNEGENIE&&e&&e.contentWindow?e.contentWindow.document.querySelector(n.condition):t.document.querySelector(n.condition)}function getDateWithOffset(t){return new Date(Date.now()+t)}var e={condition:"body.home",timeout:8},n=e,o,i,a=t._CMLS.whichPlayer(),r=this;this.start=function(a){log("Starting timer.",a),r.stop(),n={condition:a.condition||e.condition,timeout:a.timeout||e.timeout},checkCondition()?(log("Starting countdown, reloading at "+(i=getDateWithOffset(6e4*n.timeout))),t._CMLS.autoReload&&(t._CMLS.autoReload.active=!0),o=setInterval(r.tick,1e4)):log("Condition check failed at start.")},this.stop=function(){o&&(log("Stopping timer."),clearInterval(o),o=null,t._CMLS.autoReload&&(t._CMLS.autoReload.active=!1))},this.tick=function(){Date.now()>i.getTime()&&r.fire()},this.fire=function(){if(r.stop(),checkCondition()){var e=t.location.protocol,n=t.location.hostname,o=t.location.href.replace(e+"//"+n,"");if(o.length<1&&(o="/"),a.type===t._CMLS.const.PLAYER_TRITON&&t.History&&t.History.Adapter)return log("Reloading through Triton Player."),void t.History.Adapter.trigger(t,"statechange");if(a.type===t._CMLS.const.PLAYER_TUNEGENIE){var i=t.top.document.querySelector('iframe#page_frame,iframe[name="pwm_pageFrame"]');return i&&i.contentWindow?(log("Reloading through TuneGenie Player frame."),void i.contentWindow.tgmp.updateLocation(o)):(log("Reloading through TuneGenie Player."),void t.tgmp.updateLocation(o))}}else log("Condition check failed before firing, timer stopped.")},this.push=function(t){log("Received request.",t),r.start(t)}}var n="AUTO-RELOAD PAGE",o="0.12",i;t._CMLS&&(t._CMLS.autoReload&&t._CMLS.autoReload.constructor===Array&&t._CMLS.autoReload.length&&(log("Loaded with request.",t._CMLS.autoReload),i=t._CMLS.autoReload[t._CMLS.autoReload.length-1]),t._CMLS.autoReload&&t._CMLS.autoReload.constructor!==Array||(t._CMLS.autoReload=new AutoReloader)),log("Initialized."),i&&t._CMLS.autoReload.push(i)}(window.top),function($,t,e){$((function(){t.NO_ADDTHIS_HERE&&$(".addthis-smartlayers").hide()})),t.self!==t.top?t.top.destroyAddThis&&t.top.destroyAddThis():t.top.destroyAddThis=function(){$(t.top.document.querySelectorAll(".addthis-smartlayers")).hide()}}(jQuery,window),function($,t,e){function log(){t.top._CMLS&&t.top._CMLS.logger&&t.top._CMLS.logger(n+" v"+i,arguments)}var n="ADDTHIS INJECTOR",o="addThisInjector",i="0.6.17",a="ra-55dc79597bae383e";if(t.self.addthis&&t.self.addthis_config&&t.self.addthis_config.pubid&&t.self.addthis_config.pubid!==a)log("AddThis already loaded by local page.");else if(t.self.NO_ADDTHIS_HERE)log("NO_ADDTHIS_HERE found, will not build.");else if(t.top._CMLS&&t.top._CMLS.hasOwnProperty("isHomepage")&&t.top._CMLS.isHomepage(t.self))log("Will not build on homepage, exiting.");else{t.self.addthis_config=t.self.addthis_config||{},t.self.addthis_config.pubid=a,log("Building addthis script.");var r=t.self.document.createElement("script");r.onload=function(){},r.src="//s7.addthis.com/js/300/addthis_widget.js#domready=1&amp;pubid="+a,r.id=o+"-script",r.async=!0,t.self.document.body.appendChild(r),log("Injected.")}}(jQuery,window.self),function($,t,e){function log(){a.logger(n+" v"+i,arguments)}var n="BREAKING NEWS BAR",o="BreakingNews",i="0.7",a=t._CMLS||{};Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),a[o]=function(e,n){log("Called",typeof e,e,n);var o={classPrefix:"cmlsBreakingNews",additionalClass:"",position:"above",link:"",target:"_top",beforeText:"Breaking News:",text:"",background:"#900",hoverBackground:"#600",color:"#fff"},i,r=".wrapper-header";if($(r).length){if("object"!=typeof e||Array.isArray(e))if("object"==typeof e&&Array.isArray(e)&&e.length)(i=o).text=e[0],e.length>1&&(n=e[1]),log("Basic mode!");else{if("object"==typeof e)return void log("Invalid usage!",e,n);(i=o).text=e,log("Basic mode!")}else i=$.extend({},o,e),log("Advanced mode!");!i.link&&n&&(i.link=n),log("Settings:",i);var l="."+i.classPrefix+"-container { display: block; box-sizing: border-box; position: relative; float: none; overflow: hidden; z-index: 10; padding: 1em; color: #fff; background: #900; box-shadow: 0 0 10px rgba(0,0,0,0.4); font-size: 14px; line-height: 1.2; text-decoration: none; outline: 0 }."+i.classPrefix+"-container > a { display: block; color: inherit !important; cursor: pointer; padding: 1em; margin: -1em; }."+i.classPrefix+"-container > a:hover ."+i.classPrefix+"-before { text-decoration: underline; }."+i.classPrefix+"-inner { box-sizing: border-box; max-width: 1020px; margin: 0 auto; }."+i.classPrefix+"-inner_link:hover { background-color: "+i.hoverBackground+"; }."+i.classPrefix+"-before { float: left; font-weight: bold; margin-right: .5em; }."+i.classPrefix+"-text { overflow: hidden; }."+i.classPrefix+"-inner a { text-decoration: underline !important; color: inherit; }@media (max-width: 500px) {."+i.classPrefix+"-before { float: none; margin-bottom: .25em; }}",s='<div class="'+i.classPrefix+'-container"><div class="'+i.classPrefix+'-inner">{{BEFORE}}<div class="'+i.classPrefix+'-text">{{TEXT}}</div></div></div>';if(i.beforeText&&i.beforeText.length){var d='<div class="'+i.classPrefix+'-before">'+i.beforeText+"</div>";s=s.replace("{{BEFORE}}",d)}else s=s.replace("{{BEFORE}}","");if(s=$(s.replace("{{TEXT}}",i.text)),i.link&&i.link.length){var c=$("<a></a>").prop({href:i.link,target:i.target,className:i.classPrefix+"-inner_link"});s.wrapInner(c)}s.css({background:i.background,color:i.color}),s.addClass(i.additionalClass).prop("id","CMLSBreakingNews-"+Math.floor(1e7*Math.random())),$("#cmlsBreakingNewsStyles").length||$("head").append('<style id="cmlsBreakingNewsStyles">/* CMLS Breaking News Bar styles */\n'+l+"</style>"),"below"===i.position?($(r).after(s),$("#cmlsBreakingNewsStyles").append(".takeover-left,.takeover-right,.skyscraper-left,.skyscraper-right { transform: translateY("+s.outerHeight()+"px); }")):$(r).before(s),a.navThroughPlayer&&(log("Applying navThroughPlayer to bar links."),s.find('a:not([href]),a[target="_self"],a[target="_top"],a[target="_parent"]').each((function(){log("Applying navThroughPlayer to a link.",this.href),a.navThroughPlayer.updateLink($(this))}))),"above"===i.position&&(t.DO_NOT_AUTO_SCROLL=!0)}};var BNInjector=function(){};BNInjector.prototype=[],BNInjector.prototype.push=function(){log("Received after-load request.",arguments),a[o].apply(null,arguments)},t._CMLSBreakingNews&&t._CMLSBreakingNews.length&&t._CMLSBreakingNews.forEach(a[o]),t._CMLSBreakingNews=new BNInjector}(jQuery,window.self),function($,t,e){function log(){t._CMLS.logger(n+" v"+i,arguments)}function initSocialListenLive(e){function playStream(e){e.preventDefault(),log("Playing stream..."),t.top.tgmp_default_brand&&t.top.tgmp.options.brand!==t.top.tgmp_default_brand?t.top.tgmp.update({brand:t.top.tgmp_default_brand,theme:t.top.tgmp_default_theme,autostart:!0}):t.tgmp.playStream()}if(!t.top.tgmp)return e<11?(log("TuneGenie player not found, checking again in 1s. ("+e+" tries)"),setTimeout((function(){initSocialListenLive(++e)}),1e3)):void log("TuneGenie player not enabled.");log("Storing TGMP default configuration."),t.top.tgmp_default_brand=t.top.tgmp_default_brand||""+t.top.tgmp.options.brand,t.top.tgmp_default_theme=t.top_tgmp_default_theme||t.top.tgmp.options.theme;var n='.block-type-social a:has(img[title="Listen Live!!"]),.block-type-social a:has(img[alt="Listen Live!!"]),.block-type-social a[title="Listen Live!!"],.block-type-social a[alt="Listen Live!!"],.nav-listenlive a,.nav-listenlive img,.cmlistenlive-start';$("body").off("click",n,playStream).on("click",n,playStream),log("Social Listen Live button activated.")}var n="SOCIAL LISTEN LIVE LINK",o="socialListenLiveLink",i="0.5";t._CMLS=t._CMLS||{},log("Starting..."),$(initSocialListenLive(1)),t._CMLS[o]=i,log("Initialized.")}(jQuery,window.self),function($,t,e){function log(){t._CMLS&&t._CMLS.logger&&t._CMLS.logger(n+" v"+o,arguments)}function parseCommand(t,e,n){var o={brand:t,autostart:!1};return n&&/\d+/.test(n)&&(o.theme=["#"+n]),e&&(o.autostart=!0),o}t._CMLS=t._CMLS||{};var n="SWITCHSTREAM LINKS",o="0.16";t._CMLS.switchTGMPStream=function(e,n,o){var i=t.tgmp||t.top.tgmp||null,a=parseCommand(e,n,o);i&&(log("Switching stream",a),i.update(a))},log("Initializing switchstream links on page."),$((function(){var e;$('.tgmp-switchstream,img[alt*="tgmp-switchstream"],a[alt*="tgmp-switchstream"],a[href*="tgmp-switchstream"]').each((function(){function getVars(t){return log("Requested vars",t),{brand:t.indexOf("tgmp-streamid")>-1?t.match(/tgmp\-streamid\-(\w+)/i)[1]:null,theme:t.indexOf("tgmp-theme")>-1?["#"+t.match(/tgmp\-theme\-([a-z0-9]+)/i)[1]]:null,autostart:t.indexOf("tgmp-autostart")>-1}}var t=$(this),e=t.attr("alt"),n=t.attr("href"),o={brand:null,theme:null,autostart:!1};if(t.hasClass("tgmp-switchstream")){var i=t.attr("class");log("Using element classes",i),o=getVars(i)}if(e&&e.indexOf("tgmp-switchstream")>-1&&(log("Using element alt attribute",e),o=getVars(e)),n&&n.indexOf("tgmp-switchstream")>-1&&(log("Using element href",n),o=getVars(n)),!o.brand||o.brand.length<2)return log("No brand provided, exiting."),!1;t.data("tgmp-switchstream",o)})).on("click.cmls-tg-switchstream",(function(e){e.preventDefault();var n,o=$(this).data("tgmp-switchstream"),i=t.tgmp||t.top.tgmp||null;o?i?(log("Switching stream",o),i.update(o)):log("TGMP not available!"):log("Link was not initialized, exiting")}))}))}(jQuery,window.self),function(t){function log(){t.top._CMLS&&t.top._CMLS.hasOwnProperty("logger")&&t.top._CMLS.logger(e+" v"+o,arguments)}function GlobalizeSGroups(){var e=0,n=0,o=this;this.fireEvents=function(e){t.sharedContainerDataLayer.push({event:e}),t.corpDataLayer.push({event:e}),t._CMLS.triggerEvent(t,"cms-sgroup",e)},this.globalize=function(){if(!t._CMLS.adTag.pubads()||!t._CMLS.adTag.pubads().getTargeting("cms-sgroup"))return e>10?(log("TERMINATING. Could not retrieve page targeting in a reasonable time."),!1):(log("DFP is not ready, waiting to retry...","Cycles: "+e),clearTimeout(n),n=null,n=setTimeout(o.globalize,500),void e++);t._CMLS.cGroups=t._CMLS.adTag.pubads().getTargeting("cms-sgroup")||[],t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[];var i=!1;t._CMLS.cGroups.forEach((function(t){log("Firing cms-sgroup event",t),o.fireEvents(t),t.indexOf("Westwood One")>-1&&(i=!0)})),!0===i?o.fireEvents("Westwood One Property"):o.fireEvents("Cumulus Owned and Operated")},o.globalize()}var e="GLOBALIZE SGROUPS",n="globalizeSGroups",o="0.6";t._CMLS[n]?log("Already registered."):t._CMLS.adTag.queue((function(){log("adTag command queue initiated."),t._CMLS[n]=new GlobalizeSGroups}))}(window.self);
//# sourceMappingURL=compiled-allsites-min.js.map