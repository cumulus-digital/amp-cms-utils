!function(t,n){t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS.LOADED=!0,t._CMLS["const"]=t._CMLS["const"]||{},t._CMLS.isHomepage=function(){return"/"===t.location.pathname&&/[\?&]?p=/i.test(t.location.search)===!1},t._CMLS.now=Date.now||function(){return(new Date).getTime()})}(window),function(t,n){t._CMLS.log=function e(){var n=t._CMLS.log;if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;n.colorCache=n.colorCache||{};var e,o,a=arguments[0],r=[].slice.call(arguments[1]);n.colorCache[a]?(e=n.colorCache[a].background,o=n.colorCache[a].complement):(e=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),o=parseInt(e,16)>=12303291?"000000":"FFFFFF",n.colorCache[a]={background:e,complement:o});var i=new Date;i=i.toISOString()?i.toISOString():i.toUTCString();var s=["%c["+a+"]","background: #"+e+"; color: #"+o];r=s.concat(r),console.groupCollapsed.apply(console,r),console.log("TIMESTAMP:",i),console.trace(),console.groupEnd()}}(window),function(t,n){t._CMLS.triggerEvent=function(n,e,o){var a;t.document.createEvent?(a=t.document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,o)):a=new CustomEvent(e,{detail:o}),n.dispatchEvent(a)}}(window),function(t,n){t._CMLS.throttle=function(n,e,o){var a,r,i,s=null,c=0;o||(o={});var l=function(){c=o.leading===!1?0:t._CMLS.now(),s=null,i=n.apply(a,r),s||(a=r=null)};return function(){var u=t._CMLS.now();c||o.leading!==!1||(c=u);var g=e-(u-c);return a=this,r=arguments,0>=g||g>e?(s&&(clearTimeout(s),s=null),c=u,i=n.apply(a,r),s||(a=r=null)):s||o.trailing===!1||(s=setTimeout(l,g)),i}}}(window),function(t,n){t._CMLS.debounce=function(n,e,o){var a,r,i,s,c,l=function(){var u=t._CMLS.now()-s;e>u&&u>=0?a=setTimeout(l,e-u):(a=null,o||(c=n.apply(i,r),a||(i=r=null)))},u=function(){i=this,r=arguments,s=t._CMLS.now();var u=o&&!a;return a||(a=setTimeout(l,e)),u&&(c=n.apply(i,r),i=r=null),c};return u.clear=function(){clearTimeout(a),a=i=r=null},u}}(window),function(t,n){function e(){s.log(a+" v"+i,arguments)}function o(){var n;t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){var o=t.googletag.pubads();for(var a in o)if(o[a].hasOwnProperty("cms-sgroup")){n=o[a]["cms-sgroup"];break}if(n){e("s-groups acquired!"),s.sGroups=n;var r=["cms-sgroup"].concat(s.sGroups);t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[],e("Firing events.");for(var i in r)r.hasOwnProperty(i)&&(t.sharedContainerDataLayer.push({event:r[i]}),t.corpDataLayer.push({event:r[i]}),s.triggerEvent(t,"cms-sgroup",r[i]))}})}var a="GLOBALIZE SGROUPS",r="globalizeSGroups",i="0.6",s=t._CMLS||{};s[r]||(e("Initializing."),s[r]=new o)}(window),function(t,n){t._CMLS["const"].PLAYER_TUNEGENIE=8471,t._CMLS["const"].PLAYER_TRITON=8468,t._CMLS["const"].PLAYER_POSITION_TOP=80847980,t._CMLS["const"].PLAYER_POSITION_BOTTOM=80667984,t._CMLS.whichPlayer=function(){if(t._CMLS.whichPlayer.cache)return t._CMLS.whichPlayer.cache;var n={type:null,position:null};return t.tgmp?(t._CMLS.log("COMMON",["Found TuneGenie player."]),n.type=t._CMLS["const"].PLAYER_TUNEGENIE,t.tgmp.options.position&&"bottom"===t.tgmp.options.position.toLowerCase()?(t._CMLS.log("COMMON",["TuneGenie player is on the bottom."]),n.position=t._CMLS["const"].PLAYER_POSITION_BOTTOM):t.tgmp.options.position&&"top"===t.tgmp.options.position.toLowerCase()&&(t._CMLS.log("COMMON",["TuneGenie player is on the top."]),n.position=t._CMLS["const"].PLAYER_POSITION_TOP)):t.TDPW&&(t._CMLS.log("COMMON",["Found Triton player, assuming it's on top."]),n.type=t._CMLS["const"].PLAYER_TRITON,n.position=t._CMLS["const"].PLAYER_POSITION_TOP),t._CMLS.whichPlayer.cache=n,t._CMLS.whichPlayer.cache}}(window),function(t,n){function e(){t._CMLS.log(i+" v"+c,arguments)}function o(){this.trackChange=function(n){e("Track has changed.",n),l.triggerEvent(t,"cmls-player.trackchange",n)},this.playing=function(){e("Player is streaming."),l.triggerEvent(t,"cmls-player.playing")},this.stopped=function(){e("Player is stopped."),l.triggerEvent(t,"cmls-player.stopped")}}function a(){var n=new o;t.tgmp.addEventListener(t.tgmp.TGMP_EVENTS.nowplaying,function(t){n.trackChange(t)}),t.tgmp.addEventListener(t.tgmp.TGMP_EVENTS.streamplaying,function(t){t===!0?n.playing():n.stopped()})}function r(){var n={},a,r=2500,i={PLAYING:1,STOPPED:0},s=new o,c=this;return this.checkCurrentTrack=function(){var n=localStorage&&JSON?JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state")):!1;return n&&n.data?(n.data.stream&&"LIVE_PLAYING"===n.data.stream.code.toUpperCase()?c.setState(i.PLAYING):c.setState(i.STOPPED),n.data.song&&n.data.song.id&&c.hasTrackChanged(n.data.song.id)&&c.trackHasChanged(n.data.song),!0):!1},this.setState=function(t){if(t!==n.state){switch(t){case i.PLAYING:s.playing();break;default:s.stopped()}n.state=t}},this.hasTrackChanged=function(t){return t&&t!==n.trackId?!0:!1},this.trackHasChanged=function(t){n.trackId=t.id,s.trackChange(t)},this.startTimer=function(){clearTimeout(a),a=null,a=setTimeout(function(){c.checkCurrentTrack(),c.startTimer()},r)},e("Initializing."),t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),e("Initialized."),this):(e("Player configuration not available, exiting."),!1)}var i="PLAYER WATCH",s="playerWatch",c="0.6",l=t._CMLS;if(l[s])return!1;var u=l.whichPlayer();u.type===l["const"].PLAYER_TRITON&&(l[s]=new r,e("Triton player tracker enabled.")),u.type===l["const"].PLAYER_TUNEGENIE&&(l[s]=new a,e("TuneGenie player tracker enabled."))}(window),function(t,n){function e(){t._CMLS.log(r+" v"+s,arguments)}function o(){var n=l.whichPlayer(),o=null,a=this;this.timeout=l.autoRefreshAdsTimer||c,this.checkConditions=function(){return l.autoReloader&&l.autoReloader.active?(e("Autoreloader is active, conditions fail."),!1):!0},this.stop=function(){return e("Stopping timer."),clearTimeout(o),o=null,a},this.start=function(){return a.stop(),a.checkConditions()?(e("Starting timer for "+a.timeout+" minute countdown."),a.timer=setTimeout(function(){a.fire()},6e4*a.timeout),!0):!1},this.fire=function(){return a.checkConditions()?void t.googletag.cmd.push(function(){e("Refreshing ads."),t.googletag.pubads().refresh(),a.start()}):!1},e("Initializing."),t.addEventListener("cmls-player.stopped",function(){a.stop()},!1),t.addEventListener("cmls-player.playing",function(){a.start()},!1),t.History&&t.History.Adapter&&t.History.Adapter.bind(t,"pageChange",function(){a.start()})}function a(){if(!l.sGroups)return void e("Init test called without sgroups available.");for(var t in l.sGroups)/Format\s+(.*Talk.*|Sports)/.test(l.sGroups[t])&&(e("Format is good."),l[i]=new o,u=!0)}var r="AUTO REFRESH ADS",i="autoRefreshAds",s="0.4",c=4,l=t._CMLS;if(!l[i]){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[];var u=!1;a(),t.addEventListener("cms-sgroup",function(){u||a()},!1)}}(window),function(t,n){function e(){t._CMLS.log(a+" v"+i,arguments)}function o(){var n=this;this.setDFPCriteria=function(n,o){t.googletag.cmd.push(function(){e("Setting targeting criteria.",n,o),t.googletag.pubads().setTargeting(n,o)})},t.addEventListener("cmls-player.playing",function(){e("Player is streaming."),n.setDFPCriteria("td-player-state","PLAYING")},!1),t.addEventListener("cmls-player.stopped",function(){e("Player has stopped."),n.setDFPCriteria("td-player-state","STOPPED")},!1),t.addEventListener("cmls-player.trackchange",function(t){e("Track has changed.",t),t.artist&&n.setDFPCriteria("td-player-artist",t.artist),t.album&&n.setDFPCriteria("td-player-album",t.album),t.title&&n.setDFPCriteria("td-player-track",t.title),t.id&&n.setDFPCriteria("td-player-id",t.id)}),e("Initialized.")}var a="PLAYER DFP INJECTOR",r="playerDFPInjector",i="0.1",s=t._CMLS||{};if(s[r])return!1;var c=s.whichPlayer();return c.type!==s["const"].PLAYER_TRITON?(e("Triton player not enabled."),!1):void(s[r]=new o)}(window),window._CMLS.log("COMMON",["LIBRARIES LOADED!\n                           .__                \n  ____  __ __  _____  __ __|  |  __ __  ______\n_/ ___\\|  |  \\/     \\|  |  \\  | |  |  \\/  ___/\n\\  \\___|  |  /  Y Y  \\  |  /  |_|  |  /___ \\ \n \\___  >____/|__|_|  /____/|____/____//____  >\n     \\/            \\/                      \\/ \n"]);
//# sourceMappingURL=./compiled-allsites-min.js.map