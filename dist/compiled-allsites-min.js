!function(t,e){t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS.LOADED=!0,t._CMLS["const"]=t._CMLS["const"]||{},t._CMLS.isHomepage=function(){return"/"===t.location.pathname&&/[\?&]?p=/i.test(t.location.search)===!1},t._CMLS.now=Date.now||function(){return(new Date).getTime()})}(window),function(t,e){t._CMLS.log=function n(){var e=t._CMLS.log;if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;e.colorCache=e.colorCache||{};var n,a,o=arguments[0],r=[].slice.call(arguments[1]);e.colorCache[o]?(n=e.colorCache[o].background,a=e.colorCache[o].complement):(n=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),a=parseInt(n,16)>=12303291?"000000":"FFFFFF",e.colorCache[o]={background:n,complement:a});var i=new Date;i=i.toISOString()?i.toISOString():i.toUTCString();var c=["%c["+o+"]","background: #"+n+"; color: #"+a];r=c.concat(r),console.groupCollapsed.apply(console,r),console.log("TIMESTAMP:",i),console.trace(),console.groupEnd()}}(window),function(t,e){t._CMLS.triggerEvent=function(e,n,a){var o;t.document.createEvent?(o=t.document.createEvent("CustomEvent"),o.initCustomEvent(n,!0,!0,a)):o=new CustomEvent(n,{detail:a}),e.dispatchEvent(o)}}(window),function(t,e){t._CMLS.throttle=function(e,n,a){var o,r,i,c=null,s=0;a||(a={});var l=function(){s=a.leading===!1?0:t._CMLS.now(),c=null,i=e.apply(o,r),c||(o=r=null)};return function(){var u=t._CMLS.now();s||a.leading!==!1||(s=u);var g=n-(u-s);return o=this,r=arguments,0>=g||g>n?(c&&(clearTimeout(c),c=null),s=u,i=e.apply(o,r),c||(o=r=null)):c||a.trailing===!1||(c=setTimeout(l,g)),i}}}(window),function(t,e){t._CMLS.debounce=function(e,n,a){var o,r,i,c,s,l=function(){var u=t._CMLS.now()-c;n>u&&u>=0?o=setTimeout(l,n-u):(o=null,a||(s=e.apply(i,r),o||(i=r=null)))},u=function(){i=this,r=arguments,c=t._CMLS.now();var u=a&&!o;return o||(o=setTimeout(l,n)),u&&(s=e.apply(i,r),i=r=null),s};return u.clear=function(){clearTimeout(o),o=i=r=null},u}}(window),function(t,e){function n(){c.log(o+" v"+i,arguments)}function a(){var e;t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){var a=t.googletag.pubads();for(var o in a)if(a[o].hasOwnProperty("cms-sgroup")){e=a[o]["cms-sgroup"];break}if(e){n("s-groups acquired!"),c.sGroups=e;var r=["cms-sgroup"].concat(c.sGroups);t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[],n("Firing events.");for(var i in r)r.hasOwnProperty(i)&&(t.sharedContainerDataLayer.push({event:r[i]}),t.corpDataLayer.push({event:r[i]}),c.triggerEvent(t,"cms-sgroup",r[i]))}})}var o="GLOBALIZE SGROUPS",r="globalizeSGroups",i="0.6",c=t._CMLS||{};c[r]||(n("Initializing."),c[r]=new a)}(window),function(t,e){var n=t._CMLS||{};n["const"].PLAYER_TUNEGENIE=8471,n["const"].PLAYER_TRITON=8468,n["const"].PLAYER_POSITION_TOP=80847980,n["const"].PLAYER_POSITION_BOTTOM=80667984,n.whichPlayer=function(){if(n.whichPlayer.cache)return n.whichPlayer.cache;var e={type:null,position:null};if(t.tgmp){n.log("COMMON",["Found TuneGenie player."]),e.type=n["const"].PLAYER_TUNEGENIE;var a=t.tgmp.options;a.position&&"bottom"===a.position.toLowerCase()?(n.log("COMMON",["TuneGenie player is on the bottom."]),e.position=n["const"].PLAYER_POSITION_BOTTOM):a.position&&"top"===a.position.toLowerCase()&&(n.log("COMMON",["TuneGenie player is on the top."]),e.position=n["const"].PLAYER_POSITION_TOP)}else t.TDPW&&(n.log("COMMON",["Found Triton player, assuming it's on top."]),e.type=n["const"].PLAYER_TRITON,e.position=n["const"].PLAYER_POSITION_TOP);return n.whichPlayer.cache=e,n.whichPlayer.cache}}(window),function(t,e){function n(){t._CMLS.log(i+" v"+s,arguments)}function a(){this.trackChange=function(e){n("Track has changed.",e),l.triggerEvent(t,"cmls-player.trackchange",e)},this.playing=function(){n("Player is streaming."),l.triggerEvent(t,"cmls-player.playing")},this.stopped=function(){n("Player is stopped."),l.triggerEvent(t,"cmls-player.stopped")}}function o(){var e=new a;t.tgmp.addEventListener(t.TGMP_EVENTS.nowplaying,function(t){e.trackChange(t)}),t.tgmp.addEventListener(t.TGMP_EVENTS.streamplaying,function(t){t===!0?e.playing():e.stopped()})}function r(){var e={},o,r=2500,i={PLAYING:1,STOPPED:0},c=new a,s=this;return this.checkCurrentTrack=function(){var e=localStorage&&JSON?JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state")):!1;return e&&e.data?(e.data.stream&&"LIVE_PLAYING"===e.data.stream.code.toUpperCase()?s.setState(i.PLAYING):s.setState(i.STOPPED),e.data.song&&e.data.song.id&&s.hasTrackChanged(e.data.song.id)&&s.trackHasChanged(e.data.song),!0):!1},this.setState=function(t){if(t!==e.state){switch(t){case i.PLAYING:c.playing();break;default:c.stopped()}e.state=t}},this.hasTrackChanged=function(t){return t&&t!==e.trackId?!0:!1},this.trackHasChanged=function(t){e.trackId=t.id,c.trackChange(t)},this.startTimer=function(){clearTimeout(o),o=null,o=setTimeout(function(){s.checkCurrentTrack(),s.startTimer()},r)},n("Initializing."),t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),n("Initialized."),this):(n("Player configuration not available, exiting."),!1)}var i="PLAYER WATCH",c="playerWatch",s="0.6",l=t._CMLS;if(l[c])return!1;var u=l.whichPlayer();u.type===l["const"].PLAYER_TRITON&&(l[c]=new r,n("Triton player tracker enabled.")),u.type===l["const"].PLAYER_TUNEGENIE&&(l[c]=new o,n("TuneGenie player tracker enabled."))}(window),function(t,e){function n(){t._CMLS.log(r+" v"+c,arguments)}function a(){var e=null,a=this;this.timeout=l.autoRefreshAdsTimer||s,this.checkConditions=function(){return l.autoReloader&&l.autoReloader.active?(n("Autoreloader is active, conditions fail."),!1):!0},this.stop=function(){return n("Stopping timer."),clearTimeout(e),e=null,a},this.start=function(){return a.stop(),a.checkConditions()?(n("Starting timer for "+a.timeout+" minute countdown."),a.timer=setTimeout(function(){a.fire()},6e4*a.timeout),!0):!1},this.fire=function(){return a.checkConditions()?void t.googletag.cmd.push(function(){n("Refreshing ads."),t.googletag.pubads().refresh(),a.start()}):!1},n("Initializing."),t.addEventListener("cmls-player.stopped",function(){a.stop()},!1),t.addEventListener("cmls-player.playing",function(){a.start()},!1),t.History&&t.History.Adapter&&t.History.Adapter.bind(t,"pageChange",function(){a.start()})}function o(){if(!l.sGroups)return void n("Init test called without sgroups available.");for(var t in l.sGroups)/Format\s+(.*Talk.*|Sports)/.test(l.sGroups[t])&&(n("Format is good."),l[i]=new a,u=!0)}var r="AUTO REFRESH ADS",i="autoRefreshAds",c="0.4",s=4,l=t._CMLS;if(!l[i]){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[];var u=!1;o(),t.addEventListener("cms-sgroup",function(){u||o()},!1)}}(window),function(t,e){function n(){t._CMLS.log(o+" v"+i,arguments)}function a(){var e=this;this.setDFPCriteria=function(e,a){t.googletag.cmd.push(function(){n("Setting targeting criteria.",e,a),t.googletag.pubads().setTargeting(e,a)})},t.addEventListener("cmls-player.playing",function(){n("Player is streaming."),e.setDFPCriteria("td-player-state","PLAYING")},!1),t.addEventListener("cmls-player.stopped",function(){n("Player has stopped."),e.setDFPCriteria("td-player-state","STOPPED")},!1),t.addEventListener("cmls-player.trackchange",function(t){n("Track has changed.",t),t.artist&&e.setDFPCriteria("td-player-artist",t.artist),t.album&&e.setDFPCriteria("td-player-album",t.album),t.title&&e.setDFPCriteria("td-player-track",t.title),t.id&&e.setDFPCriteria("td-player-id",t.id)}),n("Initialized.")}var o="PLAYER DFP INJECTOR",r="playerDFPInjector",i="0.1",c=t._CMLS||{};if(c[r])return!1;var s=c.whichPlayer();return s.type!==c["const"].PLAYER_TRITON?(n("Triton player not enabled."),!1):void(c[r]=new a)}(window),function($,t,e){function n(){s.log(r+" v"+c,arguments)}function a(){var e=this;this.updateIframe=function(t){var n=t.jquery?t:$(t);n.contents().find('a[target="_self"], a[target="_top"], a[target="_parent"]').each(function(){e.updateLink(this)})},this.updateLink=function(n,a){var o=n.jquery?n:$(n),r=t.document.createElement("a");return r.href=o.prop("href"),0===r.href.indexOf("/")||r.hostname!==t.location.hostname&&!a?void(r=null):(o.off("."+i).on("click."+i,e.clickThrough),void(r=null))},this.clickThrough=function(e){if(n("Intercepting click."),!e.currentTarget||e.currentTarget.href)return void n("Could not get href from target.");var a=e.currentTarget.href;if(l.type===s["const"].PLAYER_TRITON&&t.History)n("Navigating through Triton player.",a),t.History.pushState(null,null,a);else{if(l.type!==s["const"].PLAYER_TUNEGENIE||!t.tgmp)return;n("Navigating through TuneGenie player.",a),t.tgmp.updateLocation(a)}e.preventDefault()},n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){$(t).load(function(){$('iframe[id^="google_ads_iframe"], #cmlsWallpaperInjectorContainer iframe').each(function(){e.updateIframe(this)})}),t.googletag.pubads.addEventListener("slotRenderEnded",function(n){if(n&&n.slot){var a=n.slot.getSlotElementId(),o=t.document.getElementById(a);e.updateIframe(o)}}),n("Initialized.")})}function o(){return n("Checking for player, try:",u),l=s.whichPlayer(),l.type?void(s[i]=new a):u>20?void n("Limit reached, ejecting."):(setTimeout(o,1e3),void u++)}var r="NAV THROUGH PLAYER",i="navThroughPlayer",c="0.2",s=t._CMLS,l=s.whichPlayer();if(!s[i]){var u=0;o()}}(jQuery,window),window._CMLS.log("COMMON",["LIBRARIES LOADED!\n                           .__                \n  ____  __ __  _____  __ __|  |  __ __  ______\n_/ ___\\|  |  \\/     \\|  |  \\  | |  |  \\/  ___/\n\\  \\___|  |  /  Y Y  \\  |  /  |_|  |  /___ \\ \n \\___  >____/|__|_|  /____/|____/____//____  >\n     \\/            \\/                      \\/ \n"]);
//# sourceMappingURL=./compiled-allsites-min.js.map