!function(t,e){t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS["const"]=t._CMLS["const"]||{},t._CMLS["const"].PLAYER_TUNEGENIE=8471,t._CMLS["const"].PLAYER_TRITON=8468,t._CMLS["const"].PLAYER_POSITION_TOP=80847980,t._CMLS["const"].PLAYER_POSITION_BOTTOM=80667984,t._CMLS.logger=function i(){if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;t._CMLS.loggerNamesToColors=t._CMLS.loggerNamesToColors||{};var e,i,o=arguments[0],n=[].slice.call(arguments[1]);t._CMLS.loggerNamesToColors[o]?(e=t._CMLS.loggerNamesToColors[o].background,i=t._CMLS.loggerNamesToColors[o].complement):(e=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),i=parseInt(e,16)>=12303291?"000000":"FFFFFF",t._CMLS.loggerNamesToColors[o]={background:e,complement:i});var r=new Date;r=r.toISOString()?r.toISOString():r.toUTCString();var a=["%c["+o+"]","background: #"+e+"; color: #"+i];n=a.concat(n),console.groupCollapsed.apply(console,n),console.log("TIMESTAMP:",r),console.trace(),console.groupEnd()},t._CMLS.now=Date.now||function(){return(new Date).getTime()},t._CMLS.throttle=function(e,i,o){var n,r,a,s=null,c=0;o||(o={});var l=function(){c=o.leading===!1?0:t._CMLS.now(),s=null,a=e.apply(n,r),s||(n=r=null)};return function(){var d=t._CMLS.now();c||o.leading!==!1||(c=d);var g=i-(d-c);return n=this,r=arguments,0>=g||g>i?(s&&(clearTimeout(s),s=null),c=d,a=e.apply(n,r),s||(n=r=null)):s||o.trailing===!1||(s=setTimeout(l,g)),a}},t._CMLS.debounce=function(e,i,o){var n,r,a,s,c,l=function(){var d=t._CMLS.now()-s;i>d&&d>=0?n=setTimeout(l,i-d):(n=null,o||(c=e.apply(a,r),n||(a=r=null)))},d=function(){a=this,r=arguments,s=t._CMLS.now();var d=o&&!n;return n||(n=setTimeout(l,i)),d&&(c=e.apply(a,r),a=r=null),c};return d.clear=function(){clearTimeout(n),n=a=r=null},d},t._CMLS.whichPlayer=function(){if(t._CMLS.whichPlayerCache)return t._CMLS.whichPlayerCache;var e={type:null,position:null};return t.tgmp?(t._CMLS.logger("COMMON",["Found TuneGenie player."]),e.type=t._CMLS["const"].PLAYER_TUNEGENIE,t.tgmp.options.position&&"bottom"===t.tgmp.options.position.toLowerCase()?(t._CMLS.logger("COMMON",["TuneGenie player is on the bottom."]),e.position=t._CMLS["const"].PLAYER_POSITION_BOTTOM):t.tgmp.options.position&&"top"===t.tgmp.options.position.toLowerCase()&&(t._CMLS.logger("COMMON",["TuneGenie player is on the top."]),e.position=t._CMLS["const"].PLAYER_POSITION_TOP)):t.TDPW&&(t._CMLS.logger("COMMON",["Found Triton player, assuming it's on top."]),e.type=t._CMLS["const"].PLAYER_TRITON,e.position=t._CMLS["const"].PLAYER_POSITION_TOP),t._CMLS.whichPlayerCache=e,t._CMLS.whichPlayerCache},t._CMLS.isHomepage=function(){return"/"===t.location.pathname&&/[\?&]?p=/i.test(t.location.search)===!1},t._CMLS.triggerEvent=function(e,i,o){var n;t.document.createEvent?(n=t.document.createEvent("CustomEvent"),n.initCustomEvent(i,!0,!0,o)):n=new CustomEvent(i,{detail:o}),e.dispatchEvent(n)},t._CMLS.logger("COMMON",["LIBRARY LOADED!\n                           .__                \n  ____  __ __  _____  __ __|  |  __ __  ______\n_/ ___\\|  |  \\/     \\|  |  \\  | |  |  \\/  ___/\n\\  \\___|  |  /  Y Y  \\  |  /  |_|  |  /___ \\ \n \\___  >____/|__|_|  /____/|____/____//____  >\n     \\/            \\/                      \\/ \n"]),t._CMLS.LOADED=!0)}(window),function(t){function e(){t._CMLS.logger(i+" v"+n,arguments)}var i="GLOBALIZE SGROUPS",o="globalizeSGroups",n="0.5";t._CMLS[o]||(t._CMLS[o]={cycles:0,timer:null,globalize:function r(){var i;try{if(!t.googletag||!t.googletag.pubads())throw{message:"Googletag not yet ready."};var n=t.googletag.pubads();for(var r in n)if(n[r].hasOwnProperty("cms-sgroup")){i=n[r]["cms-sgroup"];break}}catch(a){return t._CMLS[o].cycles>10?void e("TERMINATING. Could not retrieve cms-sgroup in a reasonable time, aborting."):(e("Googletag not ready, waiting to retry..."),t._CMLS[o].timer&&(clearTimeout(t._CMLS[o].timer),t._CMLS[o].timer=null),t._CMLS[o].timer=setTimeout(t._CMLS[o].globalize,500),void t._CMLS[o].cycles++)}e("Globalizing cms-sgroup"),t._CMLS.cGroups=t._CMLS.cGroups||[],t._CMLS.cGroups=i;var s=["cms-sgroup"].concat(t._CMLS.cGroups);t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[],e("Firing events");for(var c=0,l=s.length;l>c;c++)t.sharedContainerDataLayer.push({event:s[c]}),t.corpDataLayer.push({event:s[c]}),t._CMLS.triggerEvent(t,"cms-sgroup",s[c])}},t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){e("Googletag command queue initiated."),t._CMLS[o].globalize()}))}(window,void 0),function($,t,e){function i(){t._CMLS.logger(n+" v"+a,arguments)}function o(){function e(t){if(t.format&&t.pid)switch(i("Received request for "+t.format+" with PID "+t.pid),t.format.toLowerCase()){case"inread":r(t.pid);break;case"inboard":n(t.pid)}else i("Invalid request. No pid or format given.",t)}function o(){var e=1020,i=1e3;return"number"==typeof t.innerWidth?e=t.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),e>1020&&(e=1020),"number"==typeof t.innerHeight?i=t.innerHeight:document.documentElement&&document.documentElement.clientHeight?i=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(i=document.body.clientHeight),{w:e,h:i}}function n(e){var i=o();c({pid:e,slot:".wrapper-content",filter:function(){return t.document.body.className.indexOf("home")>-1||t._CMLS.forceTeadsInBoard===!0},format:"inboard",before:!0,css:"margin: auto !important; padding-top: 5px; padding-bottom: 5px; max-width: 1020px",size:{w:i.w}})}function r(e){c({pid:e,slot:".wrapper-content .column-1 .entry-content p",filter:function(){return t.document.body.className.indexOf("single-feed_posts")>-1},format:"inread",before:!1,css:"padding-bottom: 10px !important;"})}function a(){i("Refreshing cache, re-inserting PID requests.");for(var e in l)if(l.hasOwnProperty(e)){for(var o=0;o<t._ttf.length;o++)t._ttf[o].pid===l[e].pid&&t._ttf.splice(o,1);l[e].launched=!1,c(l[e])}}function s(){$("#cmlsTeadsTag").remove(),function(t){var e,i=t.getElementsByTagName("script")[0];e=t.createElement("script"),e.async=!0,e.id="cmlsTeadsTag",e.src="http://cdn.teads.tv/js/all-v1.js",i.parentNode.insertBefore(e,i)}(t.document)}function c(e){return e.pid&&e.slot&&e.format?(e.components=e.components||{skip:{delay:0}},e.lang=e.lang||"en",e.filter=e.filter||function(){return!0},e.minSlot=e.minSlot||0,e.before=e.before||!1,e.BTF=e.BTF||!1,e.css=e.css||"margin: auto !important;",i("Injecting",e),t._ttf=t._ttf||[],t._ttf.push(e),s(),void(l[e.pid]=e)):(i("Invalid request. No pid, slot, or format given.",e),!1)}var l={};this.process=e,this.refreshCache=a;var d=function(){};if(d.prototype=[],d.prototype.push=function(){for(var t=0;t<arguments.length;t++)arguments[t].format&&arguments[t].pid&&e(arguments[t].format,arguments[t].pid)},t._teadsinjector&&t._teadsinjector.length)for(var g=0;g<t._teadsinjector.length;g++)e(t._teadsinjector[g]);t._teadsinjector=new d,i("Listening for future requests.")}var n="TEADS INJECTOR",r="teadsInjector",a="0.7";if(!t._CMLS[r]&&!t.teads){t._CMLS[r]=new o;var s=t._CMLS.whichPlayer();s&&s.type&&s.type===t._CMLS["const"].PLAYER_TRITON&&t.History&&t.History.Adapter&&(i("Binding refreshCache to pageChange event."),t.History.Adapter.bind(t,"pageChange",function(){$(t._CMLS[r].refreshCache)}))}}(jQuery,window),function(t,e){function i(){t._CMLS.logger(o+" v"+r,arguments)}var o="PLAYER WATCH",n="playerWatch",r="0.5";return t._CMLS[n]?!1:t.TDPW?(t._CMLS[n]={initialized:!1,cache:{},timer:null,interval:2500,"const":{STOPPED:0,PLAYING:1},setDFPCriteria:function a(e,o){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){i("Setting targeting",e,o),t.googletag.pubads().setTargeting(e,o)})},checkCurrentTrack:function s(){var e=localStorage&&JSON?JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state")):!1;e&&e.data&&(e.data.stream&&"LIVE_PLAYING"===e.data.stream.code.toUpperCase()?this.setState(this["const"].PLAYING):this.setState(this["const"].STOPPED),e.data.song&&e.data.song.id&&this.hasTrackChanged(e.data.song.id)&&this.trackHasChanged(e.data.song))},setState:function c(e){return e===this["const"].PLAYING&&e!==this.cache.state?(i("Player is streaming."),this.cache.state=e,this.setDFPCriteria("td-player-state","PLAYING"),void t._CMLS.triggerEvent(t,"td-player.playing")):e===this["const"].STOPPED&&e!==this.cache.state?(i("Player is stopped."),this.cache.state=e,this.setDFPCriteria("td-player-state","STOPPED"),void t._CMLS.triggerEvent(t,"td-player.stopped")):void 0},hasTrackChanged:function l(t){return t&&t!==this.cache.trackId?!0:!1},trackHasChanged:function d(e){i("Song has changed!",e),this.cache.trackId=e.id,e.artist&&this.setDFPCriteria("td-player-artist",e.artist),e.album&&this.setDFPCriteria("td-player-album",e.album),e.title&&this.setDFPCriteria("td-player-track",e.title),this.setDFPCriteria("td-player-id",e.id),t._CMLS.triggerEvent(t,"td-player.trackchange",e)},startTimer:function g(){var t=this;clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(function(){t.checkCurrentTrack(),t.startTimer()},this.interval)},init:function u(){return t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),this.initialized=!0,i("Initialized!",this.cache.trackId),this):(i("Player configuration not available, exiting."),!1)}},void t._CMLS[n].init()):(i("Triton player not enabled, exiting."),!1)}(window),function($,t,e){function i(){t._CMLS.logger(o+" v"+r,arguments)}if(!$||!$.fn.jquery)throw{message:"Auto-scroll script called without supplying jQuery."};var o="AUTO SCROLL",n="cmlsAutoScrollPastLeaderboard",r="0.7",a={timeout:.15,leaderboardSelector:'.wrapper-header div[id^="div-gpt-ad"]:first',leaderboardHeight:90};t._CMLS[n]||t.DO_NOT_AUTO_SCROLL||(t._CMLS[n]={scrolled:!1,disabled:!1,timer:null,cache:{},regenerateCache:function s(){this.cache.leaderboard=$(a.leaderboardSelector),this.cache.player=$("#tgmp_frame:first,.tdpw:first"),this.cache.window=$(t)},leaderboardOnTop:function c(){if(!this.cache.leaderboard)return i("Leaderboard was not cached."),!1;var t=this.cache.leaderboard.offset();return this.playerOnTop()?t.top<150:t.top<50},playerOnTop:function l(){var e=t._CMLS.whichPlayer();return e.position===t._CMLS["const"].PLAYER_POSITION_TOP?!0:!1},generateScrollToPosition:function d(){if(this.cache.leaderboard){var t=this.cache.leaderboard.offset(),e=t.top+a.leaderboardHeight;return t>a.leaderboardHeight+20?(i("Ad offset is greater than leaderboard height settings, assuming returned ad is incorrect."),a.leaderboardHeight+10):this.playerOnTop()?(e=t.top-this.cache.player.height()+a.leaderboardHeight,i("Player is on top, scrollTo position is "+e,t.top,this.cache.player.height(),this.cache.leaderboard.height()),e):(i("Player is on bottom, scrollTo position is "+e,t.top,this.cache.leaderboard.height()),e)}return 0},hasScrolledPastLeaderboard:function g(){return this.scrolled===!0?!0:this.cache.window.scrollTop()>=this.generateScrollToPosition()?(this.scrolled=!0,!0):!1},conditionsGood:function u(){return this.disabled||t.DO_NOT_AUTO_SCROLL?"Auto-scroll is disabled for this site.":t._CMLS.isHomepage()?this.leaderboardOnTop()?this.hasScrolledPastLeaderboard()?"Already scrolled passed leaderboard.":!0:"Leaderboard is not on top.":"Not on homepage."},scrollPage:function p(){var t=this;i("Pre-animation conditions check.");var e=this.conditionsGood();e!==!0&&(i("Conditions check failed.",e),this.stopTimer()),i("Conditions are good to scroll."),$("html,body").animate({scrollTop:t.generateScrollToPosition()},{queue:n,duration:550}).dequeue(n)},initTimer:function h(){i("Initializing scroll timer.");var t=this,e=t.conditionsGood();return e!==!0?(i("Conditions check after leaderboard render found bad conditions.",e),void t.stopTimer()):($("html,body").clearQueue(n).stop(n,!0),clearTimeout(this.timer),this.timer=null,void(this.timer=setTimeout(function(){t.scrollPage()},6e4*a.timeout)))},stopTimer:function f(){i("Stopping timer, clearing animation queue.",this.timer),$("html,body").clearQueue(n).stop(n,!0),clearTimeout(this.timer),this.timer=null},resetTimer:function m(){i("Resetting scroll timer."),this.initTimer()},init:function _(){i("Initializing auto-scroll library."),this.regenerateCache();var e=this,o=this.conditionsGood();return o!==!0?void i("Init check found bad conditions.",o):(this.cache.window.on("scroll."+n,t._CMLS.throttle(function(){e.hasScrolledPastLeaderboard()&&(e.scrolled=!0,e.stopTimer(),e.cache.window.off("scroll."+n))},500)),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function o(n){if(!n.isEmpty&&"top"===n.slot.getTargeting("pos")){i("Caught leaderboard render event."),e.regenerateCache();var r=e.conditionsGood();r!==!0?(i("Conditions check after leaderboard render found bad conditions.",r),e.stopTimer()):e.resetTimer(),t.googletag.pubads().removeEventListener("slotRenderEnded",o)}})}),"complete"===t.document.readyState?void this.initTimer():void this.cache.window.on("load",function(){e.initTimer()}))}},$(function(){t._CMLS[n].init()}))}(jQuery,window),function(t,e){function i(){t._CMLS.logger(n+" v"+a,arguments)}function o(){if(!t._CMLS.cGroups)return void i("Init test called without cGroups available, exiting.");for(var e=0;e<t._CMLS.cGroups.length;e++)/Format\s+(NewsTalk|Talk|Sports|Christian Talk)/i.test(t._CMLS.cGroups[e])&&(i("Running initialization."),t._CMLS[r].init(),s=!0)}var n="AUTO REFRESH ADS",r="autoRefreshAds",a="0.3";if(t._CMLS=t._CMLS||{},t._CMLS.autoRefreshAdsTimer=4,t._CMLS.autoRefreshAdsTimer=t._CMLS.autoRefreshAdsTimer||8,!t._CMLS[r]){t._CMLS[r]={player:t._CMLS.whichPlayer(),timer:null,boundToRenderEvent:!1,checkConditions:function c(){return t._CMLS.isHomepage()&&t._CMLS.autoReloader&&t._CMLS.autoReloader.active?(i("Autoreloader is active, conditions fail."),!1):!0},stop:function l(){return i("Stopping timer."),clearTimeout(this.timer),this.timer=null,this},start:function d(){if(this.stop(),this.checkConditions()){i("Starting timer at "+t._CMLS.autoRefreshAdsTimer+" minutes.");var e=this;return this.timer=setTimeout(function(){e.fire()},6e4*t._CMLS.autoRefreshAdsTimer),this}},fire:function g(){if(this.checkConditions()){var e=this;t.googletag.cmd.push(function(){i("Refreshing ads."),t.googletag.pubads().refresh(),e.start()})}},init:function u(){i("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],this.player.type===t._CMLS["const"].PLAYER_TRITON&&(t.addEventListener("td-player.stopped",function(){t._CMLS[r].stop()},!1),t.addEventListener("td-player.playing",function(){t._CMLS[r].start()},!1),t.History&&t.History.Adapter&&t.History.Adapter.bind(t,"pageChange",function(){t._CMLS[r].start()})),this.player.type===t._CMLS["const"].PLAYER_TUNEGENIE&&t.tgmp&&t.TGMP_EVENTS&&t.tgmp.addEventListener(t.TGMP_EVENTS.streamplaying,function(e){return e===!0?void t._CMLS[r].start():void t._CMLS[r].stop()}),i("Listeners set, waiting for player event."),i("Timer initialized at "+t._CMLS.autoRefreshAdsTimer+" minutes.")}};var s=!1;o(),t.addEventListener("cms-sgroup",function(){s||o()},!1)}}(window),function($,t,e){function i(){t._CMLS.logger(n+" v"+a,arguments)}function o(){return i("Checking for player...",c),t._CMLS[r].isPlayerActive()?void t._CMLS[r].init():void(c>20||(setTimeout(o,1e3),c++))}var n="NAV THROUGH PLAYER",r="navThroughPlayer",a="0.1",s=t._CMLS.whichPlayer();if(!t._CMLS[r]){t._CMLS[r]={isPlayerActive:function l(){return s=t._CMLS.whichPlayer(),s.type?!0:!1},updateIframeLinks:function d(e){if(t._CMLS[r].isPlayerActive){var o=e.jquery?e:$(e);o.contents().find('a[target="_self"],a[target="_top"],a[target="_parent"]').each(function(){i("Updating links in slot.",o.prop("id")),t._CMLS[r].updateLink(this)})}},updateLink:function g(e,i){if(t._CMLS[r].isPlayerActive&&e){var o=e.jquery?e:$(e),n=t.document.createElement("a");if(n.href=o.prop("href"),0===n.href.indexOf("/")||n.hostname!==t.location.hostname&&!i)return void(n=null);o.off("."+r).on("click."+r,t._CMLS[r].clickThrough),n=null}},clickThrough:function u(e){e&&t._CMLS[r].isPlayerActive()&&(e.preventDefault(),i("Intercepting click."),t._CMLS[r].navigate(e.currentTarget.href))},navigate:function p(e){s.type===t._CMLS["const"].PLAYER_TRITON&&t.History&&(i("Navigating through Triton player.",e),t.History.pushState(null,null,e)),s.type===t._CMLS["const"].PLAYER_TUNEGENIE&&t.top.tgmp&&(i("Navigating through TuneGenie player.",e),t.top.tgmp.updateLocation(e))},init:function h(){return t._CMLS[r].isPlayerActive()?(i("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(e){if(e&&e.slot){var i=e.slot.getSlotElementId(),o=t.document.getElementById(i);t._CMLS[r].updateIframeLinks(o)}})}),$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each(function(){t._CMLS[r].updateIframeLinks(this)}),$(t).load(function(){$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each(function(){t._CMLS[r].updateIframeLinks(this)})}),void i("Initialized.")):void i("No player is active, exiting.")}};var c=0;o()}}(jQuery,window),function($,t,e){function i(){t._CMLS.logger(r+" v"+s,arguments)}function o(o){function n(){var t,i=document.createElement("fakeelement"),o={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkittransitionend",msTransition:"mstransitionend"};for(t in o)if(i.style[t]!==e)return o[t]}function r(t){var e=0,i=t.length,o,n;if(0===i)return e;for(o=0;i>o;o++)n=t.charCodeAt(o),e=(e<<5)-e+n,e&=e;return e}function a(){return C.dfpSlot=$(o.dfpSlotNode),C.injectionNode=$(o.injectionNode),C.stickNode=$(o.stickNode),C.contentNode=$(o.contentNode),C.footerNode=$(o.footerNode),C.obstructiveNode=$(o.obstructiveNode),C.window=$(t),C.document=$(t.document),s(),C}function s(){return i("Refreshing stick position."),C.stickAt=C.stickNode.length?C.stickNode.offset().top:0,C.stickAt}function c(t){if(C.container&&C.container.length)return C.container;var e=$("#"+L+"Container");if(e.length)return C.container=e,C.container;if(t===!0)return!1;i("Generating new wallpaper container."),a();var o=$("<div />",{id:L+"Container","class":L+"-container"});return C.injectionNode.prepend(o),C.container=o,l(),C.container}function l(){var t=c(),e={content:C.contentNode.css(["position","zIndex"]),footer:C.footerNode.css(["position","zIndex"])};"static"===e.content.position&&(i("Setting content area position to relative."),C.contentNode.css("position","relative")),("auto"===e.content.zIndex||e.content.zIndex<=t.css("zIndex"))&&(i("Raising content area above wallpaper container."),C.contentNode.css("zIndex",t.css("zIndex")+1)),"static"===e.footer.position&&(i("Setting footer area position to relative."),C.footerNode.css("position","relative")),C.contentNode.data("originalStyles",e.content),C.footerNode.data("originalStyles",e.footer),i("Content area has been raised.")}function d(){i("Displaying wallpaper.");var t=c();t.off(y).addClass(L+"-open"),C.obstructiveNode.hide(),h()}function g(){function t(){r=!0,C.obstructiveNode.show(),i("Clearing all event listeners."),C.window.off("."+L),o&&o.length&&(i("Removing wallpaper container."),o.off("."+L).remove()),C.container=null,e.resolve()}var e=$.Deferred(),o=c(!0),n=o&&o.length?o.hasClass(L+"-open"):!1,r=!1;return i("RESET!"),o&&o.length?(o.off(y).removeData().removeProp("data").css("backgroundColor","rgba(0,0,0,0)").removeClass(L+"-open").removeClass(L+"-fixed"),i("Container is closing."),y&&n&&o.on(y,function(e){"opacity"===e.originalEvent.propertyName&&(i("Transition complete."),t())}),setTimeout(function(){r||t()},800)):t(),i("Returning our promise."),e.promise()}function u(){var t=c();return t.hasClass(L+"-fixed")}function p(t){var e=c();u()&&t===!1&&(i("Unfixing wallpaper position."),e.removeClass(L+"-fixed").css("top","0")),u()||t!==!0||(i("Fixing wallpaper position."),s(),e.addClass(L+"-fixed").css("top",C.stickAt))}function h(){function t(){var t=C.window.scrollTop(),e=C.injectionNode.length?C.injectionNode.offset().top:0;return e<t+C.stickAt?!0:!1}i("Initializing scroll tracking."),s(),p(t()?!0:!1),C.window.on("scroll."+L,v(function(){return t()?void p(!0):void p(!1)},50)),C.window.on("resize."+L,S(function(){s()},500)),i("Scroll tracking enabled.")}function f(){try{if($(o.contentNode).height()<200)return i("Content node is not ready, retrying."),void setTimeout(function(){f()},500);a(),i("Processing wallpaper slot.");var e=C.dfpSlot.find("iframe"),n=e.contents().find("#google_image_div,body").first(),s=n.find("a:first"),l=n.find("img.img_ad:first,img:first").first(),u=l.prop("alt");if(i("Checking image."),!l.length)return i("No image found in ad slot! Resetting."),void g();var p=c(),h=r((s.length?s.prop("href")+s.prop("target"):"")+l.prop("src"));if(i("Generated hash.",h),h===p.data("hash"))return void i("Requested wallpaper is already set.");i("Getting background color.",u);var m="rgba(255,255,255,0)",_=u.match(/(\#[A-Za-z0-9]+)/)||!1;_&&_.length>1&&(m=_[1]),i("Using background color.",m),g().then(function(){i("Building the new wallpaper.");var e="";s.length&&(e=$("<a />",{href:s.prop("href"),target:s.prop("target")}),t._CMLS.navThroughPlayer&&t._CMLS.navThroughPlayer.updateLink(e[0]));var o=$("<iframe />",{name:L+"Iframe",scrolling:"no",marginWidth:"0",marginHeight:"0",frameborder:"0"});i("Injecting iframe into container."),p=c(),p.data("hash",h).css("backgroundColor",m).append(o);var n='<style>html,body{background:transparent;margin:0;padding:0;width:100%;height:100%;}body{background:url("'+l.prop("src")+'") no-repeat top center;}a{display:block;width:100%;height:100%;text-decoration:none;}</style>';o.load(function(){i("Injecting wallpaper into iframe."),o.contents().find("body").append(n,e)}).prop("src","about:blank"),l.length?(i("Initializing preloader."),$("<img />").bind("load",function(){d(),$(this).remove()}).prop("src",l.prop("src"))):d()})}catch(v){console.log("WTF PEOPLE",v)}}function m(t){var e=t.slot.getTargeting("pos");return e.indexOf("wallpaper-ad")>-1?(i("Caught render event for wallpaper-ad",t.slot.getSlotElementId()),t.isEmpty?(i("Slot was empty, resetting wallpaper container."),g()):(i("Slot contained an ad, processing wallpaper."),f()),!1):void 0}function _(){$(t).off("."+L)}var C={},L=o.nameSpace||"wallpaperInjector",v=t._CMLS.throttle,S=t._CMLS.debounce,y=n();this.reset=g,this.process=f,this.unbindAllListeners=_,i("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(t){S(m(t),1e3)})});var M='<style id="'+L+'Styles">.'+L+"-container {display: block !important;position: absolute;z-index: 0;top: 0;left: 0;height: 0 !important;width: 100% !important;overflow: hidden;text-align: center;transition: opacity 0.5s, height 0.6s, background-color 0.4s;opacity: 0;}."+L+"-container iframe {border: 0;height: 100%;width: 100%;}."+L+"-container ~ .grid-container {transition: box-shadow 0.6s}."+L+"-open {height: 100% !important;opacity: 1;}."+L+"-open ~ .grid-container {box-shadow: 0 0 20px rgba(0,0,0,0.3);}."+L+"-fixed {position: fixed;}"+o.dfpSlotNode+" {display: none !important;}</style>";t.document.getElementById(L+"Styles")||$("head").append(M),"complete"===t.document.readyState||"loaded"===t.document.readyState?f():$(function(){f()})}var n={dfpSlotNode:"#div-gpt-ad-1418849849333-16",injectionNode:".wrapper-content",stickNode:".wrapper-header",contentNode:".wrapper-content .grid-container:first",footerNode:".wrapper-footer",obstructiveNode:".takeover-left, .takeover-right, .skyscraper-left, .skyscraper-right"},r="WALLPAPER INJECTOR",a="wallpaperInjector",s="0.5";t._CMLS[a],n.nameSpace=a,t._CMLS[a]=new o(n)}(jQuery,window),function(t,e){function i(){t._CMLS.logger(n+" v"+a,arguments)}function o(){t._CMLS.autoReload=new s}var n="AUTO-RELOADER",r="autoReloader",a="0.7";if(!t._CMLS[r]){t._CMLS[r]={condition:"body.home",timeout:48e4,active:!1,timer:null,player:t._CMLS.whichPlayer(),checkCondition:function c(){return t.document.querySelector(this.condition)?!0:!1},reset:function l(){i("Resetting."),clearTimeout(this.timer),this.timer=null,this.restart()},start:function d(){return this.checkCondition()?(i("Starting timer."),this.active=!0,void this.reset()):(i("Condition check failed, exiting."),this.active=!1,!1)},stop:function g(){i("Stopping timer."),this.active=!1,this.reset()},restart:function u(){if(this.active&&this.checkCondition()){i("Restarting timer.",this.timeout);var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.fire(),t.reset()},this.timeout)}else this.active=!1},destroy:function p(){i("Destroying timer."),this.stop()},fire:function h(){if(this.checkCondition()){if(i("Reloading the page."),this.player.type===t._CMLS["const"].PLAYER_TRITON)return void t.History.Adapter.trigger(t,"statechange");if(this.player.type===t._CMLS["const"].PLAYER_TUNEGENIE)return void t.tgmp.updateLocation(t.location.href);t.location.reload()}else i("Condition not met, self-destructing."),this.destroy()},init:function f(t){this.condition=t.condition||this.condition,this.timeout=6e4*t.timeout||this.timeout,this.start(),i("Initialized.",this.timeout,this.condition)}};var s=function(){};s.prototype=[],s.prototype._push=s.prototype.push,s.prototype.push=function(){for(var e=0;e<arguments.length;e++)this._push(arguments[e]);t._CMLS[r].init(this.slice(-1)[0]),o()},t._CMLS.autoReload&&t._CMLS.autoReload.length&&t._CMLS[r].init(t._CMLS.autoReload.slice(-1)[0]),o()}}(window),function(t,e){function i(){t._CMLS.logger(o+" v"+r,arguments)}var o="ADDTHIS INJECTOR",n="addThisInjector",r="0.4",a="ra-55dc79597bae383e";return t.addthis?void i("AddThis already loaded by page."):(t._CMLS[n]={inject:function s(){i("Injecting."),t.addthis_config=t.addthis_config||{},t.addthis_config.pubid=a;var e=t.document.createElement("script");e.onload=function(){return t._CMLS[n].active?void i("Already active."):void t._CMLS[n].buildLayer()},e.src="//s7.addthis.com/js/300/addthis_widget.js#async=1",e.id=n+"Script",e.async=!1,t.document.head.appendChild(e),i("Injected.")},buildLayer:function c(){return t.NO_ADDTHIS_HERE?void i("NO_ADDTHIS_HERE found in window object, will not build."):t._CMLS.isHomepage()?void i("Will not build layer on homepage."):(i("Building layer."),void(t.addthis&&t.addthis.layers?(t.addthis.layers({share:{position:"left",offset:{bottom:"100px"},services:"facebook,twitter,tumblr,email,more"}},function(e){t._CMLS[n].layer=e,t.addthis.layers.refresh(),i("Layer built.")}),t._CMLS[n].active=!0):i("AddThis not available!")))},destroyLayer:function l(){i("Destroying layer."),t.addthis&&t._CMLS[n].active&&t.addthis.layers(function(e){e.destroy(),t._CMLS[n].active=!1})},init:function d(){i("Initializing."),t.History&&t.History.Adapter&&(t.History.Adapter.bind(t,"statechange",t._CMLS[n].destroyLayer),t.History.Adapter.bind(t,"pageChange",t._CMLS[n].buildLayer)),this.inject(),i("Initialized!")}},void t._CMLS[n].init())}(window),function($,t,e){function i(){a.logger(o+" v"+r,arguments)}var o="BREAKING NEWS BAR",n="BreakingNews",r="0.7",a=t._CMLS||{};Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),a[n]=function(e,o){i("Called",typeof e,e,o);var r={classPrefix:"cmlsBreakingNews",additionalClass:"",position:"above",link:"",target:"_top",beforeText:"Breaking News:",text:"",background:"#900",color:"#fff"},s,c=".wrapper-header";if($(c).length){if("object"!=typeof e||Array.isArray(e))if("object"==typeof e&&Array.isArray(e)&&e.length)s=r,s.text=e[0],e.length>1&&(o=e[1]),i("Basic mode!");else{if("object"==typeof e)return void i("Invalid usage!",e,o);s=r,s.text=e,i("Basic mode!")}else s=$.extend({},r,e),i("Advanced mode!");!s.link&&o&&(s.link=o),i("Settings:",s);var l="."+s.classPrefix+"-container { display: block; box-sizing: border-box; position: relative; float: none; overflow: hidden; z-index: 10; padding: 1em; color: #fff; background: #900; box-shadow: 0 0 10px rgba(0,0,0,0.4); font-size: 14px; line-height: 1.2; text-decoration: none; outline: 0 }."+s.classPrefix+"-container > a { display: block; color: inherit !important; cursor: pointer; padding: 1em; margin: -1em; }."+s.classPrefix+"-container > a:hover ."+s.classPrefix+"-before { text-decoration: underline; }."+s.classPrefix+"-inner { box-sizing: border-box; max-width: 1020px; margin: 0 auto; }."+s.classPrefix+"-before { float: left; font-weight: bold; margin-right: .5em; }."+s.classPrefix+"-text { overflow: hidden; }."+s.classPrefix+"-inner a { text-decoration: underline !important; color: inherit; }@media (max-width: 500px) {."+s.classPrefix+"-before { float: none; margin-bottom: .25em; }}",d='<div class="'+s.classPrefix+'-container"><div class="'+s.classPrefix+'-inner">{{BEFORE}}<div class="'+s.classPrefix+'-text">{{TEXT}}</div></div></div>';if(s.beforeText&&s.beforeText.length){var g='<div class="'+s.classPrefix+'-before">'+s.beforeText+"</div>";d=d.replace("{{BEFORE}}",g)}if(d=$(d.replace("{{TEXT}}",s.text)),s.link&&s.link.length){var u=$("<a></a>").prop({href:s.link,target:s.target});d.wrapInner(u)}d.css({background:s.background,color:s.color}),d.addClass(s.additionalClass).prop("id","CMLS"+n+"-"+Math.floor(1e7*Math.random())),$("#cmlsBreakingNewsStyles").length||$("head").append('<style id="cmlsBreakingNewsStyles">/* CMLS Breaking News Bar styles */\n'+l+"</style>"),"below"===s.position?$(c).after(d):$(c).before(d),a.navThroughPlayer&&(i("Applying navThroughPlayer to bar links."),d.find('a:not([href]),a[target="_self"],a[target="_top"],a[target="_parent"]').each(function(){i("Applying navThroughPlayer to a link.",this.href),a.navThroughPlayer.updateLink($(this))})),"above"===s.position&&(t.DO_NOT_AUTO_SCROLL=!0)}};var s=function(){};s.prototype=[],s.prototype.push=function(){i("Received after-load request.",arguments),a[n].apply(null,arguments)},t["_CMLS"+n]&&t["_CMLS"+n].length&&t["_CMLS"+n].forEach(a[n]),t["_CMLS"+n]=new s}(jQuery,window),function($,t,e){function i(){t._CMLS.logger(o+" v"+r,arguments)}var o="SOCIAL LISTEN LIVE LINK",n="socialListenLiveLink",r="0.1";return t._CMLS=t._CMLS||{},t._CMLS[n]?void 0:t.tgmp?void $(function(){$('.social-icons img[title="Listen Live"]').parent("a").click(function(e){t.tgmp&&(e.preventDefault(),i("Playing stream..."),t.tgmp.playStream())}),i("Social Listen Live button activated.")}):void i("TuneGenie player not enabled, exiting.")}(jQuery,window);
//# sourceMappingURL=./compiled-allsites-min.js.map