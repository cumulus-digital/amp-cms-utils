!function(t,e){t._CMLS=t._CMLS||{},t._CMLS.LOADED||(t._CMLS["const"]=t._CMLS["const"]||{},t._CMLS["const"].PLAYER_TUNEGENIE=8471,t._CMLS["const"].PLAYER_TRITON=8468,t._CMLS["const"].PLAYER_POSITION_TOP=80847980,t._CMLS["const"].PLAYER_POSITION_BOTTOM=80667984,t._CMLS.logger=function n(){if(!t._CMLS||!t._CMLS.debug||"object"!=typeof console||!console.groupCollapsed)return!1;t._CMLS.loggerNamesToColors=t._CMLS.loggerNamesToColors||{};var e,n,o=arguments[0],i=[].slice.call(arguments[1]);t._CMLS.loggerNamesToColors[o]?(e=t._CMLS.loggerNamesToColors[o].background,n=t._CMLS.loggerNamesToColors[o].complement):(e=("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6),n=parseInt(e,16)>=12303291?"000000":"FFFFFF",t._CMLS.loggerNamesToColors[o]={background:e,complement:n});var r=new Date;r=r.toISOString()?r.toISOString():r.toUTCString();var a=["%c["+o+"]","background: #"+e+"; color: #"+n];i=a.concat(i),console.groupCollapsed.apply(console,i),console.log("TIMESTAMP:",r),console.trace(),console.groupEnd()},t._CMLS.now=Date.now||function(){return(new Date).getTime()},t._CMLS.throttle=function(e,n,o){var i,r,a,s=null,c=0;o||(o={});var l=function(){c=o.leading===!1?0:t._CMLS.now(),s=null,a=e.apply(i,r),s||(i=r=null)};return function(){var d=t._CMLS.now();c||o.leading!==!1||(c=d);var g=n-(d-c);return i=this,r=arguments,0>=g||g>n?(s&&(clearTimeout(s),s=null),c=d,a=e.apply(i,r),s||(i=r=null)):s||o.trailing===!1||(s=setTimeout(l,g)),a}},t._CMLS.debounce=function(e,n,o){var i,r,a,s,c,l=function(){var d=t._CMLS.now()-s;n>d&&d>=0?i=setTimeout(l,n-d):(i=null,o||(c=e.apply(a,r),i||(a=r=null)))},d=function(){a=this,r=arguments,s=t._CMLS.now();var d=o&&!i;return i||(i=setTimeout(l,n)),d&&(c=e.apply(a,r),a=r=null),c};return d.clear=function(){clearTimeout(i),i=a=r=null},d},t._CMLS.whichPlayer=function(){if(t._CMLS.whichPlayerCache)return t._CMLS.whichPlayerCache;var e={type:null,position:null};return t.tgmp?(t._CMLS.logger("COMMON","Found TuneGenie player."),e.type=t._CMLS["const"].PLAYER_TUNEGENIE,t.tgmp.options.position&&"bottom"===t.tgmp.options.position.toLowerCase()?(t._CMLS.logger("COMMON","TuneGenie player is on the bottom."),e.position=t._CMLS["const"].PLAYER_POSITION_BOTTOM):t.tgmp.options.position&&"top"===t.tgmp.options.position.toLowerCase()&&(t._CMLS.logger("COMMON","TuneGenie player is on the top."),e.position=t._CMLS["const"].PLAYER_POSITION_TOP)):t.TDPW&&(t._CMLS.logger("COMMON","Found Triton player, assuming it's on top."),e.type=t._CMLS["const"].PLAYER_TRITON,e.position=t._CMLS["const"].PLAYER_POSITION_TOP),t._CMLS.whichPlayerCache=e,t._CMLS.whichPlayerCache},t._CMLS.isHomepage=function(){return"/"===t.location.pathname&&/[\?&]?p=/i.test(t.location.search)===!1},t._CMLS.triggerEvent=function(e,n,o){var i;t.document.createEvent?(i=t.document.createEvent("CustomEvent"),i.initCustomEvent(n,!0,!0,o)):i=new CustomEvent(n,{detail:o}),e.dispatchEvent(i)},t._CMLS.LOADED=!0)}(window),function(t){function e(){t._CMLS.logger(n+" v"+i,arguments)}var n="GLOBALIZE SGROUPS",o="globalizeSGroups",i="0.5";t._CMLS[o]||(t._CMLS[o]={cycles:0,timer:null,globalize:function r(){if(!t.googletag.pubads().G||!t.googletag.pubads().G["cms-sgroup"])return t._CMLS[o].cycles>10?void e("Could not retrieve cms-sgroup in a reasonable time, aborting."):(e("Googletag not ready, waiting to retry..."),t._CMLS[o].timer&&(clearTimeout(t._CMLS[o].timer),t._CMLS[o].timer=null),t._CMLS[o].timer=setTimeout(t._CMLS[o].globalize,500),void t._CMLS[o].cycles++);e("Globalizing cms-sgroup"),t._CMLS.cGroups=t._CMLS.cGroups||[],t._CMLS.cGroups=t.googletag.pubads().G["cms-sgroup"];var n=["cms-sgroup"].concat(t._CMLS.cGroups);t.sharedContainerDataLayer=t.sharedContainerDataLayer||[],t.corpDataLayer=t.corpDataLayer||[],e("Firing events");for(var i=0,r=n.length;r>i;i++)t.sharedContainerDataLayer.push({event:n[i]}),t.corpDataLayer.push({event:n[i]}),t._CMLS.triggerEvent(t,"cms-sgroup",n[i])}},t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){e("Googletag command queue initiated."),t._CMLS[o].globalize()}))}(window,void 0),function($,t,e){function n(){t._CMLS.logger(i+" v"+a,arguments)}function o(){function e(t){if(t.format&&t.pid)switch(n("Received request for "+t.format+" with PID "+t.pid),t.format.toLowerCase()){case"inread":r(t.pid);break;case"inboard":i(t.pid)}else n("Invalid request. No pid or format given.",t)}function o(){var e=1020,n=1e3;return"number"==typeof t.innerWidth?e=t.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),e>1020&&(e=1020),"number"==typeof t.innerHeight?n=t.innerHeight:document.documentElement&&document.documentElement.clientHeight?n=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(n=document.body.clientHeight),{w:e,h:n}}function i(e){var n=o();c({pid:e,slot:".wrapper-content",filter:function(){return t.document.body.className.indexOf("home")>-1||t._CMLS.forceTeadsInBoard===!0},format:"inboard",before:!0,css:"margin: auto !important; padding-top: 5px; padding-bottom: 5px; max-width: 1020px",size:{w:n.w}})}function r(e){c({pid:e,slot:".wrapper-content .column-1 .entry-content p",filter:function(){return t.document.body.className.indexOf("single-feed_posts")>-1},format:"inread",before:!1,css:"padding-bottom: 10px !important;"})}function a(){n("Refreshing cache, re-inserting PID requests.");for(var e in l)if(l.hasOwnProperty(e)){for(var o=0;o<t._ttf.length;o++)t._ttf[o].pid===l[e].pid&&t._ttf.splice(o,1);l[e].launched=!1,c(l[e])}}function s(){$("#cmlsTeadsTag").remove(),function(t){var e,n=t.getElementsByTagName("script")[0];e=t.createElement("script"),e.async=!0,e.id="cmlsTeadsTag",e.src="http://cdn.teads.tv/js/all-v1.js",n.parentNode.insertBefore(e,n)}(t.document)}function c(e){return e.pid&&e.slot&&e.format?(e.components=e.components||{skip:{delay:0}},e.lang=e.lang||"en",e.filter=e.filter||function(){return!0},e.minSlot=e.minSlot||0,e.before=e.before||!1,e.BTF=e.BTF||!1,e.css=e.css||"margin: auto !important;",n("Injecting",e),t._ttf=t._ttf||[],t._ttf.push(e),s(),void(l[e.pid]=e)):(n("Invalid request. No pid, slot, or format given.",e),!1)}var l={};this.process=e,this.refreshCache=a;var d=function(){};if(d.prototype=[],d.prototype.push=function(){for(var t=0;t<arguments.length;t++)arguments[t].format&&arguments[t].pid&&e(arguments[t].format,arguments[t].pid)},t._teadsinjector&&t._teadsinjector.length)for(var g=0;g<t._teadsinjector.length;g++)e(t._teadsinjector[g]);t._teadsinjector=new d,n("Listening for future requests.")}var i="TEADS INJECTOR",r="teadsInjector",a="0.7";if(!t._CMLS[r]&&!t.teads){t._CMLS[r]=new o;var s=t._CMLS.whichPlayer();s&&s.type&&s.type===t._CMLS["const"].PLAYER_TRITON&&t.History&&t.History.Adapter&&(n("Binding refreshCache to pageChange event."),t.History.Adapter.bind(t,"pageChange",function(){$(t._CMLS[r].refreshCache)}))}}(jQuery,window),function(t,e){function n(){t._CMLS.logger(o+" v"+r,arguments)}var o="PLAYER WATCH",i="playerWatch",r="0.5";return t._CMLS[i]?!1:t.TDPW?(t._CMLS[i]={initialized:!1,cache:{},timer:null,interval:2500,"const":{STOPPED:0,PLAYING:1},setDFPCriteria:function a(e,o){t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){n("Setting targeting",e,o),t.googletag.pubads().setTargeting(e,o)})},checkCurrentTrack:function s(){var e=localStorage&&JSON?JSON.parse(localStorage.getItem("tdas.controller."+t.amp_player_config.station+"."+t.amp_player_config.stream_id+".events.current-state")):!1;e&&e.data&&(e.data.stream&&"LIVE_PLAYING"===e.data.stream.code.toUpperCase()?this.setState(this["const"].PLAYING):this.setState(this["const"].STOPPED),e.data.song&&e.data.song.id&&this.hasTrackChanged(e.data.song.id)&&this.trackHasChanged(e.data.song))},setState:function c(e){return e===this["const"].PLAYING&&e!==this.cache.state?(n("Player is streaming."),this.cache.state=e,this.setDFPCriteria("td-player-state","PLAYING"),void t._CMLS.triggerEvent(t,"td-player.playing")):e===this["const"].STOPPED&&e!==this.cache.state?(n("Player is stopped."),this.cache.state=e,this.setDFPCriteria("td-player-state","STOPPED"),void t._CMLS.triggerEvent(t,"td-player.stopped")):void 0},hasTrackChanged:function l(t){return t&&t!==this.cache.trackId?!0:!1},trackHasChanged:function d(e){n("Song has changed!",e),this.cache.trackId=e.id,e.artist&&this.setDFPCriteria("td-player-artist",e.artist),e.album&&this.setDFPCriteria("td-player-album",e.album),e.title&&this.setDFPCriteria("td-player-track",e.title),this.setDFPCriteria("td-player-id",e.id),t._CMLS.triggerEvent(t,"td-player.trackchange",e)},startTimer:function g(){var t=this;clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(function(){t.checkCurrentTrack(),t.startTimer()},this.interval)},init:function u(){return t.amp_player_config&&t.amp_player_config.station&&t.amp_player_config.stream_id?(this.checkCurrentTrack(),this.startTimer(),this.initialized=!0,n("Initialized!",this.cache.trackId),this):(n("Player configuration not available, exiting."),!1)}},void t._CMLS[i].init()):(n("Triton player not enabled, exiting."),!1)}(window),function($,t,e){function n(){t._CMLS.logger(o+" v"+r,arguments)}if(!$||!$.fn.jquery)throw{message:"Auto-scroll script called without supplying jQuery."};var o="AUTO SCROLL",i="cmlsAutoScrollPastLeaderboard",r="0.7",a={timeout:.15,leaderboardSelector:'.wrapper-header div[id^="div-gpt-ad"]:first',leaderboardHeight:90};t._CMLS[i]||t.DO_NOT_AUTO_SCROLL||(t._CMLS[i]={scrolled:!1,disabled:!1,timer:null,cache:{},regenerateCache:function s(){this.cache.leaderboard=$(a.leaderboardSelector),this.cache.player=$("#tgmp_frame:first,.tdpw:first"),this.cache.window=$(t)},leaderboardOnTop:function c(){if(!this.cache.leaderboard)return n("Leaderboard was not cached."),!1;var t=this.cache.leaderboard.offset();return this.playerOnTop()?t.top<150:t.top<50},playerOnTop:function l(){var e=t._CMLS.whichPlayer();return e.position===t._CMLS["const"].PLAYER_POSITION_TOP?!0:!1},generateScrollToPosition:function d(){if(this.cache.leaderboard){var t=this.cache.leaderboard.offset(),e=t.top+a.leaderboardHeight;return t>a.leaderboardHeight+20?(n("Ad offset is greater than leaderboard height settings, assuming returned ad is incorrect."),a.leaderboardHeight+10):this.playerOnTop()?(e=t.top-this.cache.player.height()+a.leaderboardHeight,n("Player is on top, scrollTo position is "+e,t.top,this.cache.player.height(),this.cache.leaderboard.height()),e):(n("Player is on bottom, scrollTo position is "+e,t.top,this.cache.leaderboard.height()),e)}return 0},hasScrolledPastLeaderboard:function g(){return this.scrolled===!0?!0:this.cache.window.scrollTop()>=this.generateScrollToPosition()?(this.scrolled=!0,!0):!1},conditionsGood:function u(){return this.disabled?"Auto-scroll is disabled for this site.":t._CMLS.isHomepage()?this.leaderboardOnTop()?this.hasScrolledPastLeaderboard()?"Already scrolled passed leaderboard.":!0:"Leaderboard is not on top.":"Not on homepage."},scrollPage:function p(){var t=this;n("Pre-animation conditions check.");var e=this.conditionsGood();e!==!0&&(n("Conditions check failed.",e),this.stopTimer()),n("Conditions are good to scroll."),$("html,body").animate({scrollTop:t.generateScrollToPosition()},{queue:i,duration:550}).dequeue(i)},initTimer:function h(){n("Initializing scroll timer.");var t=this,e=t.conditionsGood();return e!==!0?(n("Conditions check after leaderboard render found bad conditions.",e),void t.stopTimer()):($("html,body").clearQueue(i).stop(i,!0),clearTimeout(this.timer),this.timer=null,void(this.timer=setTimeout(function(){t.scrollPage()},6e4*a.timeout)))},stopTimer:function f(){n("Stopping timer, clearing animation queue.",this.timer),$("html,body").clearQueue(i).stop(i,!0),clearTimeout(this.timer),this.timer=null},resetTimer:function m(){n("Resetting scroll timer."),this.initTimer()},init:function C(){n("Initializing auto-scroll library."),this.regenerateCache();var e=this,o=this.conditionsGood();return o!==!0?void n("Init check found bad conditions.",o):(this.cache.window.on("scroll."+i,t._CMLS.throttle(function(){e.hasScrolledPastLeaderboard()&&(e.scrolled=!0,e.stopTimer(),e.cache.window.off("scroll."+i))},500)),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function o(i){if(!i.isEmpty&&"top"===i.slot.getTargeting("pos")){n("Caught leaderboard render event."),e.regenerateCache();var r=e.conditionsGood();r!==!0?(n("Conditions check after leaderboard render found bad conditions.",r),e.stopTimer()):e.resetTimer(),t.googletag.pubads().removeEventListener("slotRenderEnded",o)}})}),"complete"===t.document.readyState?void this.initTimer():void this.cache.window.on("load",function(){e.initTimer()}))}},$(function(){t._CMLS[i].init()}))}(jQuery,window),function(t,e){function n(){t._CMLS.logger(i+" v"+a,arguments)}function o(){if(!t._CMLS.cGroups)return void n("Init test called without cGroups available, exiting.");for(var e=0;e<t._CMLS.cGroups.length;e++)/Format\s+(NewsTalk|Talk|Sports|Christian Talk)/i.test(t._CMLS.cGroups[e])&&(n("Running initialization."),t._CMLS[r].init(),c=!0)}var i="AUTO REFRESH ADS",r="autoRefreshAds",a="0.3",s=8;if(!t._CMLS[r]){t._CMLS[r]={player:t._CMLS.whichPlayer(),timer:null,boundToRenderEvent:!1,checkConditions:function l(){return t._CMLS.isHomepage()&&t._CMLS.autoReloader&&t._CMLS.autoReloader.active?(n("Autoreloader is active, conditions fail."),!1):!0},stop:function d(){return n("Stopping timer."),clearTimeout(this.timer),this.timer=null,this},start:function g(){if(this.stop(),this.checkConditions()){n("Starting timer.");var t=this;return this.timer=setTimeout(function(){t.fire()},6e4*s),this}},fire:function u(){if(this.checkConditions()){var e=this;t.googletag.cmd.push(function(){n("Refreshing ads."),t.googletag.pubads().refresh(),e.start()})}},init:function p(){n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],this.player.type===t._CMLS["const"].PLAYER_TRITON&&(t.addEventListener("td-player.stopped",function(){t._CMLS[r].stop()},!1),t.addEventListener("td-player.playing",function(){t._CMLS[r].start()},!1),t.History&&t.History.Adapter&&t.History.Adapter.bind(t,"pageChange",function(){t._CMLS[r].start()})),this.player.type===t._CMLS["const"].PLAYER_TUNEGENIE&&t.tgmp&&t.TGMP_EVENTS&&t.tgmp.addEventListener(t.TGMP_EVENTS.streamplaying,function(e){return e===!0?void t._CMLS[r].start():void t._CMLS[r].stop()}),n("Listeners set, waiting for player event.")}};var c=!1;o(),t.addEventListener("cms-sgroup",function(){c||o()},!1)}}(window),function($,t,e){function n(){t._CMLS.logger(i+" v"+a,arguments)}function o(){return n("Checking for player...",c),t._CMLS[r].isPlayerActive()?void t._CMLS[r].init():void(c>20||(setTimeout(o,1e3),c++))}var i="NAV THROUGH PLAYER",r="navThroughPlayer",a="0.1",s=t._CMLS.whichPlayer();if(!t._CMLS[r]){t._CMLS[r]={isPlayerActive:function l(){return s=t._CMLS.whichPlayer(),s.type?!0:!1},updateIframeLinks:function d(e){if(t._CMLS[r].isPlayerActive){var o=e.jquery?e:$(e);o.contents().find('a[target="_self"],a[target="_top"],a[target="_parent"]').each(function(){n("Updating links in slot.",o.prop("id")),t._CMLS[r].updateLink(this)})}},updateLink:function g(e,n){if(t._CMLS[r].isPlayerActive&&e){var o=e.jquery?e:$(e),i=t.document.createElement("a");if(i.href=o.prop("href"),0===i.href.indexOf("/")||i.hostname!==t.location.hostname&&!n)return void(i=null);o.off("."+r).on("click."+r,t._CMLS[r].clickThrough),i=null}},clickThrough:function u(e){e&&t._CMLS[r].isPlayerActive()&&(e.preventDefault(),n("Intercepting click."),t._CMLS[r].navigate(e.currentTarget.href))},navigate:function p(e){s.type===t._CMLS["const"].PLAYER_TRITON&&t.History&&(n("Navigating through Triton player.",e),t.History.pushState(null,null,e)),s.type===t._CMLS["const"].PLAYER_TUNEGENIE&&t.top.tgmp&&(n("Navigating through TuneGenie player.",e),t.top.tgmp.updateLocation(e))},init:function h(){return t._CMLS[r].isPlayerActive()?(n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(e){if(e&&e.slot){var n=e.slot.getSlotElementId(),o=t.document.getElementById(n);t._CMLS[r].updateIframeLinks(o)}})}),$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each(function(){t._CMLS[r].updateIframeLinks(this)}),$(t).load(function(){$('iframe[id^="google_ads_iframe"],#cmlsWallpaperInjectorContainer iframe').each(function(){t._CMLS[r].updateIframeLinks(this)})}),void n("Initialized.")):void n("No player is active, exiting.")}};var c=0;o()}}(jQuery,window),function($,t,e){function n(){t._CMLS.logger(r+" v"+s,arguments)}function o(o){function i(){var t,n=document.createElement("fakeelement"),o={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkittransitionend",msTransition:"mstransitionend"};for(t in o)if(n.style[t]!==e)return o[t]}function r(t){var e=0,n=t.length,o,i;if(0===n)return e;for(o=0;n>o;o++)i=t.charCodeAt(o),e=(e<<5)-e+i,e&=e;return e}function a(){return v.dfpSlot=$(o.dfpSlotNode),v.injectionNode=$(o.injectionNode),v.stickNode=$(o.stickNode),v.contentNode=$(o.contentNode),v.footerNode=$(o.footerNode),v.obstructiveNode=$(o.obstructiveNode),v.window=$(t),v.document=$(t.document),s(),v}function s(){return n("Refreshing stick position."),v.stickAt=v.stickNode.length?v.stickNode.offset().top:0,v.stickAt}function c(t){if(v.container&&v.container.length)return v.container;var e=$("#"+S+"Container");if(e.length)return v.container=e,v.container;if(t===!0)return!1;n("Generating new wallpaper container."),a();var o=$("<div />",{id:S+"Container","class":S+"-container"});return v.injectionNode.prepend(o),v.container=o,l(),v.container}function l(){var t=c(),e={content:v.contentNode.css(["position","zIndex"]),footer:v.footerNode.css(["position","zIndex"])};"static"===e.content.position&&(n("Setting content area position to relative."),v.contentNode.css("position","relative")),("auto"===e.content.zIndex||e.content.zIndex<=t.css("zIndex"))&&(n("Raising content area above wallpaper container."),v.contentNode.css("zIndex",t.css("zIndex")+1)),"static"===e.footer.position&&(n("Setting footer area position to relative."),v.footerNode.css("position","relative")),v.contentNode.data("originalStyles",e.content),v.footerNode.data("originalStyles",e.footer),n("Content area has been raised.")}function d(){n("Displaying wallpaper.");var t=c();t.off(y).addClass(S+"-open"),v.obstructiveNode.hide(),h()}function g(){function t(){r=!0,v.obstructiveNode.show(),n("Clearing all event listeners."),v.window.off("."+S),o&&o.length&&(n("Removing wallpaper container."),o.off("."+S).remove()),v.container=null,e.resolve()}var e=$.Deferred(),o=c(!0),i=o&&o.length?o.hasClass(S+"-open"):!1,r=!1;return n("RESET!"),o&&o.length?(o.off(y).removeData().removeProp("data").css("backgroundColor","rgba(0,0,0,0)").removeClass(S+"-open").removeClass(S+"-fixed"),n("Container is closing."),y&&i&&o.on(y,function(e){"opacity"===e.originalEvent.propertyName&&(n("Transition complete."),t())}),setTimeout(function(){r||t()},800)):t(),n("Returning our promise."),e.promise()}function u(){var t=c();return t.hasClass(S+"-fixed")}function p(t){var e=c();u()&&t===!1&&(n("Unfixing wallpaper position."),e.removeClass(S+"-fixed").css("top","0")),u()||t!==!0||(n("Fixing wallpaper position."),s(),e.addClass(S+"-fixed").css("top",v.stickAt))}function h(){function t(){var t=v.window.scrollTop(),e=v.injectionNode.length?v.injectionNode.offset().top:0;return e<t+v.stickAt?!0:!1}n("Initializing scroll tracking."),s(),p(t()?!0:!1),v.window.on("scroll."+S,L(function(){return t()?void p(!0):void p(!1)},50)),v.window.on("resize."+S,_(function(){s()},500)),n("Scroll tracking enabled.")}function f(){try{if($(o.contentNode).height()<200)return n("Content node is not ready, retrying."),void setTimeout(function(){f()},500);a(),n("Processing wallpaper slot.");var e=v.dfpSlot.find("iframe"),i=e.contents().find("#google_image_div,body").first(),s=i.find("a:first"),l=i.find("img.img_ad:first,img:first").first(),u=l.prop("alt");if(n("Checking image."),!l.length)return n("No image found in ad slot! Resetting."),void g();var p=c(),h=r((s.length?s.prop("href")+s.prop("target"):"")+l.prop("src"));if(n("Generated hash.",h),h===p.data("hash"))return void n("Requested wallpaper is already set.");n("Getting background color.",u);var m="rgba(255,255,255,0)",C=u.match(/(\#[A-Za-z0-9]+)/)||!1;C&&C.length>1&&(m=C[1]),n("Using background color.",m),g().then(function(){n("Building the new wallpaper.");var e="";s.length&&(e=$("<a />",{href:s.prop("href"),target:s.prop("target")}),t._CMLS.navThroughPlayer&&t._CMLS.navThroughPlayer.updateLink(e[0]));var o=$("<iframe />",{name:S+"Iframe",scrolling:"no",marginWidth:"0",marginHeight:"0",frameborder:"0"});n("Injecting iframe into container."),p=c(),p.data("hash",h).css("backgroundColor",m).append(o);var i='<style>html,body{background:transparent;margin:0;padding:0;width:100%;height:100%;}body{background:url("'+l.prop("src")+'") no-repeat top center;}a{display:block;width:100%;height:100%;text-decoration:none;}</style>';o.load(function(){n("Injecting wallpaper into iframe."),o.contents().find("body").append(i,e)}).prop("src","about:blank"),l.length?(n("Initializing preloader."),$("<img />").bind("load",function(){d(),$(this).remove()}).prop("src",l.prop("src"))):d()})}catch(L){console.log("WTF PEOPLE",L)}}function m(t){var e=t.slot.getTargeting("pos");return e.indexOf("wallpaper-ad")>-1?(n("Caught render event for wallpaper-ad",t.slot.getSlotElementId()),t.isEmpty?(n("Slot was empty, resetting wallpaper container."),g()):(n("Slot contained an ad, processing wallpaper."),f()),!1):void 0}function C(){$(t).off("."+S)}var v={},S=o.nameSpace||"wallpaperInjector",L=t._CMLS.throttle,_=t._CMLS.debounce,y=i();this.reset=g,this.process=f,this.unbindAllListeners=C,n("Initializing."),t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(function(){t.googletag.pubads().addEventListener("slotRenderEnded",function(t){_(m(t),1e3)})});var M='<style id="'+S+'Styles">.'+S+"-container {display: block !important;position: absolute;z-index: 0;top: 0;left: 0;height: 0 !important;width: 100% !important;overflow: hidden;text-align: center;transition: opacity 0.5s, height 0.6s, background-color 0.4s;opacity: 0;}."+S+"-container iframe {border: 0;height: 100%;width: 100%;}."+S+"-container ~ .grid-container {transition: box-shadow 0.6s}."+S+"-open {height: 100% !important;opacity: 1;}."+S+"-open ~ .grid-container {box-shadow: 0 0 20px rgba(0,0,0,0.3);}."+S+"-fixed {position: fixed;}"+o.dfpSlotNode+" {display: none !important;}</style>";t.document.getElementById(S+"Styles")||$("head").append(M),"complete"===t.document.readyState||"loaded"===t.document.readyState?f():$(function(){f()})}var i={dfpSlotNode:"#div-gpt-ad-1418849849333-16",injectionNode:".wrapper-content",stickNode:".wrapper-header",contentNode:".wrapper-content .grid-container:first",footerNode:".wrapper-footer",obstructiveNode:".takeover-left, .takeover-right, .skyscraper-left, .skyscraper-right"},r="WALLPAPER INJECTOR",a="wallpaperInjector",s="0.5";t._CMLS[a],i.nameSpace=a,t._CMLS[a]=new o(i)}(jQuery,window),function(t,e){function n(){t._CMLS.logger(i+" v"+a,arguments)}function o(){t._CMLS.autoReload=new s}var i="AUTO-RELOADER",r="autoReloader",a="0.7";if(!t._CMLS[r]){t._CMLS[r]={condition:"body.home",timeout:48e4,active:!1,timer:null,player:t._CMLS.whichPlayer(),checkCondition:function c(){return t.document.querySelector(this.condition)?!0:!1},reset:function l(){n("Resetting."),clearTimeout(this.timer),this.timer=null,this.restart()},start:function d(){return this.checkCondition()?(n("Starting timer."),this.active=!0,void this.reset()):(n("Condition check failed, exiting."),this.active=!1,!1)},stop:function g(){n("Stopping timer."),this.active=!1,this.reset()},restart:function u(){if(this.active&&this.checkCondition()){n("Restarting timer.",this.timeout);var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.fire(),t.reset()},this.timeout)}else this.active=!1},destroy:function p(){n("Destroying timer."),this.stop()},fire:function h(){if(this.checkCondition()){if(n("Reloading the page."),this.player.type===t._CMLS["const"].PLAYER_TRITON)return void t.History.Adapter.trigger(t,"statechange");if(this.player.type===t._CMLS["const"].PLAYER_TUNEGENIE)return void t.tgmp.updateLocation(t.location.href);t.location.reload()}else n("Condition not met, self-destructing."),this.destroy()},init:function f(t){this.condition=t.condition||this.condition,this.timeout=6e4*t.timeout||this.timeout,this.start(),n("Initialized.",this.timeout,this.condition)}};var s=function(){};s.prototype=[],s.prototype._push=s.prototype.push,s.prototype.push=function(){for(var e=0;e<arguments.length;e++)this._push(arguments[e]);t._CMLS[r].init(this.slice(-1)[0]),o()},t._CMLS.autoReload&&t._CMLS.autoReload.length&&t._CMLS[r].init(t._CMLS.autoReload.slice(-1)[0]),o()}}(window),function(t,e){function n(){t._CMLS.logger(o+" v"+r,arguments)}var o="ADDTHIS INJECTOR",i="addThisInjector",r="0.4",a="ra-55dc79597bae383e";return t.addthis?void n("AddThis already loaded by page."):(t._CMLS[i]={inject:function s(){n("Injecting."),t.addthis_config=t.addthis_config||{},t.addthis_config.pubid=a;var e=t.document.createElement("script");e.onload=function(){return t._CMLS[i].active?void n("Already active."):void t._CMLS[i].buildLayer()},e.src="//s7.addthis.com/js/300/addthis_widget.js#async=1",e.id=i+"Script",e.async=!1,t.document.head.appendChild(e),n("Injected.")},buildLayer:function c(){return t.NO_ADDTHIS_HERE?void n("NO_ADDTHIS_HERE found in window object, will not build."):t._CMLS.isHomepage()?void n("Will not build layer on homepage."):(n("Building layer."),void(t.addthis&&t.addthis.layers?(t.addthis.layers({share:{position:"left",offset:{bottom:"100px"},services:"facebook,twitter,tumblr,email,more"}},function(e){t._CMLS[i].layer=e,t.addthis.layers.refresh(),n("Layer built.")}),t._CMLS[i].active=!0):n("AddThis not available!")))},destroyLayer:function l(){n("Destroying layer."),t.addthis&&t._CMLS[i].active&&t.addthis.layers(function(e){e.destroy(),t._CMLS[i].active=!1})},init:function d(){n("Initializing."),t.History&&t.History.Adapter&&(t.History.Adapter.bind(t,"statechange",t._CMLS[i].destroyLayer),t.History.Adapter.bind(t,"pageChange",t._CMLS[i].buildLayer)),this.inject(),n("Initialized!")}},void t._CMLS[i].init())}(window),function($,t,e){var n=t._CMLS||{};n.breakingNews=function(t,e){var n={position:"above",link:null,beforeText:"Breaking News:",text:null},o,i=".wrapper-header";"object"==typeof t?o=$.extend({},n,t):(o=n,o.text=t),!o.link&&e&&(o.link=e);var r=".cmlsBreakingNews-container { display: block; position: relative; float: none; z-index: 10; padding: 1em; color: #fff; background: #900; box-shadow: 0 0 10px rgba(0,0,0,0.4); font-size: 14px; text-decoration: none; outline: 0 }.cmlsBreakingNews-container[href] { cursor: pointer; }.cmlsBreakingNews-container:hover { color: #fff !important; }.cmlsBreakingNews-inner { max-width: 1020px; margin: 0 auto; }.cmlsBreakingNews-before { font-weight: bold; display: inline-block; }.cmlsBreakingNews-inner a { text-decoration: underline !important; color: inherit; }",a='<div class="cmlsBreakingNews-container"><div class="cmlsBreakingNews-inner">{{BEFORE}} {{TEXT}}</div></div>';if(o.beforeText&&o.beforeText.length){var s='<div class="cmlsBreakingNews-before">'+o.beforeText+"</div>";a=a.replace("{{BEFORE}}",s)}if(a=$(a.replace("{{TEXT}}",o.text)),o.link&&o.link.length){console.log("Setting bar link.");var c=$('<a class="cmlsBreakingNews-container"></a>').append(a.html()).prop({href:o.link,target:"_blank"});a=c}return $("#cmlsBreakingNewsStyles").length||$("head").prepend('<style id="cmlsBreakingNewsStyles">/* CMLS Breaking News Bar styles */\n'+r+"</style>"),"below"===o.position?void $(i).after(a):void $(i).before(a)};var o=function(){};o.prototype=[],o.prototype.push=function(){arguments.length&&"object"==typeof arguments[0]?n.breakingNews.apply(null,arguments):arguments.length>1&&n.breakingNews(arguments[0],arguments[1])},t._CMLSBreakingNews&&t._CMLSBreakingNews.length&&t._CMLSBreakingNews.forEach(n.breakingNews),t._CMLSBreakingNews=new o}(jQuery,window);
//# sourceMappingURL=./compiled-allsites-min.js.map